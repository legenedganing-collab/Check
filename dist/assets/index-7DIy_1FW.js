function e(e,t){for(var r=0;r<t.length;r++){const i=t[r];if("string"!=typeof i&&!Array.isArray(i))for(const t in i)if("default"!==t&&!(t in e)){const r=Object.getOwnPropertyDescriptor(i,t);r&&Object.defineProperty(e,t,r.get?r:{enumerable:!0,get:()=>i[t]})}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}function t(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const r of e)if("childList"===r.type)for(const e of r.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var r={exports:{}},i={},s={exports:{}},n={},o=Symbol.for("react.element"),a=Symbol.for("react.portal"),l=Symbol.for("react.fragment"),c=Symbol.for("react.strict_mode"),h=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),d=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),_=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),g=Symbol.iterator;var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,y={};function S(e,t,r){this.props=e,this.context=t,this.refs=y,this.updater=r||m}function w(){}function C(e,t,r){this.props=e,this.context=t,this.refs=y,this.updater=r||m}S.prototype.isReactComponent={},S.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},S.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},w.prototype=S.prototype;var x=C.prototype=new w;x.constructor=C,b(x,S.prototype),x.isPureReactComponent=!0;var k=Array.isArray,E=Object.prototype.hasOwnProperty,L={current:null},R={key:!0,ref:!0,__self:!0,__source:!0};function D(e,t,r){var i,s={},n=null,a=null;if(null!=t)for(i in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(n=""+t.key),t)E.call(t,i)&&!R.hasOwnProperty(i)&&(s[i]=t[i]);var l=arguments.length-2;if(1===l)s.children=r;else if(1<l){for(var c=Array(l),h=0;h<l;h++)c[h]=arguments[h+2];s.children=c}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===s[i]&&(s[i]=l[i]);return{$$typeof:o,type:e,key:n,ref:a,props:s,_owner:L.current}}function A(e){return"object"==typeof e&&null!==e&&e.$$typeof===o}var T=/\/+/g;function P(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function B(e,t,r,i,s){var n=typeof e;"undefined"!==n&&"boolean"!==n||(e=null);var l=!1;if(null===e)l=!0;else switch(n){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case o:case a:l=!0}}if(l)return s=s(l=e),e=""===i?"."+P(l,0):i,k(s)?(r="",null!=e&&(r=e.replace(T,"$&/")+"/"),B(s,t,r,"",function(e){return e})):null!=s&&(A(s)&&(s=function(e,t){return{$$typeof:o,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(s,r+(!s.key||l&&l.key===s.key?"":(""+s.key).replace(T,"$&/")+"/")+e)),t.push(s)),1;if(l=0,i=""===i?".":i+":",k(e))for(var c=0;c<e.length;c++){var h=i+P(n=e[c],c);l+=B(n,t,r,h,s)}else if(h=function(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=g&&e[g]||e["@@iterator"])?e:null}(e),"function"==typeof h)for(e=h.call(e),c=0;!(n=e.next()).done;)l+=B(n=n.value,t,r,h=i+P(n,c++),s);else if("object"===n)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function O(e,t,r){if(null==e)return e;var i=[],s=0;return B(e,i,"","",function(e){return t.call(r,e,s++)}),i}function M(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var N={current:null},I={transition:null},j={ReactCurrentDispatcher:N,ReactCurrentBatchConfig:I,ReactCurrentOwner:L};function H(){throw Error("act(...) is not supported in production builds of React.")}n.Children={map:O,forEach:function(e,t,r){O(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return O(e,function(){t++}),t},toArray:function(e){return O(e,function(e){return e})||[]},only:function(e){if(!A(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},n.Component=S,n.Fragment=l,n.Profiler=h,n.PureComponent=C,n.StrictMode=c,n.Suspense=p,n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=j,n.act=H,n.cloneElement=function(e,t,r){if(null==e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=b({},e.props),s=e.key,n=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(n=t.ref,a=L.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)E.call(t,c)&&!R.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){l=Array(c);for(var h=0;h<c;h++)l[h]=arguments[h+2];i.children=l}return{$$typeof:o,type:e.type,key:s,ref:n,props:i,_owner:a}},n.createContext=function(e){return(e={$$typeof:d,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:u,_context:e},e.Consumer=e},n.createElement=D,n.createFactory=function(e){var t=D.bind(null,e);return t.type=e,t},n.createRef=function(){return{current:null}},n.forwardRef=function(e){return{$$typeof:f,render:e}},n.isValidElement=A,n.lazy=function(e){return{$$typeof:v,_payload:{_status:-1,_result:e},_init:M}},n.memo=function(e,t){return{$$typeof:_,type:e,compare:void 0===t?null:t}},n.startTransition=function(e){var t=I.transition;I.transition={};try{e()}finally{I.transition=t}},n.unstable_act=H,n.useCallback=function(e,t){return N.current.useCallback(e,t)},n.useContext=function(e){return N.current.useContext(e)},n.useDebugValue=function(){},n.useDeferredValue=function(e){return N.current.useDeferredValue(e)},n.useEffect=function(e,t){return N.current.useEffect(e,t)},n.useId=function(){return N.current.useId()},n.useImperativeHandle=function(e,t,r){return N.current.useImperativeHandle(e,t,r)},n.useInsertionEffect=function(e,t){return N.current.useInsertionEffect(e,t)},n.useLayoutEffect=function(e,t){return N.current.useLayoutEffect(e,t)},n.useMemo=function(e,t){return N.current.useMemo(e,t)},n.useReducer=function(e,t,r){return N.current.useReducer(e,t,r)},n.useRef=function(e){return N.current.useRef(e)},n.useState=function(e){return N.current.useState(e)},n.useSyncExternalStore=function(e,t,r){return N.current.useSyncExternalStore(e,t,r)},n.useTransition=function(){return N.current.useTransition()},n.version="18.3.1",s.exports=n;var F=s.exports;const z=t(F),U=e({__proto__:null,default:z},[F]);
/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
var W=F,$=Symbol.for("react.element"),q=Symbol.for("react.fragment"),V=Object.prototype.hasOwnProperty,K=W.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,G={key:!0,ref:!0,__self:!0,__source:!0};function X(e,t,r){var i,s={},n=null,o=null;for(i in void 0!==r&&(n=""+r),void 0!==t.key&&(n=""+t.key),void 0!==t.ref&&(o=t.ref),t)V.call(t,i)&&!G.hasOwnProperty(i)&&(s[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps)void 0===s[i]&&(s[i]=t[i]);return{$$typeof:$,type:e,key:n,ref:o,props:s,_owner:K.current}}i.Fragment=q,i.jsx=X,i.jsxs=X,r.exports=i;var Y=r.exports,Q={},J={exports:{}},Z={},ee={exports:{}},te={};
/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
!function(e){function t(e,t){var r=e.length;e.push(t);e:for(;0<r;){var i=r-1>>>1,n=e[i];if(!(0<s(n,t)))break e;e[i]=t,e[r]=n,r=i}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],r=e.pop();if(r!==t){e[0]=r;e:for(var i=0,n=e.length,o=n>>>1;i<o;){var a=2*(i+1)-1,l=e[a],c=a+1,h=e[c];if(0>s(l,r))c<n&&0>s(h,l)?(e[i]=h,e[c]=r,i=c):(e[i]=l,e[a]=r,i=a);else{if(!(c<n&&0>s(h,r)))break e;e[i]=h,e[c]=r,i=c}}}return t}function s(e,t){var r=e.sortIndex-t.sortIndex;return 0!==r?r:e.id-t.id}if("object"==typeof performance&&"function"==typeof performance.now){var n=performance;e.unstable_now=function(){return n.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var l=[],c=[],h=1,u=null,d=3,f=!1,p=!1,_=!1,v="function"==typeof setTimeout?setTimeout:null,g="function"==typeof clearTimeout?clearTimeout:null,m="undefined"!=typeof setImmediate?setImmediate:null;function b(e){for(var s=r(c);null!==s;){if(null===s.callback)i(c);else{if(!(s.startTime<=e))break;i(c),s.sortIndex=s.expirationTime,t(l,s)}s=r(c)}}function y(e){if(_=!1,b(e),!p)if(null!==r(l))p=!0,P(S);else{var t=r(c);null!==t&&B(y,t.startTime-e)}}function S(t,s){p=!1,_&&(_=!1,g(k),k=-1),f=!0;var n=d;try{for(b(s),u=r(l);null!==u&&(!(u.expirationTime>s)||t&&!R());){var o=u.callback;if("function"==typeof o){u.callback=null,d=u.priorityLevel;var a=o(u.expirationTime<=s);s=e.unstable_now(),"function"==typeof a?u.callback=a:u===r(l)&&i(l),b(s)}else i(l);u=r(l)}if(null!==u)var h=!0;else{var v=r(c);null!==v&&B(y,v.startTime-s),h=!1}return h}finally{u=null,d=n,f=!1}}"undefined"!=typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var w,C=!1,x=null,k=-1,E=5,L=-1;function R(){return!(e.unstable_now()-L<E)}function D(){if(null!==x){var t=e.unstable_now();L=t;var r=!0;try{r=x(!0,t)}finally{r?w():(C=!1,x=null)}}else C=!1}if("function"==typeof m)w=function(){m(D)};else if("undefined"!=typeof MessageChannel){var A=new MessageChannel,T=A.port2;A.port1.onmessage=D,w=function(){T.postMessage(null)}}else w=function(){v(D,0)};function P(e){x=e,C||(C=!0,w())}function B(t,r){k=v(function(){t(e.unstable_now())},r)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(e){e.callback=null},e.unstable_continueExecution=function(){p||f||(p=!0,P(S))},e.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<e?Math.floor(1e3/e):5},e.unstable_getCurrentPriorityLevel=function(){return d},e.unstable_getFirstCallbackNode=function(){return r(l)},e.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var r=d;d=t;try{return e()}finally{d=r}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var r=d;d=e;try{return t()}finally{d=r}},e.unstable_scheduleCallback=function(i,s,n){var o=e.unstable_now();switch("object"==typeof n&&null!==n?n="number"==typeof(n=n.delay)&&0<n?o+n:o:n=o,i){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return i={id:h++,callback:s,priorityLevel:i,startTime:n,expirationTime:a=n+a,sortIndex:-1},n>o?(i.sortIndex=n,t(c,i),null===r(l)&&i===r(c)&&(_?(g(k),k=-1):_=!0,B(y,n-o))):(i.sortIndex=a,t(l,i),p||f||(p=!0,P(S))),i},e.unstable_shouldYield=R,e.unstable_wrapCallback=function(e){var t=d;return function(){var r=d;d=t;try{return e.apply(this,arguments)}finally{d=r}}}}(te),ee.exports=te;var re=ee.exports,ie=F,se=re;
/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function ne(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var oe=new Set,ae={};function le(e,t){ce(e,t),ce(e+"Capture",t)}function ce(e,t){for(ae[e]=t,e=0;e<t.length;e++)oe.add(t[e])}var he=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),ue=Object.prototype.hasOwnProperty,de=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,fe={},pe={};function _e(e,t,r,i,s,n,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=i,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=n,this.removeEmptyString=o}var ve={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){ve[e]=new _e(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];ve[t]=new _e(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){ve[e]=new _e(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){ve[e]=new _e(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){ve[e]=new _e(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){ve[e]=new _e(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){ve[e]=new _e(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){ve[e]=new _e(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){ve[e]=new _e(e,5,!1,e.toLowerCase(),null,!1,!1)});var ge=/[\-:]([a-z])/g;function me(e){return e[1].toUpperCase()}function be(e,t,r,i){var s=ve.hasOwnProperty(t)?ve[t]:null;(null!==s?0!==s.type:i||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,r,i){if(null==t||function(e,t,r,i){if(null!==r&&0===r.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!i&&(null!==r?!r.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,r,i))return!0;if(i)return!1;if(null!==r)switch(r.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,r,s,i)&&(r=null),i||null===s?function(e){return!!ue.call(pe,e)||!ue.call(fe,e)&&(de.test(e)?pe[e]=!0:(fe[e]=!0,!1))}(t)&&(null===r?e.removeAttribute(t):e.setAttribute(t,""+r)):s.mustUseProperty?e[s.propertyName]=null===r?3!==s.type&&"":r:(t=s.attributeName,i=s.attributeNamespace,null===r?e.removeAttribute(t):(r=3===(s=s.type)||4===s&&!0===r?"":""+r,i?e.setAttributeNS(i,t,r):e.setAttribute(t,r))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(ge,me);ve[t]=new _e(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(ge,me);ve[t]=new _e(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(ge,me);ve[t]=new _e(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){ve[e]=new _e(e,1,!1,e.toLowerCase(),null,!1,!1)}),ve.xlinkHref=new _e("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){ve[e]=new _e(e,1,!1,e.toLowerCase(),null,!0,!0)});var ye=ie.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Se=Symbol.for("react.element"),we=Symbol.for("react.portal"),Ce=Symbol.for("react.fragment"),xe=Symbol.for("react.strict_mode"),ke=Symbol.for("react.profiler"),Ee=Symbol.for("react.provider"),Le=Symbol.for("react.context"),Re=Symbol.for("react.forward_ref"),De=Symbol.for("react.suspense"),Ae=Symbol.for("react.suspense_list"),Te=Symbol.for("react.memo"),Pe=Symbol.for("react.lazy"),Be=Symbol.for("react.offscreen"),Oe=Symbol.iterator;function Me(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=Oe&&e[Oe]||e["@@iterator"])?e:null}var Ne,Ie=Object.assign;function je(e){if(void 0===Ne)try{throw Error()}catch(Od){var t=Od.stack.trim().match(/\n( *(at )?)/);Ne=t&&t[1]||""}return"\n"+Ne+e}var He=!1;function Fe(e,t){if(!e||He)return"";He=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(Ad){var i=Ad}Reflect.construct(e,[],t)}else{try{t.call()}catch(Ad){i=Ad}e.call(t.prototype)}else{try{throw Error()}catch(Ad){i=Ad}e()}}catch(Ad){if(Ad&&i&&"string"==typeof Ad.stack){for(var s=Ad.stack.split("\n"),n=i.stack.split("\n"),o=s.length-1,a=n.length-1;1<=o&&0<=a&&s[o]!==n[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==n[a]){if(1!==o||1!==a)do{if(o--,0>--a||s[o]!==n[a]){var l="\n"+s[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=o&&0<=a);break}}}finally{He=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?je(e):""}function ze(e){switch(e.tag){case 5:return je(e.type);case 16:return je("Lazy");case 13:return je("Suspense");case 19:return je("SuspenseList");case 0:case 2:case 15:return e=Fe(e.type,!1);case 11:return e=Fe(e.type.render,!1);case 1:return e=Fe(e.type,!0);default:return""}}function Ue(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case Ce:return"Fragment";case we:return"Portal";case ke:return"Profiler";case xe:return"StrictMode";case De:return"Suspense";case Ae:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case Le:return(e.displayName||"Context")+".Consumer";case Ee:return(e._context.displayName||"Context")+".Provider";case Re:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case Te:return null!==(t=e.displayName||null)?t:Ue(e.type)||"Memo";case Pe:t=e._payload,e=e._init;try{return Ue(e(t))}catch(Od){}}return null}function We(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ue(t);case 8:return t===xe?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"==typeof t)return t.displayName||t.name||null;if("string"==typeof t)return t}return null}function $e(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function qe(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function Ve(e){e._valueTracker||(e._valueTracker=function(e){var t=qe(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==r&&"function"==typeof r.get&&"function"==typeof r.set){var s=r.get,n=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(e){i=""+e,n.call(this,e)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return i},setValue:function(e){i=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Ke(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),i="";return e&&(i=qe(e)?e.checked?"true":"false":e.value),(e=i)!==r&&(t.setValue(e),!0)}function Ge(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Xe(e,t){var r=t.checked;return Ie({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=r?r:e._wrapperState.initialChecked})}function Ye(e,t){var r=null==t.defaultValue?"":t.defaultValue,i=null!=t.checked?t.checked:t.defaultChecked;r=$e(null!=t.value?t.value:r),e._wrapperState={initialChecked:i,initialValue:r,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Qe(e,t){null!=(t=t.checked)&&be(e,"checked",t,!1)}function Je(e,t){Qe(e,t);var r=$e(t.value),i=t.type;if(null!=r)"number"===i?(0===r&&""===e.value||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if("submit"===i||"reset"===i)return void e.removeAttribute("value");t.hasOwnProperty("value")?et(e,t.type,r):t.hasOwnProperty("defaultValue")&&et(e,t.type,$e(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Ze(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!("submit"!==i&&"reset"!==i||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}""!==(r=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==r&&(e.name=r)}function et(e,t,r){"number"===t&&Ge(e.ownerDocument)===e||(null==r?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var tt=Array.isArray;function rt(e,t,r,i){if(e=e.options,t){t={};for(var s=0;s<r.length;s++)t["$"+r[s]]=!0;for(r=0;r<e.length;r++)s=t.hasOwnProperty("$"+e[r].value),e[r].selected!==s&&(e[r].selected=s),s&&i&&(e[r].defaultSelected=!0)}else{for(r=""+$e(r),t=null,s=0;s<e.length;s++){if(e[s].value===r)return e[s].selected=!0,void(i&&(e[s].defaultSelected=!0));null!==t||e[s].disabled||(t=e[s])}null!==t&&(t.selected=!0)}}function it(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(ne(91));return Ie({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function st(e,t){var r=t.value;if(null==r){if(r=t.children,t=t.defaultValue,null!=r){if(null!=t)throw Error(ne(92));if(tt(r)){if(1<r.length)throw Error(ne(93));r=r[0]}t=r}null==t&&(t=""),r=t}e._wrapperState={initialValue:$e(r)}}function nt(e,t){var r=$e(t.value),i=$e(t.defaultValue);null!=r&&((r=""+r)!==e.value&&(e.value=r),null==t.defaultValue&&e.defaultValue!==r&&(e.defaultValue=r)),null!=i&&(e.defaultValue=""+i)}function ot(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function at(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lt(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?at(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ct,ht=function(e){return"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,r,i,s){MSApp.execUnsafeLocalFunction(function(){return e(t,r)})}:e}(function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ct=ct||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ct.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function ut(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&3===r.nodeType)return void(r.nodeValue=t)}e.textContent=t}var dt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ft=["Webkit","ms","Moz","O"];function pt(e,t,r){return null==t||"boolean"==typeof t||""===t?"":r||"number"!=typeof t||0===t||dt.hasOwnProperty(e)&&dt[e]?(""+t).trim():t+"px"}function _t(e,t){for(var r in e=e.style,t)if(t.hasOwnProperty(r)){var i=0===r.indexOf("--"),s=pt(r,t[r],i);"float"===r&&(r="cssFloat"),i?e.setProperty(r,s):e[r]=s}}Object.keys(dt).forEach(function(e){ft.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),dt[t]=dt[e]})});var vt=Ie({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function gt(e,t){if(t){if(vt[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(ne(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(ne(60));if("object"!=typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(ne(61))}if(null!=t.style&&"object"!=typeof t.style)throw Error(ne(62))}}function mt(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var bt=null;function yt(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var St=null,wt=null,Ct=null;function xt(e){if(e=mn(e)){if("function"!=typeof St)throw Error(ne(280));var t=e.stateNode;t&&(t=yn(t),St(e.stateNode,e.type,t))}}function kt(e){wt?Ct?Ct.push(e):Ct=[e]:wt=e}function Et(){if(wt){var e=wt,t=Ct;if(Ct=wt=null,xt(e),t)for(e=0;e<t.length;e++)xt(t[e])}}function Lt(e,t){return e(t)}function Rt(){}var Dt=!1;function At(e,t,r){if(Dt)return e(t,r);Dt=!0;try{return Lt(e,t,r)}finally{Dt=!1,(null!==wt||null!==Ct)&&(Rt(),Et())}}function Tt(e,t){var r=e.stateNode;if(null===r)return null;var i=yn(r);if(null===i)return null;r=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(i=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!i;break e;default:e=!1}if(e)return null;if(r&&"function"!=typeof r)throw Error(ne(231,t,typeof r));return r}var Pt=!1;if(he)try{var Bt={};Object.defineProperty(Bt,"passive",{get:function(){Pt=!0}}),window.addEventListener("test",Bt,Bt),window.removeEventListener("test",Bt,Bt)}catch(Td){Pt=!1}function Ot(e,t,r,i,s,n,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(r,c)}catch(h){this.onError(h)}}var Mt=!1,Nt=null,It=!1,jt=null,Ht={onError:function(e){Mt=!0,Nt=e}};function Ft(e,t,r,i,s,n,o,a,l){Mt=!1,Nt=null,Ot.apply(Ht,arguments)}function zt(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{!!(4098&(t=e).flags)&&(r=t.return),e=t.return}while(e)}return 3===t.tag?r:null}function Ut(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Wt(e){if(zt(e)!==e)throw Error(ne(188))}function $t(e){return e=function(e){var t=e.alternate;if(!t){if(null===(t=zt(e)))throw Error(ne(188));return t!==e?null:e}for(var r=e,i=t;;){var s=r.return;if(null===s)break;var n=s.alternate;if(null===n){if(null!==(i=s.return)){r=i;continue}break}if(s.child===n.child){for(n=s.child;n;){if(n===r)return Wt(s),e;if(n===i)return Wt(s),t;n=n.sibling}throw Error(ne(188))}if(r.return!==i.return)r=s,i=n;else{for(var o=!1,a=s.child;a;){if(a===r){o=!0,r=s,i=n;break}if(a===i){o=!0,i=s,r=n;break}a=a.sibling}if(!o){for(a=n.child;a;){if(a===r){o=!0,r=n,i=s;break}if(a===i){o=!0,i=n,r=s;break}a=a.sibling}if(!o)throw Error(ne(189))}}if(r.alternate!==i)throw Error(ne(190))}if(3!==r.tag)throw Error(ne(188));return r.stateNode.current===r?e:t}(e),null!==e?qt(e):null}function qt(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=qt(e);if(null!==t)return t;e=e.sibling}return null}var Vt=se.unstable_scheduleCallback,Kt=se.unstable_cancelCallback,Gt=se.unstable_shouldYield,Xt=se.unstable_requestPaint,Yt=se.unstable_now,Qt=se.unstable_getCurrentPriorityLevel,Jt=se.unstable_ImmediatePriority,Zt=se.unstable_UserBlockingPriority,er=se.unstable_NormalPriority,tr=se.unstable_LowPriority,rr=se.unstable_IdlePriority,ir=null,sr=null;var nr=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(or(e)/ar|0)|0},or=Math.log,ar=Math.LN2;var lr=64,cr=4194304;function hr(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ur(e,t){var r=e.pendingLanes;if(0===r)return 0;var i=0,s=e.suspendedLanes,n=e.pingedLanes,o=268435455&r;if(0!==o){var a=o&~s;0!==a?i=hr(a):0!==(n&=o)&&(i=hr(n))}else 0!==(o=r&~s)?i=hr(o):0!==n&&(i=hr(n));if(0===i)return 0;if(0!==t&&t!==i&&0===(t&s)&&((s=i&-i)>=(n=t&-t)||16===s&&4194240&n))return t;if(4&i&&(i|=16&r),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=i;0<t;)s=1<<(r=31-nr(t)),i|=e[r],t&=~s;return i}function dr(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function fr(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function pr(){var e=lr;return!(4194240&(lr<<=1))&&(lr=64),e}function _r(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function vr(e,t,r){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-nr(t)]=r}function gr(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var i=31-nr(r),s=1<<i;s&t|e[i]&t&&(e[i]|=t),r&=~s}}var mr=0;function br(e){return 1<(e&=-e)?4<e?268435455&e?16:536870912:4:1}var yr,Sr,wr,Cr,xr,kr=!1,Er=[],Lr=null,Rr=null,Dr=null,Ar=new Map,Tr=new Map,Pr=[],Br="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Or(e,t){switch(e){case"focusin":case"focusout":Lr=null;break;case"dragenter":case"dragleave":Rr=null;break;case"mouseover":case"mouseout":Dr=null;break;case"pointerover":case"pointerout":Ar.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Tr.delete(t.pointerId)}}function Mr(e,t,r,i,s,n){return null===e||e.nativeEvent!==n?(e={blockedOn:t,domEventName:r,eventSystemFlags:i,nativeEvent:n,targetContainers:[s]},null!==t&&(null!==(t=mn(t))&&Sr(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,null!==s&&-1===t.indexOf(s)&&t.push(s),e)}function Nr(e){var t=gn(e.target);if(null!==t){var r=zt(t);if(null!==r)if(13===(t=r.tag)){if(null!==(t=Ut(r)))return e.blockedOn=t,void xr(e.priority,function(){wr(r)})}else if(3===t&&r.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===r.tag?r.stateNode.containerInfo:null)}e.blockedOn=null}function Ir(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var r=Gr(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==r)return null!==(t=mn(r))&&Sr(t),e.blockedOn=r,!1;var i=new(r=e.nativeEvent).constructor(r.type,r);bt=i,r.target.dispatchEvent(i),bt=null,t.shift()}return!0}function jr(e,t,r){Ir(e)&&r.delete(t)}function Hr(){kr=!1,null!==Lr&&Ir(Lr)&&(Lr=null),null!==Rr&&Ir(Rr)&&(Rr=null),null!==Dr&&Ir(Dr)&&(Dr=null),Ar.forEach(jr),Tr.forEach(jr)}function Fr(e,t){e.blockedOn===t&&(e.blockedOn=null,kr||(kr=!0,se.unstable_scheduleCallback(se.unstable_NormalPriority,Hr)))}function zr(e){function t(t){return Fr(t,e)}if(0<Er.length){Fr(Er[0],e);for(var r=1;r<Er.length;r++){var i=Er[r];i.blockedOn===e&&(i.blockedOn=null)}}for(null!==Lr&&Fr(Lr,e),null!==Rr&&Fr(Rr,e),null!==Dr&&Fr(Dr,e),Ar.forEach(t),Tr.forEach(t),r=0;r<Pr.length;r++)(i=Pr[r]).blockedOn===e&&(i.blockedOn=null);for(;0<Pr.length&&null===(r=Pr[0]).blockedOn;)Nr(r),null===r.blockedOn&&Pr.shift()}var Ur=ye.ReactCurrentBatchConfig,Wr=!0;function $r(e,t,r,i){var s=mr,n=Ur.transition;Ur.transition=null;try{mr=1,Vr(e,t,r,i)}finally{mr=s,Ur.transition=n}}function qr(e,t,r,i){var s=mr,n=Ur.transition;Ur.transition=null;try{mr=4,Vr(e,t,r,i)}finally{mr=s,Ur.transition=n}}function Vr(e,t,r,i){if(Wr){var s=Gr(e,t,r,i);if(null===s)Us(e,t,i,Kr,r),Or(e,i);else if(function(e,t,r,i,s){switch(t){case"focusin":return Lr=Mr(Lr,e,t,r,i,s),!0;case"dragenter":return Rr=Mr(Rr,e,t,r,i,s),!0;case"mouseover":return Dr=Mr(Dr,e,t,r,i,s),!0;case"pointerover":var n=s.pointerId;return Ar.set(n,Mr(Ar.get(n)||null,e,t,r,i,s)),!0;case"gotpointercapture":return n=s.pointerId,Tr.set(n,Mr(Tr.get(n)||null,e,t,r,i,s)),!0}return!1}(s,e,t,r,i))i.stopPropagation();else if(Or(e,i),4&t&&-1<Br.indexOf(e)){for(;null!==s;){var n=mn(s);if(null!==n&&yr(n),null===(n=Gr(e,t,r,i))&&Us(e,t,i,Kr,r),n===s)break;s=n}null!==s&&i.stopPropagation()}else Us(e,t,i,null,r)}}var Kr=null;function Gr(e,t,r,i){if(Kr=null,null!==(e=gn(e=yt(i))))if(null===(t=zt(e)))e=null;else if(13===(r=t.tag)){if(null!==(e=Ut(t)))return e;e=null}else if(3===r){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Kr=e,null}function Xr(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Qt()){case Jt:return 1;case Zt:return 4;case er:case tr:return 16;case rr:return 536870912;default:return 16}default:return 16}}var Yr=null,Qr=null,Jr=null;function Zr(){if(Jr)return Jr;var e,t,r=Qr,i=r.length,s="value"in Yr?Yr.value:Yr.textContent,n=s.length;for(e=0;e<i&&r[e]===s[e];e++);var o=i-e;for(t=1;t<=o&&r[i-t]===s[n-t];t++);return Jr=s.slice(e,1<t?1-t:void 0)}function ei(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function ti(){return!0}function ri(){return!1}function ii(e){function t(t,r,i,s,n){for(var o in this._reactName=t,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=n,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(s):s[o]);return this.isDefaultPrevented=(null!=s.defaultPrevented?s.defaultPrevented:!1===s.returnValue)?ti:ri,this.isPropagationStopped=ri,this}return Ie(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=ti)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=ti)},persist:function(){},isPersistent:ti}),t}var si,ni,oi,ai={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},li=ii(ai),ci=Ie({},ai,{view:0,detail:0}),hi=ii(ci),ui=Ie({},ci,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ci,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==oi&&(oi&&"mousemove"===e.type?(si=e.screenX-oi.screenX,ni=e.screenY-oi.screenY):ni=si=0,oi=e),si)},movementY:function(e){return"movementY"in e?e.movementY:ni}}),di=ii(ui),fi=ii(Ie({},ui,{dataTransfer:0})),pi=ii(Ie({},ci,{relatedTarget:0})),_i=ii(Ie({},ai,{animationName:0,elapsedTime:0,pseudoElement:0})),vi=Ie({},ai,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),gi=ii(vi),mi=ii(Ie({},ai,{data:0})),bi={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},yi={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Si={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function wi(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Si[e])&&!!t[e]}function Ci(){return wi}var xi=Ie({},ci,{key:function(e){if(e.key){var t=bi[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=ei(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?yi[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ci,charCode:function(e){return"keypress"===e.type?ei(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?ei(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),ki=ii(xi),Ei=ii(Ie({},ui,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Li=ii(Ie({},ci,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ci})),Ri=ii(Ie({},ai,{propertyName:0,elapsedTime:0,pseudoElement:0})),Di=Ie({},ui,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ai=ii(Di),Ti=[9,13,27,32],Pi=he&&"CompositionEvent"in window,Bi=null;he&&"documentMode"in document&&(Bi=document.documentMode);var Oi=he&&"TextEvent"in window&&!Bi,Mi=he&&(!Pi||Bi&&8<Bi&&11>=Bi),Ni=String.fromCharCode(32),Ii=!1;function ji(e,t){switch(e){case"keyup":return-1!==Ti.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Hi(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var Fi=!1;var zi={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ui(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!zi[e.type]:"textarea"===t}function Wi(e,t,r,i){kt(i),0<(t=$s(t,"onChange")).length&&(r=new li("onChange","change",null,r,i),e.push({event:r,listeners:t}))}var $i=null,qi=null;function Vi(e){Ns(e,0)}function Ki(e){if(Ke(bn(e)))return e}function Gi(e,t){if("change"===e)return t}var Xi=!1;if(he){var Yi;if(he){var Qi="oninput"in document;if(!Qi){var Ji=document.createElement("div");Ji.setAttribute("oninput","return;"),Qi="function"==typeof Ji.oninput}Yi=Qi}else Yi=!1;Xi=Yi&&(!document.documentMode||9<document.documentMode)}function Zi(){$i&&($i.detachEvent("onpropertychange",es),qi=$i=null)}function es(e){if("value"===e.propertyName&&Ki(qi)){var t=[];Wi(t,qi,e,yt(e)),At(Vi,t)}}function ts(e,t,r){"focusin"===e?(Zi(),qi=r,($i=t).attachEvent("onpropertychange",es)):"focusout"===e&&Zi()}function rs(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Ki(qi)}function is(e,t){if("click"===e)return Ki(t)}function ss(e,t){if("input"===e||"change"===e)return Ki(t)}var ns="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t};function os(e,t){if(ns(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var r=Object.keys(e),i=Object.keys(t);if(r.length!==i.length)return!1;for(i=0;i<r.length;i++){var s=r[i];if(!ue.call(t,s)||!ns(e[s],t[s]))return!1}return!0}function as(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ls(e,t){var r,i=as(e);for(e=0;i;){if(3===i.nodeType){if(r=e+i.textContent.length,e<=t&&r>=t)return{node:i,offset:t-e};e=r}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=as(i)}}function cs(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?cs(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hs(){for(var e=window,t=Ge();t instanceof e.HTMLIFrameElement;){try{var r="string"==typeof t.contentWindow.location.href}catch(kd){r=!1}if(!r)break;t=Ge((e=t.contentWindow).document)}return t}function us(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function ds(e){var t=hs(),r=e.focusedElem,i=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&cs(r.ownerDocument.documentElement,r)){if(null!==i&&us(r))if(t=i.start,void 0===(e=i.end)&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if((e=(t=r.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var s=r.textContent.length,n=Math.min(i.start,s);i=void 0===i.end?n:Math.min(i.end,s),!e.extend&&n>i&&(s=i,i=n,n=s),s=ls(r,n);var o=ls(r,i);s&&o&&(1!==e.rangeCount||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(s.node,s.offset),e.removeAllRanges(),n>i?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=r;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"==typeof r.focus&&r.focus(),r=0;r<t.length;r++)(e=t[r]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var fs=he&&"documentMode"in document&&11>=document.documentMode,ps=null,_s=null,vs=null,gs=!1;function ms(e,t,r){var i=r.window===r?r.document:9===r.nodeType?r:r.ownerDocument;gs||null==ps||ps!==Ge(i)||("selectionStart"in(i=ps)&&us(i)?i={start:i.selectionStart,end:i.selectionEnd}:i={anchorNode:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset},vs&&os(vs,i)||(vs=i,0<(i=$s(_s,"onSelect")).length&&(t=new li("onSelect","select",null,t,r),e.push({event:t,listeners:i}),t.target=ps)))}function bs(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var ys={animationend:bs("Animation","AnimationEnd"),animationiteration:bs("Animation","AnimationIteration"),animationstart:bs("Animation","AnimationStart"),transitionend:bs("Transition","TransitionEnd")},Ss={},ws={};function Cs(e){if(Ss[e])return Ss[e];if(!ys[e])return e;var t,r=ys[e];for(t in r)if(r.hasOwnProperty(t)&&t in ws)return Ss[e]=r[t];return e}he&&(ws=document.createElement("div").style,"AnimationEvent"in window||(delete ys.animationend.animation,delete ys.animationiteration.animation,delete ys.animationstart.animation),"TransitionEvent"in window||delete ys.transitionend.transition);var xs=Cs("animationend"),ks=Cs("animationiteration"),Es=Cs("animationstart"),Ls=Cs("transitionend"),Rs=new Map,Ds="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function As(e,t){Rs.set(e,t),le(t,[e])}for(var Ts=0;Ts<Ds.length;Ts++){var Ps=Ds[Ts];As(Ps.toLowerCase(),"on"+(Ps[0].toUpperCase()+Ps.slice(1)))}As(xs,"onAnimationEnd"),As(ks,"onAnimationIteration"),As(Es,"onAnimationStart"),As("dblclick","onDoubleClick"),As("focusin","onFocus"),As("focusout","onBlur"),As(Ls,"onTransitionEnd"),ce("onMouseEnter",["mouseout","mouseover"]),ce("onMouseLeave",["mouseout","mouseover"]),ce("onPointerEnter",["pointerout","pointerover"]),ce("onPointerLeave",["pointerout","pointerover"]),le("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),le("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),le("onBeforeInput",["compositionend","keypress","textInput","paste"]),le("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),le("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),le("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Bs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Os=new Set("cancel close invalid load scroll toggle".split(" ").concat(Bs));function Ms(e,t,r){var i=e.type||"unknown-event";e.currentTarget=r,function(e,t,r,i,s,n,o,a,l){if(Ft.apply(this,arguments),Mt){if(!Mt)throw Error(ne(198));var c=Nt;Mt=!1,Nt=null,It||(It=!0,jt=c)}}(i,t,void 0,e),e.currentTarget=null}function Ns(e,t){t=!!(4&t);for(var r=0;r<e.length;r++){var i=e[r],s=i.event;i=i.listeners;e:{var n=void 0;if(t)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==n&&s.isPropagationStopped())break e;Ms(s,a,c),n=l}else for(o=0;o<i.length;o++){if(l=(a=i[o]).instance,c=a.currentTarget,a=a.listener,l!==n&&s.isPropagationStopped())break e;Ms(s,a,c),n=l}}}if(It)throw e=jt,It=!1,jt=null,e}function Is(e,t){var r=t[pn];void 0===r&&(r=t[pn]=new Set);var i=e+"__bubble";r.has(i)||(zs(t,e,2,!1),r.add(i))}function js(e,t,r){var i=0;t&&(i|=4),zs(r,e,i,t)}var Hs="_reactListening"+Math.random().toString(36).slice(2);function Fs(e){if(!e[Hs]){e[Hs]=!0,oe.forEach(function(t){"selectionchange"!==t&&(Os.has(t)||js(t,!1,e),js(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Hs]||(t[Hs]=!0,js("selectionchange",!1,t))}}function zs(e,t,r,i){switch(Xr(t)){case 1:var s=$r;break;case 4:s=qr;break;default:s=Vr}r=s.bind(null,t,r,e),s=void 0,!Pt||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(s=!0),i?void 0!==s?e.addEventListener(t,r,{capture:!0,passive:s}):e.addEventListener(t,r,!0):void 0!==s?e.addEventListener(t,r,{passive:s}):e.addEventListener(t,r,!1)}function Us(e,t,r,i,s){var n=i;if(!(1&t||2&t||null===i))e:for(;;){if(null===i)return;var o=i.tag;if(3===o||4===o){var a=i.stateNode.containerInfo;if(a===s||8===a.nodeType&&a.parentNode===s)break;if(4===o)for(o=i.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===s||8===l.nodeType&&l.parentNode===s))return;o=o.return}for(;null!==a;){if(null===(o=gn(a)))return;if(5===(l=o.tag)||6===l){i=n=o;continue e}a=a.parentNode}}i=i.return}At(function(){var i=n,s=yt(r),o=[];e:{var a=Rs.get(e);if(void 0!==a){var l=li,c=e;switch(e){case"keypress":if(0===ei(r))break e;case"keydown":case"keyup":l=ki;break;case"focusin":c="focus",l=pi;break;case"focusout":c="blur",l=pi;break;case"beforeblur":case"afterblur":l=pi;break;case"click":if(2===r.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=di;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=fi;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Li;break;case xs:case ks:case Es:l=_i;break;case Ls:l=Ri;break;case"scroll":l=hi;break;case"wheel":l=Ai;break;case"copy":case"cut":case"paste":l=gi;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Ei}var h=!!(4&t),u=!h&&"scroll"===e,d=h?null!==a?a+"Capture":null:a;h=[];for(var f,p=i;null!==p;){var _=(f=p).stateNode;if(5===f.tag&&null!==_&&(f=_,null!==d&&(null!=(_=Tt(p,d))&&h.push(Ws(p,_,f)))),u)break;p=p.return}0<h.length&&(a=new l(a,c,null,r,s),o.push({event:a,listeners:h}))}}if(!(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||r===bt||!(c=r.relatedTarget||r.fromElement)||!gn(c)&&!c[fn])&&(l||a)&&(a=s.window===s?s:(a=s.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=i,null!==(c=(c=r.relatedTarget||r.toElement)?gn(c):null)&&(c!==(u=zt(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=i),l!==c)){if(h=di,_="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(h=Ei,_="onPointerLeave",d="onPointerEnter",p="pointer"),u=null==l?a:bn(l),f=null==c?a:bn(c),(a=new h(_,p+"leave",l,r,s)).target=u,a.relatedTarget=f,_=null,gn(s)===i&&((h=new h(d,p+"enter",c,r,s)).target=f,h.relatedTarget=u,_=h),u=_,l&&c)e:{for(d=c,p=0,f=h=l;f;f=qs(f))p++;for(f=0,_=d;_;_=qs(_))f++;for(;0<p-f;)h=qs(h),p--;for(;0<f-p;)d=qs(d),f--;for(;p--;){if(h===d||null!==d&&h===d.alternate)break e;h=qs(h),d=qs(d)}h=null}else h=null;null!==l&&Vs(o,a,l,h,!1),null!==c&&null!==u&&Vs(o,u,c,h,!0)}if("select"===(l=(a=i?bn(i):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var v=Gi;else if(Ui(a))if(Xi)v=ss;else{v=rs;var g=ts}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(v=is);switch(v&&(v=v(e,i))?Wi(o,v,r,s):(g&&g(e,a,i),"focusout"===e&&(g=a._wrapperState)&&g.controlled&&"number"===a.type&&et(a,"number",a.value)),g=i?bn(i):window,e){case"focusin":(Ui(g)||"true"===g.contentEditable)&&(ps=g,_s=i,vs=null);break;case"focusout":vs=_s=ps=null;break;case"mousedown":gs=!0;break;case"contextmenu":case"mouseup":case"dragend":gs=!1,ms(o,r,s);break;case"selectionchange":if(fs)break;case"keydown":case"keyup":ms(o,r,s)}var m;if(Pi)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Fi?ji(e,r)&&(b="onCompositionEnd"):"keydown"===e&&229===r.keyCode&&(b="onCompositionStart");b&&(Mi&&"ko"!==r.locale&&(Fi||"onCompositionStart"!==b?"onCompositionEnd"===b&&Fi&&(m=Zr()):(Qr="value"in(Yr=s)?Yr.value:Yr.textContent,Fi=!0)),0<(g=$s(i,b)).length&&(b=new mi(b,e,null,r,s),o.push({event:b,listeners:g}),m?b.data=m:null!==(m=Hi(r))&&(b.data=m))),(m=Oi?function(e,t){switch(e){case"compositionend":return Hi(t);case"keypress":return 32!==t.which?null:(Ii=!0,Ni);case"textInput":return(e=t.data)===Ni&&Ii?null:e;default:return null}}(e,r):function(e,t){if(Fi)return"compositionend"===e||!Pi&&ji(e,t)?(e=Zr(),Jr=Qr=Yr=null,Fi=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Mi&&"ko"!==t.locale?null:t.data}}(e,r))&&(0<(i=$s(i,"onBeforeInput")).length&&(s=new mi("onBeforeInput","beforeinput",null,r,s),o.push({event:s,listeners:i}),s.data=m))}Ns(o,t)})}function Ws(e,t,r){return{instance:e,listener:t,currentTarget:r}}function $s(e,t){for(var r=t+"Capture",i=[];null!==e;){var s=e,n=s.stateNode;5===s.tag&&null!==n&&(s=n,null!=(n=Tt(e,r))&&i.unshift(Ws(e,n,s)),null!=(n=Tt(e,t))&&i.push(Ws(e,n,s))),e=e.return}return i}function qs(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Vs(e,t,r,i,s){for(var n=t._reactName,o=[];null!==r&&r!==i;){var a=r,l=a.alternate,c=a.stateNode;if(null!==l&&l===i)break;5===a.tag&&null!==c&&(a=c,s?null!=(l=Tt(r,n))&&o.unshift(Ws(r,l,a)):s||null!=(l=Tt(r,n))&&o.push(Ws(r,l,a))),r=r.return}0!==o.length&&e.push({event:t,listeners:o})}var Ks=/\r\n?/g,Gs=/\u0000|\uFFFD/g;function Xs(e){return("string"==typeof e?e:""+e).replace(Ks,"\n").replace(Gs,"")}function Ys(e,t,r){if(t=Xs(t),Xs(e)!==t&&r)throw Error(ne(425))}function Qs(){}var Js=null,Zs=null;function en(e,t){return"textarea"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var tn="function"==typeof setTimeout?setTimeout:void 0,rn="function"==typeof clearTimeout?clearTimeout:void 0,sn="function"==typeof Promise?Promise:void 0,nn="function"==typeof queueMicrotask?queueMicrotask:void 0!==sn?function(e){return sn.resolve(null).then(e).catch(on)}:tn;function on(e){setTimeout(function(){throw e})}function an(e,t){var r=t,i=0;do{var s=r.nextSibling;if(e.removeChild(r),s&&8===s.nodeType)if("/$"===(r=s.data)){if(0===i)return e.removeChild(s),void zr(t);i--}else"$"!==r&&"$?"!==r&&"$!"!==r||i++;r=s}while(r);zr(t)}function ln(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function cn(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var r=e.data;if("$"===r||"$!"===r||"$?"===r){if(0===t)return e;t--}else"/$"===r&&t++}e=e.previousSibling}return null}var hn=Math.random().toString(36).slice(2),un="__reactFiber$"+hn,dn="__reactProps$"+hn,fn="__reactContainer$"+hn,pn="__reactEvents$"+hn,_n="__reactListeners$"+hn,vn="__reactHandles$"+hn;function gn(e){var t=e[un];if(t)return t;for(var r=e.parentNode;r;){if(t=r[fn]||r[un]){if(r=t.alternate,null!==t.child||null!==r&&null!==r.child)for(e=cn(e);null!==e;){if(r=e[un])return r;e=cn(e)}return t}r=(e=r).parentNode}return null}function mn(e){return!(e=e[un]||e[fn])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bn(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(ne(33))}function yn(e){return e[dn]||null}var Sn=[],wn=-1;function Cn(e){return{current:e}}function xn(e){0>wn||(e.current=Sn[wn],Sn[wn]=null,wn--)}function kn(e,t){wn++,Sn[wn]=e.current,e.current=t}var En={},Ln=Cn(En),Rn=Cn(!1),Dn=En;function An(e,t){var r=e.type.contextTypes;if(!r)return En;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var s,n={};for(s in r)n[s]=t[s];return i&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=n),n}function Tn(e){return null!=(e=e.childContextTypes)}function Pn(){xn(Rn),xn(Ln)}function Bn(e,t,r){if(Ln.current!==En)throw Error(ne(168));kn(Ln,t),kn(Rn,r)}function On(e,t,r){var i=e.stateNode;if(t=t.childContextTypes,"function"!=typeof i.getChildContext)return r;for(var s in i=i.getChildContext())if(!(s in t))throw Error(ne(108,We(e)||"Unknown",s));return Ie({},r,i)}function Mn(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||En,Dn=Ln.current,kn(Ln,e),kn(Rn,Rn.current),!0}function Nn(e,t,r){var i=e.stateNode;if(!i)throw Error(ne(169));r?(e=On(e,t,Dn),i.__reactInternalMemoizedMergedChildContext=e,xn(Rn),xn(Ln),kn(Ln,e)):xn(Rn),kn(Rn,r)}var In=null,jn=!1,Hn=!1;function Fn(e){null===In?In=[e]:In.push(e)}function zn(){if(!Hn&&null!==In){Hn=!0;var e=0,t=mr;try{var r=In;for(mr=1;e<r.length;e++){var i=r[e];do{i=i(!0)}while(null!==i)}In=null,jn=!1}catch(Rd){throw null!==In&&(In=In.slice(e+1)),Vt(Jt,zn),Rd}finally{mr=t,Hn=!1}}return null}var Un=[],Wn=0,$n=null,qn=0,Vn=[],Kn=0,Gn=null,Xn=1,Yn="";function Qn(e,t){Un[Wn++]=qn,Un[Wn++]=$n,$n=e,qn=t}function Jn(e,t,r){Vn[Kn++]=Xn,Vn[Kn++]=Yn,Vn[Kn++]=Gn,Gn=e;var i=Xn;e=Yn;var s=32-nr(i)-1;i&=~(1<<s),r+=1;var n=32-nr(t)+s;if(30<n){var o=s-s%5;n=(i&(1<<o)-1).toString(32),i>>=o,s-=o,Xn=1<<32-nr(t)+s|r<<s|i,Yn=n+e}else Xn=1<<n|r<<s|i,Yn=e}function Zn(e){null!==e.return&&(Qn(e,1),Jn(e,1,0))}function eo(e){for(;e===$n;)$n=Un[--Wn],Un[Wn]=null,qn=Un[--Wn],Un[Wn]=null;for(;e===Gn;)Gn=Vn[--Kn],Vn[Kn]=null,Yn=Vn[--Kn],Vn[Kn]=null,Xn=Vn[--Kn],Vn[Kn]=null}var to=null,ro=null,io=!1,so=null;function no(e,t){var r=Ah(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,null===(t=e.deletions)?(e.deletions=[r],e.flags|=16):t.push(r)}function oo(e,t){switch(e.tag){case 5:var r=e.type;return null!==(t=1!==t.nodeType||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,to=e,ro=ln(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,to=e,ro=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(r=null!==Gn?{id:Xn,overflow:Yn}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},(r=Ah(18,null,null,0)).stateNode=t,r.return=e,e.child=r,to=e,ro=null,!0);default:return!1}}function ao(e){return!(!(1&e.mode)||128&e.flags)}function lo(e){if(io){var t=ro;if(t){var r=t;if(!oo(e,t)){if(ao(e))throw Error(ne(418));t=ln(r.nextSibling);var i=to;t&&oo(e,t)?no(i,r):(e.flags=-4097&e.flags|2,io=!1,to=e)}}else{if(ao(e))throw Error(ne(418));e.flags=-4097&e.flags|2,io=!1,to=e}}}function co(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;to=e}function ho(e){if(e!==to)return!1;if(!io)return co(e),io=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!en(e.type,e.memoizedProps)),t&&(t=ro)){if(ao(e))throw uo(),Error(ne(418));for(;t;)no(e,t),t=ln(t.nextSibling)}if(co(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(ne(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var r=e.data;if("/$"===r){if(0===t){ro=ln(e.nextSibling);break e}t--}else"$"!==r&&"$!"!==r&&"$?"!==r||t++}e=e.nextSibling}ro=null}}else ro=to?ln(e.stateNode.nextSibling):null;return!0}function uo(){for(var e=ro;e;)e=ln(e.nextSibling)}function fo(){ro=to=null,io=!1}function po(e){null===so?so=[e]:so.push(e)}var _o=ye.ReactCurrentBatchConfig;function vo(e,t,r){if(null!==(e=r.ref)&&"function"!=typeof e&&"object"!=typeof e){if(r._owner){if(r=r._owner){if(1!==r.tag)throw Error(ne(309));var i=r.stateNode}if(!i)throw Error(ne(147,e));var s=i,n=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===n?t.ref:(t=function(e){var t=s.refs;null===e?delete t[n]:t[n]=e},t._stringRef=n,t)}if("string"!=typeof e)throw Error(ne(284));if(!r._owner)throw Error(ne(290,e))}return e}function go(e,t){throw e=Object.prototype.toString.call(t),Error(ne(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function mo(e){return(0,e._init)(e._payload)}function bo(e){function t(t,r){if(e){var i=t.deletions;null===i?(t.deletions=[r],t.flags|=16):i.push(r)}}function r(r,i){if(!e)return null;for(;null!==i;)t(r,i),i=i.sibling;return null}function i(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function s(e,t){return(e=Ph(e,t)).index=0,e.sibling=null,e}function n(t,r,i){return t.index=i,e?null!==(i=t.alternate)?(i=i.index)<r?(t.flags|=2,r):i:(t.flags|=2,r):(t.flags|=1048576,r)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function a(e,t,r,i){return null===t||6!==t.tag?((t=Nh(r,e.mode,i)).return=e,t):((t=s(t,r)).return=e,t)}function l(e,t,r,i){var n=r.type;return n===Ce?h(e,t,r.props.children,i,r.key):null!==t&&(t.elementType===n||"object"==typeof n&&null!==n&&n.$$typeof===Pe&&mo(n)===t.type)?((i=s(t,r.props)).ref=vo(e,t,r),i.return=e,i):((i=Bh(r.type,r.key,r.props,null,e.mode,i)).ref=vo(e,t,r),i.return=e,i)}function c(e,t,r,i){return null===t||4!==t.tag||t.stateNode.containerInfo!==r.containerInfo||t.stateNode.implementation!==r.implementation?((t=Ih(r,e.mode,i)).return=e,t):((t=s(t,r.children||[])).return=e,t)}function h(e,t,r,i,n){return null===t||7!==t.tag?((t=Oh(r,e.mode,i,n)).return=e,t):((t=s(t,r)).return=e,t)}function u(e,t,r){if("string"==typeof t&&""!==t||"number"==typeof t)return(t=Nh(""+t,e.mode,r)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case Se:return(r=Bh(t.type,t.key,t.props,null,e.mode,r)).ref=vo(e,null,t),r.return=e,r;case we:return(t=Ih(t,e.mode,r)).return=e,t;case Pe:return u(e,(0,t._init)(t._payload),r)}if(tt(t)||Me(t))return(t=Oh(t,e.mode,r,null)).return=e,t;go(e,t)}return null}function d(e,t,r,i){var s=null!==t?t.key:null;if("string"==typeof r&&""!==r||"number"==typeof r)return null!==s?null:a(e,t,""+r,i);if("object"==typeof r&&null!==r){switch(r.$$typeof){case Se:return r.key===s?l(e,t,r,i):null;case we:return r.key===s?c(e,t,r,i):null;case Pe:return d(e,t,(s=r._init)(r._payload),i)}if(tt(r)||Me(r))return null!==s?null:h(e,t,r,i,null);go(e,r)}return null}function f(e,t,r,i,s){if("string"==typeof i&&""!==i||"number"==typeof i)return a(t,e=e.get(r)||null,""+i,s);if("object"==typeof i&&null!==i){switch(i.$$typeof){case Se:return l(t,e=e.get(null===i.key?r:i.key)||null,i,s);case we:return c(t,e=e.get(null===i.key?r:i.key)||null,i,s);case Pe:return f(e,t,r,(0,i._init)(i._payload),s)}if(tt(i)||Me(i))return h(t,e=e.get(r)||null,i,s,null);go(t,i)}return null}function p(s,o,a,l){for(var c=null,h=null,p=o,_=o=0,v=null;null!==p&&_<a.length;_++){p.index>_?(v=p,p=null):v=p.sibling;var g=d(s,p,a[_],l);if(null===g){null===p&&(p=v);break}e&&p&&null===g.alternate&&t(s,p),o=n(g,o,_),null===h?c=g:h.sibling=g,h=g,p=v}if(_===a.length)return r(s,p),io&&Qn(s,_),c;if(null===p){for(;_<a.length;_++)null!==(p=u(s,a[_],l))&&(o=n(p,o,_),null===h?c=p:h.sibling=p,h=p);return io&&Qn(s,_),c}for(p=i(s,p);_<a.length;_++)null!==(v=f(p,s,_,a[_],l))&&(e&&null!==v.alternate&&p.delete(null===v.key?_:v.key),o=n(v,o,_),null===h?c=v:h.sibling=v,h=v);return e&&p.forEach(function(e){return t(s,e)}),io&&Qn(s,_),c}function _(s,o,a,l){var c=Me(a);if("function"!=typeof c)throw Error(ne(150));if(null==(a=c.call(a)))throw Error(ne(151));for(var h=c=null,p=o,_=o=0,v=null,g=a.next();null!==p&&!g.done;_++,g=a.next()){p.index>_?(v=p,p=null):v=p.sibling;var m=d(s,p,g.value,l);if(null===m){null===p&&(p=v);break}e&&p&&null===m.alternate&&t(s,p),o=n(m,o,_),null===h?c=m:h.sibling=m,h=m,p=v}if(g.done)return r(s,p),io&&Qn(s,_),c;if(null===p){for(;!g.done;_++,g=a.next())null!==(g=u(s,g.value,l))&&(o=n(g,o,_),null===h?c=g:h.sibling=g,h=g);return io&&Qn(s,_),c}for(p=i(s,p);!g.done;_++,g=a.next())null!==(g=f(p,s,_,g.value,l))&&(e&&null!==g.alternate&&p.delete(null===g.key?_:g.key),o=n(g,o,_),null===h?c=g:h.sibling=g,h=g);return e&&p.forEach(function(e){return t(s,e)}),io&&Qn(s,_),c}return function e(i,n,a,l){if("object"==typeof a&&null!==a&&a.type===Ce&&null===a.key&&(a=a.props.children),"object"==typeof a&&null!==a){switch(a.$$typeof){case Se:e:{for(var c=a.key,h=n;null!==h;){if(h.key===c){if((c=a.type)===Ce){if(7===h.tag){r(i,h.sibling),(n=s(h,a.props.children)).return=i,i=n;break e}}else if(h.elementType===c||"object"==typeof c&&null!==c&&c.$$typeof===Pe&&mo(c)===h.type){r(i,h.sibling),(n=s(h,a.props)).ref=vo(i,h,a),n.return=i,i=n;break e}r(i,h);break}t(i,h),h=h.sibling}a.type===Ce?((n=Oh(a.props.children,i.mode,l,a.key)).return=i,i=n):((l=Bh(a.type,a.key,a.props,null,i.mode,l)).ref=vo(i,n,a),l.return=i,i=l)}return o(i);case we:e:{for(h=a.key;null!==n;){if(n.key===h){if(4===n.tag&&n.stateNode.containerInfo===a.containerInfo&&n.stateNode.implementation===a.implementation){r(i,n.sibling),(n=s(n,a.children||[])).return=i,i=n;break e}r(i,n);break}t(i,n),n=n.sibling}(n=Ih(a,i.mode,l)).return=i,i=n}return o(i);case Pe:return e(i,n,(h=a._init)(a._payload),l)}if(tt(a))return p(i,n,a,l);if(Me(a))return _(i,n,a,l);go(i,a)}return"string"==typeof a&&""!==a||"number"==typeof a?(a=""+a,null!==n&&6===n.tag?(r(i,n.sibling),(n=s(n,a)).return=i,i=n):(r(i,n),(n=Nh(a,i.mode,l)).return=i,i=n),o(i)):r(i,n)}}var yo=bo(!0),So=bo(!1),wo=Cn(null),Co=null,xo=null,ko=null;function Eo(){ko=xo=Co=null}function Lo(e){var t=wo.current;xn(wo),e._currentValue=t}function Ro(e,t,r){for(;null!==e;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==i&&(i.childLanes|=t)):null!==i&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===r)break;e=e.return}}function Do(e,t){Co=e,ko=xo=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(ml=!0),e.firstContext=null)}function Ao(e){var t=e._currentValue;if(ko!==e)if(e={context:e,memoizedValue:t,next:null},null===xo){if(null===Co)throw Error(ne(308));xo=e,Co.dependencies={lanes:0,firstContext:e}}else xo=xo.next=e;return t}var To=null;function Po(e){null===To?To=[e]:To.push(e)}function Bo(e,t,r,i){var s=t.interleaved;return null===s?(r.next=r,Po(t)):(r.next=s.next,s.next=r),t.interleaved=r,Oo(e,i)}function Oo(e,t){e.lanes|=t;var r=e.alternate;for(null!==r&&(r.lanes|=t),r=e,e=e.return;null!==e;)e.childLanes|=t,null!==(r=e.alternate)&&(r.childLanes|=t),r=e,e=e.return;return 3===r.tag?r.stateNode:null}var Mo=!1;function No(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Io(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function jo(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ho(e,t,r){var i=e.updateQueue;if(null===i)return null;if(i=i.shared,2&Lc){var s=i.pending;return null===s?t.next=t:(t.next=s.next,s.next=t),i.pending=t,Oo(e,r)}return null===(s=i.interleaved)?(t.next=t,Po(i)):(t.next=s.next,s.next=t),i.interleaved=t,Oo(e,r)}function Fo(e,t,r){if(null!==(t=t.updateQueue)&&(t=t.shared,4194240&r)){var i=t.lanes;r|=i&=e.pendingLanes,t.lanes=r,gr(e,r)}}function zo(e,t){var r=e.updateQueue,i=e.alternate;if(null!==i&&r===(i=i.updateQueue)){var s=null,n=null;if(null!==(r=r.firstBaseUpdate)){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};null===n?s=n=o:n=n.next=o,r=r.next}while(null!==r);null===n?s=n=t:n=n.next=t}else s=n=t;return r={baseState:i.baseState,firstBaseUpdate:s,lastBaseUpdate:n,shared:i.shared,effects:i.effects},void(e.updateQueue=r)}null===(e=r.lastBaseUpdate)?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Uo(e,t,r,i){var s=e.updateQueue;Mo=!1;var n=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(null!==a){s.shared.pending=null;var l=a,c=l.next;l.next=null,null===o?n=c:o.next=c,o=l;var h=e.alternate;null!==h&&((a=(h=h.updateQueue).lastBaseUpdate)!==o&&(null===a?h.firstBaseUpdate=c:a.next=c,h.lastBaseUpdate=l))}if(null!==n){var u=s.baseState;for(o=0,h=c=l=null,a=n;;){var d=a.lane,f=a.eventTime;if((i&d)===d){null!==h&&(h=h.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,_=a;switch(d=t,f=r,_.tag){case 1:if("function"==typeof(p=_.payload)){u=p.call(f,u,d);break e}u=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null==(d="function"==typeof(p=_.payload)?p.call(f,u,d):p))break e;u=Ie({},u,d);break e;case 2:Mo=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(d=s.effects)?s.effects=[a]:d.push(a))}else f={eventTime:f,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===h?(c=h=f,l=u):h=h.next=f,o|=d;if(null===(a=a.next)){if(null===(a=s.shared.pending))break;a=(d=a).next,d.next=null,s.lastBaseUpdate=d,s.shared.pending=null}}if(null===h&&(l=u),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=h,null!==(t=s.shared.interleaved)){s=t;do{o|=s.lane,s=s.next}while(s!==t)}else null===n&&(s.shared.lanes=0);Mc|=o,e.lanes=o,e.memoizedState=u}}function Wo(e,t,r){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var i=e[t],s=i.callback;if(null!==s){if(i.callback=null,i=r,"function"!=typeof s)throw Error(ne(191,s));s.call(i)}}}var $o={},qo=Cn($o),Vo=Cn($o),Ko=Cn($o);function Go(e){if(e===$o)throw Error(ne(174));return e}function Xo(e,t){switch(kn(Ko,t),kn(Vo,e),kn(qo,$o),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:lt(null,"");break;default:t=lt(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}xn(qo),kn(qo,t)}function Yo(){xn(qo),xn(Vo),xn(Ko)}function Qo(e){Go(Ko.current);var t=Go(qo.current),r=lt(t,e.type);t!==r&&(kn(Vo,e),kn(qo,r))}function Jo(e){Vo.current===e&&(xn(qo),xn(Vo))}var Zo=Cn(0);function ea(e){for(var t=e;null!==t;){if(13===t.tag){var r=t.memoizedState;if(null!==r&&(null===(r=r.dehydrated)||"$?"===r.data||"$!"===r.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(128&t.flags)return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ta=[];function ra(){for(var e=0;e<ta.length;e++)ta[e]._workInProgressVersionPrimary=null;ta.length=0}var ia=ye.ReactCurrentDispatcher,sa=ye.ReactCurrentBatchConfig,na=0,oa=null,aa=null,la=null,ca=!1,ha=!1,ua=0,da=0;function fa(){throw Error(ne(321))}function pa(e,t){if(null===t)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!ns(e[r],t[r]))return!1;return!0}function _a(e,t,r,i,s,n){if(na=n,oa=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ia.current=null===e||null===e.memoizedState?Ja:Za,e=r(i,s),ha){n=0;do{if(ha=!1,ua=0,25<=n)throw Error(ne(301));n+=1,la=aa=null,t.updateQueue=null,ia.current=el,e=r(i,s)}while(ha)}if(ia.current=Qa,t=null!==aa&&null!==aa.next,na=0,la=aa=oa=null,ca=!1,t)throw Error(ne(300));return e}function va(){var e=0!==ua;return ua=0,e}function ga(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===la?oa.memoizedState=la=e:la=la.next=e,la}function ma(){if(null===aa){var e=oa.alternate;e=null!==e?e.memoizedState:null}else e=aa.next;var t=null===la?oa.memoizedState:la.next;if(null!==t)la=t,aa=e;else{if(null===e)throw Error(ne(310));e={memoizedState:(aa=e).memoizedState,baseState:aa.baseState,baseQueue:aa.baseQueue,queue:aa.queue,next:null},null===la?oa.memoizedState=la=e:la=la.next=e}return la}function ba(e,t){return"function"==typeof t?t(e):t}function ya(e){var t=ma(),r=t.queue;if(null===r)throw Error(ne(311));r.lastRenderedReducer=e;var i=aa,s=i.baseQueue,n=r.pending;if(null!==n){if(null!==s){var o=s.next;s.next=n.next,n.next=o}i.baseQueue=s=n,r.pending=null}if(null!==s){n=s.next,i=i.baseState;var a=o=null,l=null,c=n;do{var h=c.lane;if((na&h)===h)null!==l&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),i=c.hasEagerState?c.eagerState:e(i,c.action);else{var u={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===l?(a=l=u,o=i):l=l.next=u,oa.lanes|=h,Mc|=h}c=c.next}while(null!==c&&c!==n);null===l?o=i:l.next=a,ns(i,t.memoizedState)||(ml=!0),t.memoizedState=i,t.baseState=o,t.baseQueue=l,r.lastRenderedState=i}if(null!==(e=r.interleaved)){s=e;do{n=s.lane,oa.lanes|=n,Mc|=n,s=s.next}while(s!==e)}else null===s&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Sa(e){var t=ma(),r=t.queue;if(null===r)throw Error(ne(311));r.lastRenderedReducer=e;var i=r.dispatch,s=r.pending,n=t.memoizedState;if(null!==s){r.pending=null;var o=s=s.next;do{n=e(n,o.action),o=o.next}while(o!==s);ns(n,t.memoizedState)||(ml=!0),t.memoizedState=n,null===t.baseQueue&&(t.baseState=n),r.lastRenderedState=n}return[n,i]}function wa(){}function Ca(e,t){var r=oa,i=ma(),s=t(),n=!ns(i.memoizedState,s);if(n&&(i.memoizedState=s,ml=!0),i=i.queue,Ma(Ea.bind(null,r,i,e),[e]),i.getSnapshot!==t||n||null!==la&&1&la.memoizedState.tag){if(r.flags|=2048,Aa(9,ka.bind(null,r,i,s,t),void 0,null),null===Rc)throw Error(ne(349));30&na||xa(r,t,s)}return s}function xa(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},null===(t=oa.updateQueue)?(t={lastEffect:null,stores:null},oa.updateQueue=t,t.stores=[e]):null===(r=t.stores)?t.stores=[e]:r.push(e)}function ka(e,t,r,i){t.value=r,t.getSnapshot=i,La(t)&&Ra(e)}function Ea(e,t,r){return r(function(){La(t)&&Ra(e)})}function La(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!ns(e,r)}catch(kd){return!0}}function Ra(e){var t=Oo(e,1);null!==t&&th(t,e,1,-1)}function Da(e){var t=ga();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ba,lastRenderedState:e},t.queue=e,e=e.dispatch=Ka.bind(null,oa,e),[t.memoizedState,e]}function Aa(e,t,r,i){return e={tag:e,create:t,destroy:r,deps:i,next:null},null===(t=oa.updateQueue)?(t={lastEffect:null,stores:null},oa.updateQueue=t,t.lastEffect=e.next=e):null===(r=t.lastEffect)?t.lastEffect=e.next=e:(i=r.next,r.next=e,e.next=i,t.lastEffect=e),e}function Ta(){return ma().memoizedState}function Pa(e,t,r,i){var s=ga();oa.flags|=e,s.memoizedState=Aa(1|t,r,void 0,void 0===i?null:i)}function Ba(e,t,r,i){var s=ma();i=void 0===i?null:i;var n=void 0;if(null!==aa){var o=aa.memoizedState;if(n=o.destroy,null!==i&&pa(i,o.deps))return void(s.memoizedState=Aa(t,r,n,i))}oa.flags|=e,s.memoizedState=Aa(1|t,r,n,i)}function Oa(e,t){return Pa(8390656,8,e,t)}function Ma(e,t){return Ba(2048,8,e,t)}function Na(e,t){return Ba(4,2,e,t)}function Ia(e,t){return Ba(4,4,e,t)}function ja(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Ha(e,t,r){return r=null!=r?r.concat([e]):null,Ba(4,4,ja.bind(null,t,e),r)}function Fa(){}function za(e,t){var r=ma();t=void 0===t?null:t;var i=r.memoizedState;return null!==i&&null!==t&&pa(t,i[1])?i[0]:(r.memoizedState=[e,t],e)}function Ua(e,t){var r=ma();t=void 0===t?null:t;var i=r.memoizedState;return null!==i&&null!==t&&pa(t,i[1])?i[0]:(e=e(),r.memoizedState=[e,t],e)}function Wa(e,t,r){return 21&na?(ns(r,t)||(r=pr(),oa.lanes|=r,Mc|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,ml=!0),e.memoizedState=r)}function $a(e,t){var r=mr;mr=0!==r&&4>r?r:4,e(!0);var i=sa.transition;sa.transition={};try{e(!1),t()}finally{mr=r,sa.transition=i}}function qa(){return ma().memoizedState}function Va(e,t,r){var i=eh(e);if(r={lane:i,action:r,hasEagerState:!1,eagerState:null,next:null},Ga(e))Xa(t,r);else if(null!==(r=Bo(e,t,r,i))){th(r,e,i,Zc()),Ya(r,t,i)}}function Ka(e,t,r){var i=eh(e),s={lane:i,action:r,hasEagerState:!1,eagerState:null,next:null};if(Ga(e))Xa(t,s);else{var n=e.alternate;if(0===e.lanes&&(null===n||0===n.lanes)&&null!==(n=t.lastRenderedReducer))try{var o=t.lastRenderedState,a=n(o,r);if(s.hasEagerState=!0,s.eagerState=a,ns(a,o)){var l=t.interleaved;return null===l?(s.next=s,Po(t)):(s.next=l.next,l.next=s),void(t.interleaved=s)}}catch(Ad){}null!==(r=Bo(e,t,s,i))&&(th(r,e,i,s=Zc()),Ya(r,t,i))}}function Ga(e){var t=e.alternate;return e===oa||null!==t&&t===oa}function Xa(e,t){ha=ca=!0;var r=e.pending;null===r?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function Ya(e,t,r){if(4194240&r){var i=t.lanes;r|=i&=e.pendingLanes,t.lanes=r,gr(e,r)}}var Qa={readContext:Ao,useCallback:fa,useContext:fa,useEffect:fa,useImperativeHandle:fa,useInsertionEffect:fa,useLayoutEffect:fa,useMemo:fa,useReducer:fa,useRef:fa,useState:fa,useDebugValue:fa,useDeferredValue:fa,useTransition:fa,useMutableSource:fa,useSyncExternalStore:fa,useId:fa,unstable_isNewReconciler:!1},Ja={readContext:Ao,useCallback:function(e,t){return ga().memoizedState=[e,void 0===t?null:t],e},useContext:Ao,useEffect:Oa,useImperativeHandle:function(e,t,r){return r=null!=r?r.concat([e]):null,Pa(4194308,4,ja.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Pa(4194308,4,e,t)},useInsertionEffect:function(e,t){return Pa(4,2,e,t)},useMemo:function(e,t){var r=ga();return t=void 0===t?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var i=ga();return t=void 0!==r?r(t):t,i.memoizedState=i.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},i.queue=e,e=e.dispatch=Va.bind(null,oa,e),[i.memoizedState,e]},useRef:function(e){return e={current:e},ga().memoizedState=e},useState:Da,useDebugValue:Fa,useDeferredValue:function(e){return ga().memoizedState=e},useTransition:function(){var e=Da(!1),t=e[0];return e=$a.bind(null,e[1]),ga().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var i=oa,s=ga();if(io){if(void 0===r)throw Error(ne(407));r=r()}else{if(r=t(),null===Rc)throw Error(ne(349));30&na||xa(i,t,r)}s.memoizedState=r;var n={value:r,getSnapshot:t};return s.queue=n,Oa(Ea.bind(null,i,n,e),[e]),i.flags|=2048,Aa(9,ka.bind(null,i,n,r,t),void 0,null),r},useId:function(){var e=ga(),t=Rc.identifierPrefix;if(io){var r=Yn;t=":"+t+"R"+(r=(Xn&~(1<<32-nr(Xn)-1)).toString(32)+r),0<(r=ua++)&&(t+="H"+r.toString(32)),t+=":"}else t=":"+t+"r"+(r=da++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Za={readContext:Ao,useCallback:za,useContext:Ao,useEffect:Ma,useImperativeHandle:Ha,useInsertionEffect:Na,useLayoutEffect:Ia,useMemo:Ua,useReducer:ya,useRef:Ta,useState:function(){return ya(ba)},useDebugValue:Fa,useDeferredValue:function(e){return Wa(ma(),aa.memoizedState,e)},useTransition:function(){return[ya(ba)[0],ma().memoizedState]},useMutableSource:wa,useSyncExternalStore:Ca,useId:qa,unstable_isNewReconciler:!1},el={readContext:Ao,useCallback:za,useContext:Ao,useEffect:Ma,useImperativeHandle:Ha,useInsertionEffect:Na,useLayoutEffect:Ia,useMemo:Ua,useReducer:Sa,useRef:Ta,useState:function(){return Sa(ba)},useDebugValue:Fa,useDeferredValue:function(e){var t=ma();return null===aa?t.memoizedState=e:Wa(t,aa.memoizedState,e)},useTransition:function(){return[Sa(ba)[0],ma().memoizedState]},useMutableSource:wa,useSyncExternalStore:Ca,useId:qa,unstable_isNewReconciler:!1};function tl(e,t){if(e&&e.defaultProps){for(var r in t=Ie({},t),e=e.defaultProps)void 0===t[r]&&(t[r]=e[r]);return t}return t}function rl(e,t,r,i){r=null==(r=r(i,t=e.memoizedState))?t:Ie({},t,r),e.memoizedState=r,0===e.lanes&&(e.updateQueue.baseState=r)}var il={isMounted:function(e){return!!(e=e._reactInternals)&&zt(e)===e},enqueueSetState:function(e,t,r){e=e._reactInternals;var i=Zc(),s=eh(e),n=jo(i,s);n.payload=t,null!=r&&(n.callback=r),null!==(t=Ho(e,n,s))&&(th(t,e,s,i),Fo(t,e,s))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var i=Zc(),s=eh(e),n=jo(i,s);n.tag=1,n.payload=t,null!=r&&(n.callback=r),null!==(t=Ho(e,n,s))&&(th(t,e,s,i),Fo(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Zc(),i=eh(e),s=jo(r,i);s.tag=2,null!=t&&(s.callback=t),null!==(t=Ho(e,s,i))&&(th(t,e,i,r),Fo(t,e,i))}};function sl(e,t,r,i,s,n,o){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(i,n,o):!t.prototype||!t.prototype.isPureReactComponent||(!os(r,i)||!os(s,n))}function nl(e,t,r){var i=!1,s=En,n=t.contextType;return"object"==typeof n&&null!==n?n=Ao(n):(s=Tn(t)?Dn:Ln.current,n=(i=null!=(i=t.contextTypes))?An(e,s):En),t=new t(r,n),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=il,e.stateNode=t,t._reactInternals=e,i&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=n),t}function ol(e,t,r,i){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(r,i),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(r,i),t.state!==e&&il.enqueueReplaceState(t,t.state,null)}function al(e,t,r,i){var s=e.stateNode;s.props=r,s.state=e.memoizedState,s.refs={},No(e);var n=t.contextType;"object"==typeof n&&null!==n?s.context=Ao(n):(n=Tn(t)?Dn:Ln.current,s.context=An(e,n)),s.state=e.memoizedState,"function"==typeof(n=t.getDerivedStateFromProps)&&(rl(e,t,n,r),s.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof s.getSnapshotBeforeUpdate||"function"!=typeof s.UNSAFE_componentWillMount&&"function"!=typeof s.componentWillMount||(t=s.state,"function"==typeof s.componentWillMount&&s.componentWillMount(),"function"==typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount(),t!==s.state&&il.enqueueReplaceState(s,s.state,null),Uo(e,r,s,i),s.state=e.memoizedState),"function"==typeof s.componentDidMount&&(e.flags|=4194308)}function ll(e,t){try{var r="",i=t;do{r+=ze(i),i=i.return}while(i);var s=r}catch(Kd){s="\nError generating stack: "+Kd.message+"\n"+Kd.stack}return{value:e,source:t,stack:s,digest:null}}function cl(e,t,r){return{value:e,source:null,stack:null!=r?r:null,digest:null!=t?t:null}}function hl(e,t){try{console.error(t.value)}catch(Od){setTimeout(function(){throw Od})}}var ul="function"==typeof WeakMap?WeakMap:Map;function dl(e,t,r){(r=jo(-1,r)).tag=3,r.payload={element:null};var i=t.value;return r.callback=function(){Wc||(Wc=!0,$c=i),hl(0,t)},r}function fl(e,t,r){(r=jo(-1,r)).tag=3;var i=e.type.getDerivedStateFromError;if("function"==typeof i){var s=t.value;r.payload=function(){return i(s)},r.callback=function(){hl(0,t)}}var n=e.stateNode;return null!==n&&"function"==typeof n.componentDidCatch&&(r.callback=function(){hl(0,t),"function"!=typeof i&&(null===qc?qc=new Set([this]):qc.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),r}function pl(e,t,r){var i=e.pingCache;if(null===i){i=e.pingCache=new ul;var s=new Set;i.set(t,s)}else void 0===(s=i.get(t))&&(s=new Set,i.set(t,s));s.has(r)||(s.add(r),e=xh.bind(null,e,t,r),t.then(e,e))}function _l(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function vl(e,t,r,i,s){return 1&e.mode?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,1===r.tag&&(null===r.alternate?r.tag=17:((t=jo(-1,1)).tag=2,Ho(r,t,1))),r.lanes|=1),e)}var gl=ye.ReactCurrentOwner,ml=!1;function bl(e,t,r,i){t.child=null===e?So(t,null,r,i):yo(t,e.child,r,i)}function yl(e,t,r,i,s){r=r.render;var n=t.ref;return Do(t,s),i=_a(e,t,r,i,n,s),r=va(),null===e||ml?(io&&r&&Zn(t),t.flags|=1,bl(e,t,i,s),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Wl(e,t,s))}function Sl(e,t,r,i,s){if(null===e){var n=r.type;return"function"!=typeof n||Th(n)||void 0!==n.defaultProps||null!==r.compare||void 0!==r.defaultProps?((e=Bh(r.type,null,i,t,t.mode,s)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=n,wl(e,t,n,i,s))}if(n=e.child,0===(e.lanes&s)){var o=n.memoizedProps;if((r=null!==(r=r.compare)?r:os)(o,i)&&e.ref===t.ref)return Wl(e,t,s)}return t.flags|=1,(e=Ph(n,i)).ref=t.ref,e.return=t,t.child=e}function wl(e,t,r,i,s){if(null!==e){var n=e.memoizedProps;if(os(n,i)&&e.ref===t.ref){if(ml=!1,t.pendingProps=i=n,0===(e.lanes&s))return t.lanes=e.lanes,Wl(e,t,s);131072&e.flags&&(ml=!0)}}return kl(e,t,r,i,s)}function Cl(e,t,r){var i=t.pendingProps,s=i.children,n=null!==e?e.memoizedState:null;if("hidden"===i.mode)if(1&t.mode){if(!(1073741824&r))return e=null!==n?n.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,kn(Pc,Tc),Tc|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=null!==n?n.baseLanes:r,kn(Pc,Tc),Tc|=i}else t.memoizedState={baseLanes:0,cachePool:null,transitions:null},kn(Pc,Tc),Tc|=r;else null!==n?(i=n.baseLanes|r,t.memoizedState=null):i=r,kn(Pc,Tc),Tc|=i;return bl(e,t,s,r),t.child}function xl(e,t){var r=t.ref;(null===e&&null!==r||null!==e&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function kl(e,t,r,i,s){var n=Tn(r)?Dn:Ln.current;return n=An(t,n),Do(t,s),r=_a(e,t,r,i,n,s),i=va(),null===e||ml?(io&&i&&Zn(t),t.flags|=1,bl(e,t,r,s),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Wl(e,t,s))}function El(e,t,r,i,s){if(Tn(r)){var n=!0;Mn(t)}else n=!1;if(Do(t,s),null===t.stateNode)Ul(e,t),nl(t,r,i),al(t,r,i,s),i=!0;else if(null===e){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,c=r.contextType;"object"==typeof c&&null!==c?c=Ao(c):c=An(t,c=Tn(r)?Dn:Ln.current);var h=r.getDerivedStateFromProps,u="function"==typeof h||"function"==typeof o.getSnapshotBeforeUpdate;u||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(a!==i||l!==c)&&ol(t,o,i,c),Mo=!1;var d=t.memoizedState;o.state=d,Uo(t,i,o,s),l=t.memoizedState,a!==i||d!==l||Rn.current||Mo?("function"==typeof h&&(rl(t,r,h,i),l=t.memoizedState),(a=Mo||sl(t,r,a,i,d,l,c))?(u||"function"!=typeof o.UNSAFE_componentWillMount&&"function"!=typeof o.componentWillMount||("function"==typeof o.componentWillMount&&o.componentWillMount(),"function"==typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"==typeof o.componentDidMount&&(t.flags|=4194308)):("function"==typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=l),o.props=i,o.state=l,o.context=c,i=a):("function"==typeof o.componentDidMount&&(t.flags|=4194308),i=!1)}else{o=t.stateNode,Io(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:tl(t.type,a),o.props=c,u=t.pendingProps,d=o.context,"object"==typeof(l=r.contextType)&&null!==l?l=Ao(l):l=An(t,l=Tn(r)?Dn:Ln.current);var f=r.getDerivedStateFromProps;(h="function"==typeof f||"function"==typeof o.getSnapshotBeforeUpdate)||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(a!==u||d!==l)&&ol(t,o,i,l),Mo=!1,d=t.memoizedState,o.state=d,Uo(t,i,o,s);var p=t.memoizedState;a!==u||d!==p||Rn.current||Mo?("function"==typeof f&&(rl(t,r,f,i),p=t.memoizedState),(c=Mo||sl(t,r,c,i,d,p,l)||!1)?(h||"function"!=typeof o.UNSAFE_componentWillUpdate&&"function"!=typeof o.componentWillUpdate||("function"==typeof o.componentWillUpdate&&o.componentWillUpdate(i,p,l),"function"==typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(i,p,l)),"function"==typeof o.componentDidUpdate&&(t.flags|=4),"function"==typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!=typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!=typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=p),o.props=i,o.state=p,o.context=l,i=c):("function"!=typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!=typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),i=!1)}return Ll(e,t,r,i,n,s)}function Ll(e,t,r,i,s,n){xl(e,t);var o=!!(128&t.flags);if(!i&&!o)return s&&Nn(t,r,!1),Wl(e,t,n);i=t.stateNode,gl.current=t;var a=o&&"function"!=typeof r.getDerivedStateFromError?null:i.render();return t.flags|=1,null!==e&&o?(t.child=yo(t,e.child,null,n),t.child=yo(t,null,a,n)):bl(e,t,a,n),t.memoizedState=i.state,s&&Nn(t,r,!0),t.child}function Rl(e){var t=e.stateNode;t.pendingContext?Bn(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Bn(0,t.context,!1),Xo(e,t.containerInfo)}function Dl(e,t,r,i,s){return fo(),po(s),t.flags|=256,bl(e,t,r,i),t.child}var Al,Tl,Pl,Bl,Ol={dehydrated:null,treeContext:null,retryLane:0};function Ml(e){return{baseLanes:e,cachePool:null,transitions:null}}function Nl(e,t,r){var i,s=t.pendingProps,n=Zo.current,o=!1,a=!!(128&t.flags);if((i=a)||(i=(null===e||null!==e.memoizedState)&&!!(2&n)),i?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(n|=1),kn(Zo,1&n),null===e)return lo(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(1&t.mode?"$!"===e.data?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=s.children,e=s.fallback,o?(s=t.mode,o=t.child,a={mode:"hidden",children:a},1&s||null===o?o=Mh(a,s,0,null):(o.childLanes=0,o.pendingProps=a),e=Oh(e,s,r,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Ml(r),t.memoizedState=Ol,e):Il(t,a));if(null!==(n=e.memoizedState)&&null!==(i=n.dehydrated))return function(e,t,r,i,s,n,o){if(r)return 256&t.flags?(t.flags&=-257,jl(e,t,o,i=cl(Error(ne(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(n=i.fallback,s=t.mode,i=Mh({mode:"visible",children:i.children},s,0,null),(n=Oh(n,s,o,null)).flags|=2,i.return=t,n.return=t,i.sibling=n,t.child=i,1&t.mode&&yo(t,e.child,null,o),t.child.memoizedState=Ml(o),t.memoizedState=Ol,n);if(!(1&t.mode))return jl(e,t,o,null);if("$!"===s.data){if(i=s.nextSibling&&s.nextSibling.dataset)var a=i.dgst;return i=a,jl(e,t,o,i=cl(n=Error(ne(419)),i,void 0))}if(a=0!==(o&e.childLanes),ml||a){if(null!==(i=Rc)){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}0!==(s=0!==(s&(i.suspendedLanes|o))?0:s)&&s!==n.retryLane&&(n.retryLane=s,Oo(e,s),th(i,e,s,-1))}return ph(),jl(e,t,o,i=cl(Error(ne(421))))}return"$?"===s.data?(t.flags|=128,t.child=e.child,t=Eh.bind(null,e),s._reactRetry=t,null):(e=n.treeContext,ro=ln(s.nextSibling),to=t,io=!0,so=null,null!==e&&(Vn[Kn++]=Xn,Vn[Kn++]=Yn,Vn[Kn++]=Gn,Xn=e.id,Yn=e.overflow,Gn=t),t=Il(t,i.children),t.flags|=4096,t)}(e,t,a,s,i,n,r);if(o){o=s.fallback,a=t.mode,i=(n=e.child).sibling;var l={mode:"hidden",children:s.children};return 1&a||t.child===n?(s=Ph(n,l)).subtreeFlags=14680064&n.subtreeFlags:((s=t.child).childLanes=0,s.pendingProps=l,t.deletions=null),null!==i?o=Ph(i,o):(o=Oh(o,a,r,null)).flags|=2,o.return=t,s.return=t,s.sibling=o,t.child=s,s=o,o=t.child,a=null===(a=e.child.memoizedState)?Ml(r):{baseLanes:a.baseLanes|r,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=e.childLanes&~r,t.memoizedState=Ol,s}return e=(o=e.child).sibling,s=Ph(o,{mode:"visible",children:s.children}),!(1&t.mode)&&(s.lanes=r),s.return=t,s.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=s,t.memoizedState=null,s}function Il(e,t){return(t=Mh({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function jl(e,t,r,i){return null!==i&&po(i),yo(t,e.child,null,r),(e=Il(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Hl(e,t,r){e.lanes|=t;var i=e.alternate;null!==i&&(i.lanes|=t),Ro(e.return,t,r)}function Fl(e,t,r,i,s){var n=e.memoizedState;null===n?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:r,tailMode:s}:(n.isBackwards=t,n.rendering=null,n.renderingStartTime=0,n.last=i,n.tail=r,n.tailMode=s)}function zl(e,t,r){var i=t.pendingProps,s=i.revealOrder,n=i.tail;if(bl(e,t,i.children,r),2&(i=Zo.current))i=1&i|2,t.flags|=128;else{if(null!==e&&128&e.flags)e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Hl(e,r,t);else if(19===e.tag)Hl(e,r,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(kn(Zo,i),1&t.mode)switch(s){case"forwards":for(r=t.child,s=null;null!==r;)null!==(e=r.alternate)&&null===ea(e)&&(s=r),r=r.sibling;null===(r=s)?(s=t.child,t.child=null):(s=r.sibling,r.sibling=null),Fl(t,!1,s,r,n);break;case"backwards":for(r=null,s=t.child,t.child=null;null!==s;){if(null!==(e=s.alternate)&&null===ea(e)){t.child=s;break}e=s.sibling,s.sibling=r,r=s,s=e}Fl(t,!0,r,null,n);break;case"together":Fl(t,!1,null,null,void 0);break;default:t.memoizedState=null}else t.memoizedState=null;return t.child}function Ul(e,t){!(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Wl(e,t,r){if(null!==e&&(t.dependencies=e.dependencies),Mc|=t.lanes,0===(r&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(ne(153));if(null!==t.child){for(r=Ph(e=t.child,e.pendingProps),t.child=r,r.return=t;null!==e.sibling;)e=e.sibling,(r=r.sibling=Ph(e,e.pendingProps)).return=t;r.sibling=null}return t.child}function $l(e,t){if(!io)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;null!==t;)null!==t.alternate&&(r=t),t=t.sibling;null===r?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var i=null;null!==r;)null!==r.alternate&&(i=r),r=r.sibling;null===i?t||null===e.tail?e.tail=null:e.tail.sibling=null:i.sibling=null}}function ql(e){var t=null!==e.alternate&&e.alternate.child===e.child,r=0,i=0;if(t)for(var s=e.child;null!==s;)r|=s.lanes|s.childLanes,i|=14680064&s.subtreeFlags,i|=14680064&s.flags,s.return=e,s=s.sibling;else for(s=e.child;null!==s;)r|=s.lanes|s.childLanes,i|=s.subtreeFlags,i|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=i,e.childLanes=r,t}function Vl(e,t,r){var i=t.pendingProps;switch(eo(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ql(t),null;case 1:case 17:return Tn(t.type)&&Pn(),ql(t),null;case 3:return i=t.stateNode,Yo(),xn(Rn),xn(Ln),ra(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),null!==e&&null!==e.child||(ho(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&!(256&t.flags)||(t.flags|=1024,null!==so&&(nh(so),so=null))),Tl(e,t),ql(t),null;case 5:Jo(t);var s=Go(Ko.current);if(r=t.type,null!==e&&null!=t.stateNode)Pl(e,t,r,i,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(null===t.stateNode)throw Error(ne(166));return ql(t),null}if(e=Go(qo.current),ho(t)){i=t.stateNode,r=t.type;var n=t.memoizedProps;switch(i[un]=t,i[dn]=n,e=!!(1&t.mode),r){case"dialog":Is("cancel",i),Is("close",i);break;case"iframe":case"object":case"embed":Is("load",i);break;case"video":case"audio":for(s=0;s<Bs.length;s++)Is(Bs[s],i);break;case"source":Is("error",i);break;case"img":case"image":case"link":Is("error",i),Is("load",i);break;case"details":Is("toggle",i);break;case"input":Ye(i,n),Is("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!n.multiple},Is("invalid",i);break;case"textarea":st(i,n),Is("invalid",i)}for(var o in gt(r,n),s=null,n)if(n.hasOwnProperty(o)){var a=n[o];"children"===o?"string"==typeof a?i.textContent!==a&&(!0!==n.suppressHydrationWarning&&Ys(i.textContent,a,e),s=["children",a]):"number"==typeof a&&i.textContent!==""+a&&(!0!==n.suppressHydrationWarning&&Ys(i.textContent,a,e),s=["children",""+a]):ae.hasOwnProperty(o)&&null!=a&&"onScroll"===o&&Is("scroll",i)}switch(r){case"input":Ve(i),Ze(i,n,!0);break;case"textarea":Ve(i),ot(i);break;case"select":case"option":break;default:"function"==typeof n.onClick&&(i.onclick=Qs)}i=s,t.updateQueue=i,null!==i&&(t.flags|=4)}else{o=9===s.nodeType?s:s.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=at(r)),"http://www.w3.org/1999/xhtml"===e?"script"===r?((e=o.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"==typeof i.is?e=o.createElement(r,{is:i.is}):(e=o.createElement(r),"select"===r&&(o=e,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):e=o.createElementNS(e,r),e[un]=t,e[dn]=i,Al(e,t,!1,!1),t.stateNode=e;e:{switch(o=mt(r,i),r){case"dialog":Is("cancel",e),Is("close",e),s=i;break;case"iframe":case"object":case"embed":Is("load",e),s=i;break;case"video":case"audio":for(s=0;s<Bs.length;s++)Is(Bs[s],e);s=i;break;case"source":Is("error",e),s=i;break;case"img":case"image":case"link":Is("error",e),Is("load",e),s=i;break;case"details":Is("toggle",e),s=i;break;case"input":Ye(e,i),s=Xe(e,i),Is("invalid",e);break;case"option":default:s=i;break;case"select":e._wrapperState={wasMultiple:!!i.multiple},s=Ie({},i,{value:void 0}),Is("invalid",e);break;case"textarea":st(e,i),s=it(e,i),Is("invalid",e)}for(n in gt(r,s),a=s)if(a.hasOwnProperty(n)){var l=a[n];"style"===n?_t(e,l):"dangerouslySetInnerHTML"===n?null!=(l=l?l.__html:void 0)&&ht(e,l):"children"===n?"string"==typeof l?("textarea"!==r||""!==l)&&ut(e,l):"number"==typeof l&&ut(e,""+l):"suppressContentEditableWarning"!==n&&"suppressHydrationWarning"!==n&&"autoFocus"!==n&&(ae.hasOwnProperty(n)?null!=l&&"onScroll"===n&&Is("scroll",e):null!=l&&be(e,n,l,o))}switch(r){case"input":Ve(e),Ze(e,i,!1);break;case"textarea":Ve(e),ot(e);break;case"option":null!=i.value&&e.setAttribute("value",""+$e(i.value));break;case"select":e.multiple=!!i.multiple,null!=(n=i.value)?rt(e,!!i.multiple,n,!1):null!=i.defaultValue&&rt(e,!!i.multiple,i.defaultValue,!0);break;default:"function"==typeof s.onClick&&(e.onclick=Qs)}switch(r){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return ql(t),null;case 6:if(e&&null!=t.stateNode)Bl(e,t,e.memoizedProps,i);else{if("string"!=typeof i&&null===t.stateNode)throw Error(ne(166));if(r=Go(Ko.current),Go(qo.current),ho(t)){if(i=t.stateNode,r=t.memoizedProps,i[un]=t,(n=i.nodeValue!==r)&&null!==(e=to))switch(e.tag){case 3:Ys(i.nodeValue,r,!!(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Ys(i.nodeValue,r,!!(1&e.mode))}n&&(t.flags|=4)}else(i=(9===r.nodeType?r:r.ownerDocument).createTextNode(i))[un]=t,t.stateNode=i}return ql(t),null;case 13:if(xn(Zo),i=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(io&&null!==ro&&1&t.mode&&!(128&t.flags))uo(),fo(),t.flags|=98560,n=!1;else if(n=ho(t),null!==i&&null!==i.dehydrated){if(null===e){if(!n)throw Error(ne(318));if(!(n=null!==(n=t.memoizedState)?n.dehydrated:null))throw Error(ne(317));n[un]=t}else fo(),!(128&t.flags)&&(t.memoizedState=null),t.flags|=4;ql(t),n=!1}else null!==so&&(nh(so),so=null),n=!0;if(!n)return 65536&t.flags?t:null}return 128&t.flags?(t.lanes=r,t):((i=null!==i)!==(null!==e&&null!==e.memoizedState)&&i&&(t.child.flags|=8192,1&t.mode&&(null===e||1&Zo.current?0===Bc&&(Bc=3):ph())),null!==t.updateQueue&&(t.flags|=4),ql(t),null);case 4:return Yo(),Tl(e,t),null===e&&Fs(t.stateNode.containerInfo),ql(t),null;case 10:return Lo(t.type._context),ql(t),null;case 19:if(xn(Zo),null===(n=t.memoizedState))return ql(t),null;if(i=!!(128&t.flags),null===(o=n.rendering))if(i)$l(n,!1);else{if(0!==Bc||null!==e&&128&e.flags)for(e=t.child;null!==e;){if(null!==(o=ea(e))){for(t.flags|=128,$l(n,!1),null!==(i=o.updateQueue)&&(t.updateQueue=i,t.flags|=4),t.subtreeFlags=0,i=r,r=t.child;null!==r;)e=i,(n=r).flags&=14680066,null===(o=n.alternate)?(n.childLanes=0,n.lanes=e,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=o.childLanes,n.lanes=o.lanes,n.child=o.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=o.memoizedProps,n.memoizedState=o.memoizedState,n.updateQueue=o.updateQueue,n.type=o.type,e=o.dependencies,n.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return kn(Zo,1&Zo.current|2),t.child}e=e.sibling}null!==n.tail&&Yt()>zc&&(t.flags|=128,i=!0,$l(n,!1),t.lanes=4194304)}else{if(!i)if(null!==(e=ea(o))){if(t.flags|=128,i=!0,null!==(r=e.updateQueue)&&(t.updateQueue=r,t.flags|=4),$l(n,!0),null===n.tail&&"hidden"===n.tailMode&&!o.alternate&&!io)return ql(t),null}else 2*Yt()-n.renderingStartTime>zc&&1073741824!==r&&(t.flags|=128,i=!0,$l(n,!1),t.lanes=4194304);n.isBackwards?(o.sibling=t.child,t.child=o):(null!==(r=n.last)?r.sibling=o:t.child=o,n.last=o)}return null!==n.tail?(t=n.tail,n.rendering=t,n.tail=t.sibling,n.renderingStartTime=Yt(),t.sibling=null,r=Zo.current,kn(Zo,i?1&r|2:1&r),t):(ql(t),null);case 22:case 23:return hh(),i=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==i&&(t.flags|=8192),i&&1&t.mode?!!(1073741824&Tc)&&(ql(t),6&t.subtreeFlags&&(t.flags|=8192)):ql(t),null;case 24:case 25:return null}throw Error(ne(156,t.tag))}function Kl(e,t){switch(eo(t),t.tag){case 1:return Tn(t.type)&&Pn(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Yo(),xn(Rn),xn(Ln),ra(),65536&(e=t.flags)&&!(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Jo(t),null;case 13:if(xn(Zo),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(ne(340));fo()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return xn(Zo),null;case 4:return Yo(),null;case 10:return Lo(t.type._context),null;case 22:case 23:return hh(),null;default:return null}}Al=function(e,t){for(var r=t.child;null!==r;){if(5===r.tag||6===r.tag)e.appendChild(r.stateNode);else if(4!==r.tag&&null!==r.child){r.child.return=r,r=r.child;continue}if(r===t)break;for(;null===r.sibling;){if(null===r.return||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}},Tl=function(){},Pl=function(e,t,r,i){var s=e.memoizedProps;if(s!==i){e=t.stateNode,Go(qo.current);var n,o=null;switch(r){case"input":s=Xe(e,s),i=Xe(e,i),o=[];break;case"select":s=Ie({},s,{value:void 0}),i=Ie({},i,{value:void 0}),o=[];break;case"textarea":s=it(e,s),i=it(e,i),o=[];break;default:"function"!=typeof s.onClick&&"function"==typeof i.onClick&&(e.onclick=Qs)}for(c in gt(r,i),r=null,s)if(!i.hasOwnProperty(c)&&s.hasOwnProperty(c)&&null!=s[c])if("style"===c){var a=s[c];for(n in a)a.hasOwnProperty(n)&&(r||(r={}),r[n]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(ae.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in i){var l=i[c];if(a=null!=s?s[c]:void 0,i.hasOwnProperty(c)&&l!==a&&(null!=l||null!=a))if("style"===c)if(a){for(n in a)!a.hasOwnProperty(n)||l&&l.hasOwnProperty(n)||(r||(r={}),r[n]="");for(n in l)l.hasOwnProperty(n)&&a[n]!==l[n]&&(r||(r={}),r[n]=l[n])}else r||(o||(o=[]),o.push(c,r)),r=l;else"dangerouslySetInnerHTML"===c?(l=l?l.__html:void 0,a=a?a.__html:void 0,null!=l&&a!==l&&(o=o||[]).push(c,l)):"children"===c?"string"!=typeof l&&"number"!=typeof l||(o=o||[]).push(c,""+l):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(ae.hasOwnProperty(c)?(null!=l&&"onScroll"===c&&Is("scroll",e),o||a===l||(o=[])):(o=o||[]).push(c,l))}r&&(o=o||[]).push("style",r);var c=o;(t.updateQueue=c)&&(t.flags|=4)}},Bl=function(e,t,r,i){r!==i&&(t.flags|=4)};var Gl=!1,Xl=!1,Yl="function"==typeof WeakSet?WeakSet:Set,Ql=null;function Jl(e,t){var r=e.ref;if(null!==r)if("function"==typeof r)try{r(null)}catch(kd){Ch(e,t,kd)}else r.current=null}function Zl(e,t,r){try{r()}catch(kd){Ch(e,t,kd)}}var ec=!1;function tc(e,t,r){var i=t.updateQueue;if(null!==(i=null!==i?i.lastEffect:null)){var s=i=i.next;do{if((s.tag&e)===e){var n=s.destroy;s.destroy=void 0,void 0!==n&&Zl(t,r,n)}s=s.next}while(s!==i)}}function rc(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var r=t=t.next;do{if((r.tag&e)===e){var i=r.create;r.destroy=i()}r=r.next}while(r!==t)}}function ic(e){var t=e.ref;if(null!==t){var r=e.stateNode;e.tag,e=r,"function"==typeof t?t(e):t.current=e}}function sc(e){var t=e.alternate;null!==t&&(e.alternate=null,sc(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[un],delete t[dn],delete t[pn],delete t[_n],delete t[vn])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function nc(e){return 5===e.tag||3===e.tag||4===e.tag}function oc(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||nc(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ac(e,t,r){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?8===r.nodeType?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(8===r.nodeType?(t=r.parentNode).insertBefore(e,r):(t=r).appendChild(e),null!=(r=r._reactRootContainer)||null!==t.onclick||(t.onclick=Qs));else if(4!==i&&null!==(e=e.child))for(ac(e,t,r),e=e.sibling;null!==e;)ac(e,t,r),e=e.sibling}function lc(e,t,r){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(4!==i&&null!==(e=e.child))for(lc(e,t,r),e=e.sibling;null!==e;)lc(e,t,r),e=e.sibling}var cc=null,hc=!1;function uc(e,t,r){for(r=r.child;null!==r;)dc(e,t,r),r=r.sibling}function dc(e,t,r){if(sr&&"function"==typeof sr.onCommitFiberUnmount)try{sr.onCommitFiberUnmount(ir,r)}catch(Fd){}switch(r.tag){case 5:Xl||Jl(r,t);case 6:var i=cc,s=hc;cc=null,uc(e,t,r),hc=s,null!==(cc=i)&&(hc?(e=cc,r=r.stateNode,8===e.nodeType?e.parentNode.removeChild(r):e.removeChild(r)):cc.removeChild(r.stateNode));break;case 18:null!==cc&&(hc?(e=cc,r=r.stateNode,8===e.nodeType?an(e.parentNode,r):1===e.nodeType&&an(e,r),zr(e)):an(cc,r.stateNode));break;case 4:i=cc,s=hc,cc=r.stateNode.containerInfo,hc=!0,uc(e,t,r),cc=i,hc=s;break;case 0:case 11:case 14:case 15:if(!Xl&&(null!==(i=r.updateQueue)&&null!==(i=i.lastEffect))){s=i=i.next;do{var n=s,o=n.destroy;n=n.tag,void 0!==o&&(2&n||4&n)&&Zl(r,t,o),s=s.next}while(s!==i)}uc(e,t,r);break;case 1:if(!Xl&&(Jl(r,t),"function"==typeof(i=r.stateNode).componentWillUnmount))try{i.props=r.memoizedProps,i.state=r.memoizedState,i.componentWillUnmount()}catch(Fd){Ch(r,t,Fd)}uc(e,t,r);break;case 21:uc(e,t,r);break;case 22:1&r.mode?(Xl=(i=Xl)||null!==r.memoizedState,uc(e,t,r),Xl=i):uc(e,t,r);break;default:uc(e,t,r)}}function fc(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var r=e.stateNode;null===r&&(r=e.stateNode=new Yl),t.forEach(function(t){var i=Lh.bind(null,e,t);r.has(t)||(r.add(t),t.then(i,i))})}}function pc(e,t){var r=t.deletions;if(null!==r)for(var i=0;i<r.length;i++){var s=r[i];try{var n=e,o=t,a=o;e:for(;null!==a;){switch(a.tag){case 5:cc=a.stateNode,hc=!1;break e;case 3:case 4:cc=a.stateNode.containerInfo,hc=!0;break e}a=a.return}if(null===cc)throw Error(ne(160));dc(n,o,s),cc=null,hc=!1;var l=s.alternate;null!==l&&(l.return=null),s.return=null}catch(Ad){Ch(s,t,Ad)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)_c(t,e),t=t.sibling}function _c(e,t){var r=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(pc(t,e),vc(e),4&i){try{tc(3,e,e.return),rc(3,e)}catch(Dd){Ch(e,e.return,Dd)}try{tc(5,e,e.return)}catch(Dd){Ch(e,e.return,Dd)}}break;case 1:pc(t,e),vc(e),512&i&&null!==r&&Jl(r,r.return);break;case 5:if(pc(t,e),vc(e),512&i&&null!==r&&Jl(r,r.return),32&e.flags){var s=e.stateNode;try{ut(s,"")}catch(Dd){Ch(e,e.return,Dd)}}if(4&i&&null!=(s=e.stateNode)){var n=e.memoizedProps,o=null!==r?r.memoizedProps:n,a=e.type,l=e.updateQueue;if(e.updateQueue=null,null!==l)try{"input"===a&&"radio"===n.type&&null!=n.name&&Qe(s,n),mt(a,o);var c=mt(a,n);for(o=0;o<l.length;o+=2){var h=l[o],u=l[o+1];"style"===h?_t(s,u):"dangerouslySetInnerHTML"===h?ht(s,u):"children"===h?ut(s,u):be(s,h,u,c)}switch(a){case"input":Je(s,n);break;case"textarea":nt(s,n);break;case"select":var d=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!n.multiple;var f=n.value;null!=f?rt(s,!!n.multiple,f,!1):d!==!!n.multiple&&(null!=n.defaultValue?rt(s,!!n.multiple,n.defaultValue,!0):rt(s,!!n.multiple,n.multiple?[]:"",!1))}s[dn]=n}catch(Dd){Ch(e,e.return,Dd)}}break;case 6:if(pc(t,e),vc(e),4&i){if(null===e.stateNode)throw Error(ne(162));s=e.stateNode,n=e.memoizedProps;try{s.nodeValue=n}catch(Dd){Ch(e,e.return,Dd)}}break;case 3:if(pc(t,e),vc(e),4&i&&null!==r&&r.memoizedState.isDehydrated)try{zr(t.containerInfo)}catch(Dd){Ch(e,e.return,Dd)}break;case 4:default:pc(t,e),vc(e);break;case 13:pc(t,e),vc(e),8192&(s=e.child).flags&&(n=null!==s.memoizedState,s.stateNode.isHidden=n,!n||null!==s.alternate&&null!==s.alternate.memoizedState||(Fc=Yt())),4&i&&fc(e);break;case 22:if(h=null!==r&&null!==r.memoizedState,1&e.mode?(Xl=(c=Xl)||h,pc(t,e),Xl=c):pc(t,e),vc(e),8192&i){if(c=null!==e.memoizedState,(e.stateNode.isHidden=c)&&!h&&1&e.mode)for(Ql=e,h=e.child;null!==h;){for(u=Ql=h;null!==Ql;){switch(f=(d=Ql).child,d.tag){case 0:case 11:case 14:case 15:tc(4,d,d.return);break;case 1:Jl(d,d.return);var p=d.stateNode;if("function"==typeof p.componentWillUnmount){i=d,r=d.return;try{t=i,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(Dd){Ch(i,r,Dd)}}break;case 5:Jl(d,d.return);break;case 22:if(null!==d.memoizedState){yc(u);continue}}null!==f?(f.return=d,Ql=f):yc(u)}h=h.sibling}e:for(h=null,u=e;;){if(5===u.tag){if(null===h){h=u;try{s=u.stateNode,c?"function"==typeof(n=s.style).setProperty?n.setProperty("display","none","important"):n.display="none":(a=u.stateNode,o=null!=(l=u.memoizedProps.style)&&l.hasOwnProperty("display")?l.display:null,a.style.display=pt("display",o))}catch(Dd){Ch(e,e.return,Dd)}}}else if(6===u.tag){if(null===h)try{u.stateNode.nodeValue=c?"":u.memoizedProps}catch(Dd){Ch(e,e.return,Dd)}}else if((22!==u.tag&&23!==u.tag||null===u.memoizedState||u===e)&&null!==u.child){u.child.return=u,u=u.child;continue}if(u===e)break e;for(;null===u.sibling;){if(null===u.return||u.return===e)break e;h===u&&(h=null),u=u.return}h===u&&(h=null),u.sibling.return=u.return,u=u.sibling}}break;case 19:pc(t,e),vc(e),4&i&&fc(e);case 21:}}function vc(e){var t=e.flags;if(2&t){try{e:{for(var r=e.return;null!==r;){if(nc(r)){var i=r;break e}r=r.return}throw Error(ne(160))}switch(i.tag){case 5:var s=i.stateNode;32&i.flags&&(ut(s,""),i.flags&=-33),lc(e,oc(e),s);break;case 3:case 4:var n=i.stateNode.containerInfo;ac(e,oc(e),n);break;default:throw Error(ne(161))}}catch(Wd){Ch(e,e.return,Wd)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function gc(e,t,r){Ql=e,mc(e)}function mc(e,t,r){for(var i=!!(1&e.mode);null!==Ql;){var s=Ql,n=s.child;if(22===s.tag&&i){var o=null!==s.memoizedState||Gl;if(!o){var a=s.alternate,l=null!==a&&null!==a.memoizedState||Xl;a=Gl;var c=Xl;if(Gl=o,(Xl=l)&&!c)for(Ql=s;null!==Ql;)l=(o=Ql).child,22===o.tag&&null!==o.memoizedState?Sc(s):null!==l?(l.return=o,Ql=l):Sc(s);for(;null!==n;)Ql=n,mc(n),n=n.sibling;Ql=s,Gl=a,Xl=c}bc(e)}else 8772&s.subtreeFlags&&null!==n?(n.return=s,Ql=n):bc(e)}}function bc(e){for(;null!==Ql;){var t=Ql;if(8772&t.flags){var r=t.alternate;try{if(8772&t.flags)switch(t.tag){case 0:case 11:case 15:Xl||rc(5,t);break;case 1:var i=t.stateNode;if(4&t.flags&&!Xl)if(null===r)i.componentDidMount();else{var s=t.elementType===t.type?r.memoizedProps:tl(t.type,r.memoizedProps);i.componentDidUpdate(s,r.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var n=t.updateQueue;null!==n&&Wo(t,n,i);break;case 3:var o=t.updateQueue;if(null!==o){if(r=null,null!==t.child)switch(t.child.tag){case 5:case 1:r=t.child.stateNode}Wo(t,o,r)}break;case 5:var a=t.stateNode;if(null===r&&4&t.flags){r=a;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&r.focus();break;case"img":l.src&&(r.src=l.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var c=t.alternate;if(null!==c){var u=c.memoizedState;if(null!==u){var d=u.dehydrated;null!==d&&zr(d)}}}break;default:throw Error(ne(163))}Xl||512&t.flags&&ic(t)}catch(h){Ch(t,t.return,h)}}if(t===e){Ql=null;break}if(null!==(r=t.sibling)){r.return=t.return,Ql=r;break}Ql=t.return}}function yc(e){for(;null!==Ql;){var t=Ql;if(t===e){Ql=null;break}var r=t.sibling;if(null!==r){r.return=t.return,Ql=r;break}Ql=t.return}}function Sc(e){for(;null!==Ql;){var t=Ql;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{rc(4,t)}catch(Wd){Ch(t,r,Wd)}break;case 1:var i=t.stateNode;if("function"==typeof i.componentDidMount){var s=t.return;try{i.componentDidMount()}catch(Wd){Ch(t,s,Wd)}}var n=t.return;try{ic(t)}catch(Wd){Ch(t,n,Wd)}break;case 5:var o=t.return;try{ic(t)}catch(Wd){Ch(t,o,Wd)}}}catch(Wd){Ch(t,t.return,Wd)}if(t===e){Ql=null;break}var a=t.sibling;if(null!==a){a.return=t.return,Ql=a;break}Ql=t.return}}var wc,Cc=Math.ceil,xc=ye.ReactCurrentDispatcher,kc=ye.ReactCurrentOwner,Ec=ye.ReactCurrentBatchConfig,Lc=0,Rc=null,Dc=null,Ac=0,Tc=0,Pc=Cn(0),Bc=0,Oc=null,Mc=0,Nc=0,Ic=0,jc=null,Hc=null,Fc=0,zc=1/0,Uc=null,Wc=!1,$c=null,qc=null,Vc=!1,Kc=null,Gc=0,Xc=0,Yc=null,Qc=-1,Jc=0;function Zc(){return 6&Lc?Yt():-1!==Qc?Qc:Qc=Yt()}function eh(e){return 1&e.mode?2&Lc&&0!==Ac?Ac&-Ac:null!==_o.transition?(0===Jc&&(Jc=pr()),Jc):0!==(e=mr)?e:e=void 0===(e=window.event)?16:Xr(e.type):1}function th(e,t,r,i){if(50<Xc)throw Xc=0,Yc=null,Error(ne(185));vr(e,r,i),2&Lc&&e===Rc||(e===Rc&&(!(2&Lc)&&(Nc|=r),4===Bc&&oh(e,Ac)),rh(e,i),1===r&&0===Lc&&!(1&t.mode)&&(zc=Yt()+500,jn&&zn()))}function rh(e,t){var r=e.callbackNode;!function(e,t){for(var r=e.suspendedLanes,i=e.pingedLanes,s=e.expirationTimes,n=e.pendingLanes;0<n;){var o=31-nr(n),a=1<<o,l=s[o];-1===l?0!==(a&r)&&0===(a&i)||(s[o]=dr(a,t)):l<=t&&(e.expiredLanes|=a),n&=~a}}(e,t);var i=ur(e,e===Rc?Ac:0);if(0===i)null!==r&&Kt(r),e.callbackNode=null,e.callbackPriority=0;else if(t=i&-i,e.callbackPriority!==t){if(null!=r&&Kt(r),1===t)0===e.tag?function(e){jn=!0,Fn(e)}(ah.bind(null,e)):Fn(ah.bind(null,e)),nn(function(){!(6&Lc)&&zn()}),r=null;else{switch(br(i)){case 1:r=Jt;break;case 4:r=Zt;break;case 16:default:r=er;break;case 536870912:r=rr}r=Rh(r,ih.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function ih(e,t){if(Qc=-1,Jc=0,6&Lc)throw Error(ne(327));var r=e.callbackNode;if(Sh()&&e.callbackNode!==r)return null;var i=ur(e,e===Rc?Ac:0);if(0===i)return null;if(30&i||0!==(i&e.expiredLanes)||t)t=_h(e,i);else{t=i;var s=Lc;Lc|=2;var n=fh();for(Rc===e&&Ac===t||(Uc=null,zc=Yt()+500,uh(e,t));;)try{gh();break}catch(Fd){dh(e,Fd)}Eo(),xc.current=n,Lc=s,null!==Dc?t=0:(Rc=null,Ac=0,t=Bc)}if(0!==t){if(2===t&&(0!==(s=fr(e))&&(i=s,t=sh(e,s))),1===t)throw r=Oc,uh(e,0),oh(e,i),rh(e,Yt()),r;if(6===t)oh(e,i);else{if(s=e.current.alternate,!(30&i||function(e){for(var t=e;;){if(16384&t.flags){var r=t.updateQueue;if(null!==r&&null!==(r=r.stores))for(var i=0;i<r.length;i++){var s=r[i],n=s.getSnapshot;s=s.value;try{if(!ns(n(),s))return!1}catch(o){return!1}}}if(r=t.child,16384&t.subtreeFlags&&null!==r)r.return=t,t=r;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(s)||(t=_h(e,i),2===t&&(n=fr(e),0!==n&&(i=n,t=sh(e,n))),1!==t)))throw r=Oc,uh(e,0),oh(e,i),rh(e,Yt()),r;switch(e.finishedWork=s,e.finishedLanes=i,t){case 0:case 1:throw Error(ne(345));case 2:case 5:yh(e,Hc,Uc);break;case 3:if(oh(e,i),(130023424&i)===i&&10<(t=Fc+500-Yt())){if(0!==ur(e,0))break;if(((s=e.suspendedLanes)&i)!==i){Zc(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=tn(yh.bind(null,e,Hc,Uc),t);break}yh(e,Hc,Uc);break;case 4:if(oh(e,i),(4194240&i)===i)break;for(t=e.eventTimes,s=-1;0<i;){var o=31-nr(i);n=1<<o,(o=t[o])>s&&(s=o),i&=~n}if(i=s,10<(i=(120>(i=Yt()-i)?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*Cc(i/1960))-i)){e.timeoutHandle=tn(yh.bind(null,e,Hc,Uc),i);break}yh(e,Hc,Uc);break;default:throw Error(ne(329))}}}return rh(e,Yt()),e.callbackNode===r?ih.bind(null,e):null}function sh(e,t){var r=jc;return e.current.memoizedState.isDehydrated&&(uh(e,t).flags|=256),2!==(e=_h(e,t))&&(t=Hc,Hc=r,null!==t&&nh(t)),e}function nh(e){null===Hc?Hc=e:Hc.push.apply(Hc,e)}function oh(e,t){for(t&=~Ic,t&=~Nc,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-nr(t),i=1<<r;e[r]=-1,t&=~i}}function ah(e){if(6&Lc)throw Error(ne(327));Sh();var t=ur(e,0);if(!(1&t))return rh(e,Yt()),null;var r=_h(e,t);if(0!==e.tag&&2===r){var i=fr(e);0!==i&&(t=i,r=sh(e,i))}if(1===r)throw r=Oc,uh(e,0),oh(e,t),rh(e,Yt()),r;if(6===r)throw Error(ne(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,yh(e,Hc,Uc),rh(e,Yt()),null}function lh(e,t){var r=Lc;Lc|=1;try{return e(t)}finally{0===(Lc=r)&&(zc=Yt()+500,jn&&zn())}}function ch(e){null!==Kc&&0===Kc.tag&&!(6&Lc)&&Sh();var t=Lc;Lc|=1;var r=Ec.transition,i=mr;try{if(Ec.transition=null,mr=1,e)return e()}finally{mr=i,Ec.transition=r,!(6&(Lc=t))&&zn()}}function hh(){Tc=Pc.current,xn(Pc)}function uh(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(-1!==r&&(e.timeoutHandle=-1,rn(r)),null!==Dc)for(r=Dc.return;null!==r;){var i=r;switch(eo(i),i.tag){case 1:null!=(i=i.type.childContextTypes)&&Pn();break;case 3:Yo(),xn(Rn),xn(Ln),ra();break;case 5:Jo(i);break;case 4:Yo();break;case 13:case 19:xn(Zo);break;case 10:Lo(i.type._context);break;case 22:case 23:hh()}r=r.return}if(Rc=e,Dc=e=Ph(e.current,null),Ac=Tc=t,Bc=0,Oc=null,Ic=Nc=Mc=0,Hc=jc=null,null!==To){for(t=0;t<To.length;t++)if(null!==(i=(r=To[t]).interleaved)){r.interleaved=null;var s=i.next,n=r.pending;if(null!==n){var o=n.next;n.next=s,i.next=o}r.pending=i}To=null}return e}function dh(e,t){for(;;){var r=Dc;try{if(Eo(),ia.current=Qa,ca){for(var i=oa.memoizedState;null!==i;){var s=i.queue;null!==s&&(s.pending=null),i=i.next}ca=!1}if(na=0,la=aa=oa=null,ha=!1,ua=0,kc.current=null,null===r||null===r.return){Bc=1,Oc=t,Dc=null;break}e:{var n=e,o=r.return,a=r,l=t;if(t=Ac,a.flags|=32768,null!==l&&"object"==typeof l&&"function"==typeof l.then){var c=l,h=a,u=h.tag;if(!(1&h.mode||0!==u&&11!==u&&15!==u)){var d=h.alternate;d?(h.updateQueue=d.updateQueue,h.memoizedState=d.memoizedState,h.lanes=d.lanes):(h.updateQueue=null,h.memoizedState=null)}var f=_l(o);if(null!==f){f.flags&=-257,vl(f,o,a,0,t),1&f.mode&&pl(n,c,t),l=c;var p=(t=f).updateQueue;if(null===p){var _=new Set;_.add(l),t.updateQueue=_}else p.add(l);break e}if(!(1&t)){pl(n,c,t),ph();break e}l=Error(ne(426))}else if(io&&1&a.mode){var v=_l(o);if(null!==v){!(65536&v.flags)&&(v.flags|=256),vl(v,o,a,0,t),po(ll(l,a));break e}}n=l=ll(l,a),4!==Bc&&(Bc=2),null===jc?jc=[n]:jc.push(n),n=o;do{switch(n.tag){case 3:n.flags|=65536,t&=-t,n.lanes|=t,zo(n,dl(0,l,t));break e;case 1:a=l;var g=n.type,m=n.stateNode;if(!(128&n.flags||"function"!=typeof g.getDerivedStateFromError&&(null===m||"function"!=typeof m.componentDidCatch||null!==qc&&qc.has(m)))){n.flags|=65536,t&=-t,n.lanes|=t,zo(n,fl(n,a,t));break e}}n=n.return}while(null!==n)}bh(r)}catch(b){t=b,Dc===r&&null!==r&&(Dc=r=r.return);continue}break}}function fh(){var e=xc.current;return xc.current=Qa,null===e?Qa:e}function ph(){0!==Bc&&3!==Bc&&2!==Bc||(Bc=4),null===Rc||!(268435455&Mc)&&!(268435455&Nc)||oh(Rc,Ac)}function _h(e,t){var r=Lc;Lc|=2;var i=fh();for(Rc===e&&Ac===t||(Uc=null,uh(e,t));;)try{vh();break}catch(Rd){dh(e,Rd)}if(Eo(),Lc=r,xc.current=i,null!==Dc)throw Error(ne(261));return Rc=null,Ac=0,Bc}function vh(){for(;null!==Dc;)mh(Dc)}function gh(){for(;null!==Dc&&!Gt();)mh(Dc)}function mh(e){var t=wc(e.alternate,e,Tc);e.memoizedProps=e.pendingProps,null===t?bh(e):Dc=t,kc.current=null}function bh(e){var t=e;do{var r=t.alternate;if(e=t.return,32768&t.flags){if(null!==(r=Kl(r,t)))return r.flags&=32767,void(Dc=r);if(null===e)return Bc=6,void(Dc=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}else if(null!==(r=Vl(r,t,Tc)))return void(Dc=r);if(null!==(t=t.sibling))return void(Dc=t);Dc=t=e}while(null!==t);0===Bc&&(Bc=5)}function yh(e,t,r){var i=mr,s=Ec.transition;try{Ec.transition=null,mr=1,function(e,t,r,i){do{Sh()}while(null!==Kc);if(6&Lc)throw Error(ne(327));r=e.finishedWork;var s=e.finishedLanes;if(null===r)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(ne(177));e.callbackNode=null,e.callbackPriority=0;var n=r.lanes|r.childLanes;if(function(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var i=e.eventTimes;for(e=e.expirationTimes;0<r;){var s=31-nr(r),n=1<<s;t[s]=0,i[s]=-1,e[s]=-1,r&=~n}}(e,n),e===Rc&&(Dc=Rc=null,Ac=0),!(2064&r.subtreeFlags)&&!(2064&r.flags)||Vc||(Vc=!0,Rh(er,function(){return Sh(),null})),n=!!(15990&r.flags),!!(15990&r.subtreeFlags)||n){n=Ec.transition,Ec.transition=null;var o=mr;mr=1;var a=Lc;Lc|=4,kc.current=null,function(e,t){if(Js=Wr,us(e=hs())){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{var i=(r=(r=e.ownerDocument)&&r.defaultView||window).getSelection&&r.getSelection();if(i&&0!==i.rangeCount){r=i.anchorNode;var s=i.anchorOffset,n=i.focusNode;i=i.focusOffset;try{r.nodeType,n.nodeType}catch(af){r=null;break e}var o=0,a=-1,l=-1,c=0,h=0,u=e,d=null;t:for(;;){for(var f;u!==r||0!==s&&3!==u.nodeType||(a=o+s),u!==n||0!==i&&3!==u.nodeType||(l=o+i),3===u.nodeType&&(o+=u.nodeValue.length),null!==(f=u.firstChild);)d=u,u=f;for(;;){if(u===e)break t;if(d===r&&++c===s&&(a=o),d===n&&++h===i&&(l=o),null!==(f=u.nextSibling))break;d=(u=d).parentNode}u=f}r=-1===a||-1===l?null:{start:a,end:l}}else r=null}r=r||{start:0,end:0}}else r=null;for(Zs={focusedElem:e,selectionRange:r},Wr=!1,Ql=t;null!==Ql;)if(e=(t=Ql).child,1028&t.subtreeFlags&&null!==e)e.return=t,Ql=e;else for(;null!==Ql;){t=Ql;try{var p=t.alternate;if(1024&t.flags)switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==p){var _=p.memoizedProps,v=p.memoizedState,g=t.stateNode,m=g.getSnapshotBeforeUpdate(t.elementType===t.type?_:tl(t.type,_),v);g.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(ne(163))}}catch(af){Ch(t,t.return,af)}if(null!==(e=t.sibling)){e.return=t.return,Ql=e;break}Ql=t.return}p=ec,ec=!1}(e,r),_c(r,e),ds(Zs),Wr=!!Js,Zs=Js=null,e.current=r,gc(r),Xt(),Lc=a,mr=o,Ec.transition=n}else e.current=r;if(Vc&&(Vc=!1,Kc=e,Gc=s),n=e.pendingLanes,0===n&&(qc=null),function(e){if(sr&&"function"==typeof sr.onCommitFiberRoot)try{sr.onCommitFiberRoot(ir,e,void 0,!(128&~e.current.flags))}catch(t){}}(r.stateNode),rh(e,Yt()),null!==t)for(i=e.onRecoverableError,r=0;r<t.length;r++)s=t[r],i(s.value,{componentStack:s.stack,digest:s.digest});if(Wc)throw Wc=!1,e=$c,$c=null,e;!!(1&Gc)&&0!==e.tag&&Sh(),n=e.pendingLanes,1&n?e===Yc?Xc++:(Xc=0,Yc=e):Xc=0,zn()}(e,t,r,i)}finally{Ec.transition=s,mr=i}return null}function Sh(){if(null!==Kc){var e=br(Gc),t=Ec.transition,r=mr;try{if(Ec.transition=null,mr=16>e?16:e,null===Kc)var i=!1;else{if(e=Kc,Kc=null,Gc=0,6&Lc)throw Error(ne(331));var s=Lc;for(Lc|=4,Ql=e.current;null!==Ql;){var n=Ql,o=n.child;if(16&Ql.flags){var a=n.deletions;if(null!==a){for(var l=0;l<a.length;l++){var c=a[l];for(Ql=c;null!==Ql;){var h=Ql;switch(h.tag){case 0:case 11:case 15:tc(8,h,n)}var u=h.child;if(null!==u)u.return=h,Ql=u;else for(;null!==Ql;){var d=(h=Ql).sibling,f=h.return;if(sc(h),h===c){Ql=null;break}if(null!==d){d.return=f,Ql=d;break}Ql=f}}}var p=n.alternate;if(null!==p){var _=p.child;if(null!==_){p.child=null;do{var v=_.sibling;_.sibling=null,_=v}while(null!==_)}}Ql=n}}if(2064&n.subtreeFlags&&null!==o)o.return=n,Ql=o;else e:for(;null!==Ql;){if(2048&(n=Ql).flags)switch(n.tag){case 0:case 11:case 15:tc(9,n,n.return)}var g=n.sibling;if(null!==g){g.return=n.return,Ql=g;break e}Ql=n.return}}var m=e.current;for(Ql=m;null!==Ql;){var b=(o=Ql).child;if(2064&o.subtreeFlags&&null!==b)b.return=o,Ql=b;else e:for(o=m;null!==Ql;){if(2048&(a=Ql).flags)try{switch(a.tag){case 0:case 11:case 15:rc(9,a)}}catch(S){Ch(a,a.return,S)}if(a===o){Ql=null;break e}var y=a.sibling;if(null!==y){y.return=a.return,Ql=y;break e}Ql=a.return}}if(Lc=s,zn(),sr&&"function"==typeof sr.onPostCommitFiberRoot)try{sr.onPostCommitFiberRoot(ir,e)}catch(S){}i=!0}return i}finally{mr=r,Ec.transition=t}}return!1}function wh(e,t,r){e=Ho(e,t=dl(0,t=ll(r,t),1),1),t=Zc(),null!==e&&(vr(e,1,t),rh(e,t))}function Ch(e,t,r){if(3===e.tag)wh(e,e,r);else for(;null!==t;){if(3===t.tag){wh(t,e,r);break}if(1===t.tag){var i=t.stateNode;if("function"==typeof t.type.getDerivedStateFromError||"function"==typeof i.componentDidCatch&&(null===qc||!qc.has(i))){t=Ho(t,e=fl(t,e=ll(r,e),1),1),e=Zc(),null!==t&&(vr(t,1,e),rh(t,e));break}}t=t.return}}function xh(e,t,r){var i=e.pingCache;null!==i&&i.delete(t),t=Zc(),e.pingedLanes|=e.suspendedLanes&r,Rc===e&&(Ac&r)===r&&(4===Bc||3===Bc&&(130023424&Ac)===Ac&&500>Yt()-Fc?uh(e,0):Ic|=r),rh(e,t)}function kh(e,t){0===t&&(1&e.mode?(t=cr,!(130023424&(cr<<=1))&&(cr=4194304)):t=1);var r=Zc();null!==(e=Oo(e,t))&&(vr(e,t,r),rh(e,r))}function Eh(e){var t=e.memoizedState,r=0;null!==t&&(r=t.retryLane),kh(e,r)}function Lh(e,t){var r=0;switch(e.tag){case 13:var i=e.stateNode,s=e.memoizedState;null!==s&&(r=s.retryLane);break;case 19:i=e.stateNode;break;default:throw Error(ne(314))}null!==i&&i.delete(t),kh(e,r)}function Rh(e,t){return Vt(e,t)}function Dh(e,t,r,i){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ah(e,t,r,i){return new Dh(e,t,r,i)}function Th(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ph(e,t){var r=e.alternate;return null===r?((r=Ah(e.tag,t,e.key,e.mode)).elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=14680064&e.flags,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Bh(e,t,r,i,s,n){var o=2;if(i=e,"function"==typeof e)Th(e)&&(o=1);else if("string"==typeof e)o=5;else e:switch(e){case Ce:return Oh(r.children,s,n,t);case xe:o=8,s|=8;break;case ke:return(e=Ah(12,r,t,2|s)).elementType=ke,e.lanes=n,e;case De:return(e=Ah(13,r,t,s)).elementType=De,e.lanes=n,e;case Ae:return(e=Ah(19,r,t,s)).elementType=Ae,e.lanes=n,e;case Be:return Mh(r,s,n,t);default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case Ee:o=10;break e;case Le:o=9;break e;case Re:o=11;break e;case Te:o=14;break e;case Pe:o=16,i=null;break e}throw Error(ne(130,null==e?e:typeof e,""))}return(t=Ah(o,r,t,s)).elementType=e,t.type=i,t.lanes=n,t}function Oh(e,t,r,i){return(e=Ah(7,e,i,t)).lanes=r,e}function Mh(e,t,r,i){return(e=Ah(22,e,i,t)).elementType=Be,e.lanes=r,e.stateNode={isHidden:!1},e}function Nh(e,t,r){return(e=Ah(6,e,null,t)).lanes=r,e}function Ih(e,t,r){return(t=Ah(4,null!==e.children?e.children:[],e.key,t)).lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function jh(e,t,r,i,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=_r(0),this.expirationTimes=_r(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=_r(0),this.identifierPrefix=i,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Hh(e,t,r,i,s,n,o,a,l){return e=new jh(e,t,r,a,l),1===t?(t=1,!0===n&&(t|=8)):t=0,n=Ah(3,null,null,t),e.current=n,n.stateNode=e,n.memoizedState={element:i,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},No(n),e}function Fh(e){if(!e)return En;e:{if(zt(e=e._reactInternals)!==e||1!==e.tag)throw Error(ne(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Tn(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(ne(171))}if(1===e.tag){var r=e.type;if(Tn(r))return On(e,r,t)}return t}function zh(e,t,r,i,s,n,o,a,l){return(e=Hh(r,i,!0,e,0,n,0,a,l)).context=Fh(null),r=e.current,(n=jo(i=Zc(),s=eh(r))).callback=null!=t?t:null,Ho(r,n,s),e.current.lanes=s,vr(e,s,i),rh(e,i),e}function Uh(e,t,r,i){var s=t.current,n=Zc(),o=eh(s);return r=Fh(r),null===t.context?t.context=r:t.pendingContext=r,(t=jo(n,o)).payload={element:e},null!==(i=void 0===i?null:i)&&(t.callback=i),null!==(e=Ho(s,t,o))&&(th(e,s,o,n),Fo(e,s,o)),o}function Wh(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function $h(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var r=e.retryLane;e.retryLane=0!==r&&r<t?r:t}}function qh(e,t){$h(e,t),(e=e.alternate)&&$h(e,t)}wc=function(e,t,r){if(null!==e)if(e.memoizedProps!==t.pendingProps||Rn.current)ml=!0;else{if(0===(e.lanes&r)&&!(128&t.flags))return ml=!1,function(e,t,r){switch(t.tag){case 3:Rl(t),fo();break;case 5:Qo(t);break;case 1:Tn(t.type)&&Mn(t);break;case 4:Xo(t,t.stateNode.containerInfo);break;case 10:var i=t.type._context,s=t.memoizedProps.value;kn(wo,i._currentValue),i._currentValue=s;break;case 13:if(null!==(i=t.memoizedState))return null!==i.dehydrated?(kn(Zo,1&Zo.current),t.flags|=128,null):0!==(r&t.child.childLanes)?Nl(e,t,r):(kn(Zo,1&Zo.current),null!==(e=Wl(e,t,r))?e.sibling:null);kn(Zo,1&Zo.current);break;case 19:if(i=0!==(r&t.childLanes),128&e.flags){if(i)return zl(e,t,r);t.flags|=128}if(null!==(s=t.memoizedState)&&(s.rendering=null,s.tail=null,s.lastEffect=null),kn(Zo,Zo.current),i)break;return null;case 22:case 23:return t.lanes=0,Cl(e,t,r)}return Wl(e,t,r)}(e,t,r);ml=!!(131072&e.flags)}else ml=!1,io&&1048576&t.flags&&Jn(t,qn,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;Ul(e,t),e=t.pendingProps;var s=An(t,Ln.current);Do(t,r),s=_a(null,t,i,e,s,r);var n=va();return t.flags|=1,"object"==typeof s&&null!==s&&"function"==typeof s.render&&void 0===s.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Tn(i)?(n=!0,Mn(t)):n=!1,t.memoizedState=null!==s.state&&void 0!==s.state?s.state:null,No(t),s.updater=il,t.stateNode=s,s._reactInternals=t,al(t,i,e,r),t=Ll(null,t,i,!0,n,r)):(t.tag=0,io&&n&&Zn(t),bl(null,t,s,r),t=t.child),t;case 16:i=t.elementType;e:{switch(Ul(e,t),e=t.pendingProps,i=(s=i._init)(i._payload),t.type=i,s=t.tag=function(e){if("function"==typeof e)return Th(e)?1:0;if(null!=e){if((e=e.$$typeof)===Re)return 11;if(e===Te)return 14}return 2}(i),e=tl(i,e),s){case 0:t=kl(null,t,i,e,r);break e;case 1:t=El(null,t,i,e,r);break e;case 11:t=yl(null,t,i,e,r);break e;case 14:t=Sl(null,t,i,tl(i.type,e),r);break e}throw Error(ne(306,i,""))}return t;case 0:return i=t.type,s=t.pendingProps,kl(e,t,i,s=t.elementType===i?s:tl(i,s),r);case 1:return i=t.type,s=t.pendingProps,El(e,t,i,s=t.elementType===i?s:tl(i,s),r);case 3:e:{if(Rl(t),null===e)throw Error(ne(387));i=t.pendingProps,s=(n=t.memoizedState).element,Io(e,t),Uo(t,i,null,r);var o=t.memoizedState;if(i=o.element,n.isDehydrated){if(n={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=n,t.memoizedState=n,256&t.flags){t=Dl(e,t,i,r,s=ll(Error(ne(423)),t));break e}if(i!==s){t=Dl(e,t,i,r,s=ll(Error(ne(424)),t));break e}for(ro=ln(t.stateNode.containerInfo.firstChild),to=t,io=!0,so=null,r=So(t,null,i,r),t.child=r;r;)r.flags=-3&r.flags|4096,r=r.sibling}else{if(fo(),i===s){t=Wl(e,t,r);break e}bl(e,t,i,r)}t=t.child}return t;case 5:return Qo(t),null===e&&lo(t),i=t.type,s=t.pendingProps,n=null!==e?e.memoizedProps:null,o=s.children,en(i,s)?o=null:null!==n&&en(i,n)&&(t.flags|=32),xl(e,t),bl(e,t,o,r),t.child;case 6:return null===e&&lo(t),null;case 13:return Nl(e,t,r);case 4:return Xo(t,t.stateNode.containerInfo),i=t.pendingProps,null===e?t.child=yo(t,null,i,r):bl(e,t,i,r),t.child;case 11:return i=t.type,s=t.pendingProps,yl(e,t,i,s=t.elementType===i?s:tl(i,s),r);case 7:return bl(e,t,t.pendingProps,r),t.child;case 8:case 12:return bl(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(i=t.type._context,s=t.pendingProps,n=t.memoizedProps,o=s.value,kn(wo,i._currentValue),i._currentValue=o,null!==n)if(ns(n.value,o)){if(n.children===s.children&&!Rn.current){t=Wl(e,t,r);break e}}else for(null!==(n=t.child)&&(n.return=t);null!==n;){var a=n.dependencies;if(null!==a){o=n.child;for(var l=a.firstContext;null!==l;){if(l.context===i){if(1===n.tag){(l=jo(-1,r&-r)).tag=2;var c=n.updateQueue;if(null!==c){var h=(c=c.shared).pending;null===h?l.next=l:(l.next=h.next,h.next=l),c.pending=l}}n.lanes|=r,null!==(l=n.alternate)&&(l.lanes|=r),Ro(n.return,r,t),a.lanes|=r;break}l=l.next}}else if(10===n.tag)o=n.type===t.type?null:n.child;else if(18===n.tag){if(null===(o=n.return))throw Error(ne(341));o.lanes|=r,null!==(a=o.alternate)&&(a.lanes|=r),Ro(o,r,t),o=n.sibling}else o=n.child;if(null!==o)o.return=n;else for(o=n;null!==o;){if(o===t){o=null;break}if(null!==(n=o.sibling)){n.return=o.return,o=n;break}o=o.return}n=o}bl(e,t,s.children,r),t=t.child}return t;case 9:return s=t.type,i=t.pendingProps.children,Do(t,r),i=i(s=Ao(s)),t.flags|=1,bl(e,t,i,r),t.child;case 14:return s=tl(i=t.type,t.pendingProps),Sl(e,t,i,s=tl(i.type,s),r);case 15:return wl(e,t,t.type,t.pendingProps,r);case 17:return i=t.type,s=t.pendingProps,s=t.elementType===i?s:tl(i,s),Ul(e,t),t.tag=1,Tn(i)?(e=!0,Mn(t)):e=!1,Do(t,r),nl(t,i,s),al(t,i,s,r),Ll(null,t,i,!0,e,r);case 19:return zl(e,t,r);case 22:return Cl(e,t,r)}throw Error(ne(156,t.tag))};var Vh="function"==typeof reportError?reportError:function(e){console.error(e)};function Kh(e){this._internalRoot=e}function Gh(e){this._internalRoot=e}function Xh(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Yh(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Qh(){}function Jh(e,t,r,i,s){var n=r._reactRootContainer;if(n){var o=n;if("function"==typeof s){var a=s;s=function(){var e=Wh(o);a.call(e)}}Uh(t,o,e,s)}else o=function(e,t,r,i,s){if(s){if("function"==typeof i){var n=i;i=function(){var e=Wh(o);n.call(e)}}var o=zh(t,i,e,0,null,!1,0,"",Qh);return e._reactRootContainer=o,e[fn]=o.current,Fs(8===e.nodeType?e.parentNode:e),ch(),o}for(;s=e.lastChild;)e.removeChild(s);if("function"==typeof i){var a=i;i=function(){var e=Wh(l);a.call(e)}}var l=Hh(e,0,!1,null,0,!1,0,"",Qh);return e._reactRootContainer=l,e[fn]=l.current,Fs(8===e.nodeType?e.parentNode:e),ch(function(){Uh(t,l,r,i)}),l}(r,t,e,s,i);return Wh(o)}Gh.prototype.render=Kh.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(ne(409));Uh(e,t,null,null)},Gh.prototype.unmount=Kh.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;ch(function(){Uh(null,e,null,null)}),t[fn]=null}},Gh.prototype.unstable_scheduleHydration=function(e){if(e){var t=Cr();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Pr.length&&0!==t&&t<Pr[r].priority;r++);Pr.splice(r,0,e),0===r&&Nr(e)}},yr=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=hr(t.pendingLanes);0!==r&&(gr(t,1|r),rh(t,Yt()),!(6&Lc)&&(zc=Yt()+500,zn()))}break;case 13:ch(function(){var t=Oo(e,1);if(null!==t){var r=Zc();th(t,e,1,r)}}),qh(e,1)}},Sr=function(e){if(13===e.tag){var t=Oo(e,134217728);if(null!==t)th(t,e,134217728,Zc());qh(e,134217728)}},wr=function(e){if(13===e.tag){var t=eh(e),r=Oo(e,t);if(null!==r)th(r,e,t,Zc());qh(e,t)}},Cr=function(){return mr},xr=function(e,t){var r=mr;try{return mr=e,t()}finally{mr=r}},St=function(e,t,r){switch(t){case"input":if(Je(e,r),t=r.name,"radio"===r.type&&null!=t){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var i=r[t];if(i!==e&&i.form===e.form){var s=yn(i);if(!s)throw Error(ne(90));Ke(i),Je(i,s)}}}break;case"textarea":nt(e,r);break;case"select":null!=(t=r.value)&&rt(e,!!r.multiple,t,!1)}},Lt=lh,Rt=ch;var Zh={usingClientEntryPoint:!1,Events:[mn,bn,yn,kt,Et,lh]},eu={findFiberByHostInstance:gn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},tu={bundleType:eu.bundleType,version:eu.version,rendererPackageName:eu.rendererPackageName,rendererConfig:eu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ye.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=$t(e))?null:e.stateNode},findFiberByHostInstance:eu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ru=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ru.isDisabled&&ru.supportsFiber)try{ir=ru.inject(tu),sr=ru}catch(Td){}}Z.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Zh,Z.createPortal=function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Xh(t))throw Error(ne(200));return function(e,t,r){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:we,key:null==i?null:""+i,children:e,containerInfo:t,implementation:r}}(e,t,null,r)},Z.createRoot=function(e,t){if(!Xh(e))throw Error(ne(299));var r=!1,i="",s=Vh;return null!=t&&(!0===t.unstable_strictMode&&(r=!0),void 0!==t.identifierPrefix&&(i=t.identifierPrefix),void 0!==t.onRecoverableError&&(s=t.onRecoverableError)),t=Hh(e,1,!1,null,0,r,0,i,s),e[fn]=t.current,Fs(8===e.nodeType?e.parentNode:e),new Kh(t)},Z.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(ne(188));throw e=Object.keys(e).join(","),Error(ne(268,e))}return e=null===(e=$t(t))?null:e.stateNode},Z.flushSync=function(e){return ch(e)},Z.hydrate=function(e,t,r){if(!Yh(t))throw Error(ne(200));return Jh(null,e,t,!0,r)},Z.hydrateRoot=function(e,t,r){if(!Xh(e))throw Error(ne(405));var i=null!=r&&r.hydratedSources||null,s=!1,n="",o=Vh;if(null!=r&&(!0===r.unstable_strictMode&&(s=!0),void 0!==r.identifierPrefix&&(n=r.identifierPrefix),void 0!==r.onRecoverableError&&(o=r.onRecoverableError)),t=zh(t,null,e,1,null!=r?r:null,s,0,n,o),e[fn]=t.current,Fs(e),i)for(e=0;e<i.length;e++)s=(s=(r=i[e])._getVersion)(r._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[r,s]:t.mutableSourceEagerHydrationData.push(r,s);return new Gh(t)},Z.render=function(e,t,r){if(!Yh(t))throw Error(ne(200));return Jh(null,e,t,!1,r)},Z.unmountComponentAtNode=function(e){if(!Yh(e))throw Error(ne(40));return!!e._reactRootContainer&&(ch(function(){Jh(null,null,e,!1,function(){e._reactRootContainer=null,e[fn]=null})}),!0)},Z.unstable_batchedUpdates=lh,Z.unstable_renderSubtreeIntoContainer=function(e,t,r,i){if(!Yh(r))throw Error(ne(200));if(null==e||void 0===e._reactInternals)throw Error(ne(38));return Jh(e,t,r,!1,i)},Z.version="18.3.1-next-f1338f8080-20240426",function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),J.exports=Z;var iu,su=J.exports;
/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */
function nu(){return nu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},nu.apply(this,arguments)}Q.createRoot=su.createRoot,Q.hydrateRoot=su.hydrateRoot,function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(iu||(iu={}));const ou="popstate";function au(e){return void 0===e&&(e={}),function(e,t,r,i){void 0===i&&(i={});let{window:s=document.defaultView,v5Compat:n=!1}=i,o=s.history,a=iu.Pop,l=null,c=h();null==c&&(c=0,o.replaceState(nu({},o.state,{idx:c}),""));function h(){return(o.state||{idx:null}).idx}function u(){a=iu.Pop;let e=h(),t=null==e?null:e-c;c=e,l&&l({action:a,location:_.location,delta:t})}function d(e,t){a=iu.Push;let r=uu(_.location,e,t);c=h()+1;let i=hu(r,c),u=_.createHref(r);try{o.pushState(i,"",u)}catch(d){if(d instanceof DOMException&&"DataCloneError"===d.name)throw d;s.location.assign(u)}n&&l&&l({action:a,location:_.location,delta:1})}function f(e,t){a=iu.Replace;let r=uu(_.location,e,t);c=h();let i=hu(r,c),s=_.createHref(r);o.replaceState(i,"",s),n&&l&&l({action:a,location:_.location,delta:0})}function p(e){let t="null"!==s.location.origin?s.location.origin:s.location.href,r="string"==typeof e?e:du(e);return r=r.replace(/ $/,"%20"),lu(t,"No window.location.(origin|href) available to create URL for href: "+r),new URL(r,t)}let _={get action(){return a},get location(){return e(s,o)},listen(e){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(ou,u),l=e,()=>{s.removeEventListener(ou,u),l=null}},createHref:e=>t(s,e),createURL:p,encodeLocation(e){let t=p(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:d,replace:f,go:e=>o.go(e)};return _}(function(e,t){let{pathname:r,search:i,hash:s}=e.location;return uu("",{pathname:r,search:i,hash:s},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"==typeof t?t:du(t)},0,e)}function lu(e,t){if(!1===e||null==e)throw new Error(t)}function cu(e,t){if(!e){"undefined"!=typeof console&&console.warn(t);try{throw new Error(t)}catch(Rd){}}}function hu(e,t){return{usr:e.state,key:e.key,idx:t}}function uu(e,t,r,i){return void 0===r&&(r=null),nu({pathname:"string"==typeof e?e:e.pathname,search:"",hash:""},"string"==typeof t?fu(t):t,{state:r,key:t&&t.key||i||Math.random().toString(36).substr(2,8)})}function du(e){let{pathname:t="/",search:r="",hash:i=""}=e;return r&&"?"!==r&&(t+="?"===r.charAt(0)?r:"?"+r),i&&"#"!==i&&(t+="#"===i.charAt(0)?i:"#"+i),t}function fu(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let i=e.indexOf("?");i>=0&&(t.search=e.substr(i),e=e.substr(0,i)),e&&(t.pathname=e)}return t}var pu;function _u(e,t,r){return void 0===r&&(r="/"),function(e,t,r){let i="string"==typeof t?fu(t):t,s=Du(i.pathname||"/",r);if(null==s)return null;let n=vu(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let r=e.length===t.length&&e.slice(0,-1).every((e,r)=>e===t[r]);return r?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(n);let o=null;for(let a=0;null==o&&a<n.length;++a){let e=Ru(s);o=Eu(n[a],e)}return o}(e,t,r)}function vu(e,t,r,i){void 0===t&&(t=[]),void 0===r&&(r=[]),void 0===i&&(i="");let s=(e,s,n)=>{let o={relativePath:void 0===n?e.path||"":n,caseSensitive:!0===e.caseSensitive,childrenIndex:s,route:e};o.relativePath.startsWith("/")&&(lu(o.relativePath.startsWith(i),'Absolute route path "'+o.relativePath+'" nested under path "'+i+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),o.relativePath=o.relativePath.slice(i.length));let a=Nu([i,o.relativePath]),l=r.concat(o);e.children&&e.children.length>0&&(lu(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+a+'".'),vu(e.children,t,l,a)),(null!=e.path||e.index)&&t.push({path:a,score:ku(a,e.index),routesMeta:l})};return e.forEach((e,t)=>{var r;if(""!==e.path&&null!=(r=e.path)&&r.includes("?"))for(let i of gu(e.path))s(e,t,i);else s(e,t)}),t}function gu(e){let t=e.split("/");if(0===t.length)return[];let[r,...i]=t,s=r.endsWith("?"),n=r.replace(/\?$/,"");if(0===i.length)return s?[n,""]:[n];let o=gu(i.join("/")),a=[];return a.push(...o.map(e=>""===e?n:[n,e].join("/"))),s&&a.push(...o),a.map(t=>e.startsWith("/")&&""===t?"/":t)}!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(pu||(pu={}));const mu=/^:[\w-]+$/,bu=3,yu=2,Su=1,wu=10,Cu=-2,xu=e=>"*"===e;function ku(e,t){let r=e.split("/"),i=r.length;return r.some(xu)&&(i+=Cu),t&&(i+=yu),r.filter(e=>!xu(e)).reduce((e,t)=>e+(mu.test(t)?bu:""===t?Su:wu),i)}function Eu(e,t,r){let{routesMeta:i}=e,s={},n="/",o=[];for(let a=0;a<i.length;++a){let e=i[a],r=a===i.length-1,l="/"===n?t:t.slice(n.length)||"/",c=Lu({path:e.relativePath,caseSensitive:e.caseSensitive,end:r},l),h=e.route;if(!c)return null;Object.assign(s,c.params),o.push({params:s,pathname:Nu([n,c.pathname]),pathnameBase:Iu(Nu([n,c.pathnameBase])),route:h}),"/"!==c.pathnameBase&&(n=Nu([n,c.pathnameBase]))}return o}function Lu(e,t){"string"==typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[r,i]=function(e,t,r){void 0===t&&(t=!1);void 0===r&&(r=!0);cu("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let i=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,r)=>(i.push({paramName:t,isOptional:null!=r}),r?"/?([^\\/]+)?":"/([^\\/]+)"));e.endsWith("*")?(i.push({paramName:"*"}),s+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":""!==e&&"/"!==e&&(s+="(?:(?=\\/|$))");let n=new RegExp(s,t?void 0:"i");return[n,i]}(e.path,e.caseSensitive,e.end),s=t.match(r);if(!s)return null;let n=s[0],o=n.replace(/(.)\/+$/,"$1"),a=s.slice(1),l=i.reduce((e,t,r)=>{let{paramName:i,isOptional:s}=t;if("*"===i){let e=a[r]||"";o=n.slice(0,n.length-e.length).replace(/(.)\/+$/,"$1")}const l=a[r];return e[i]=s&&!l?void 0:(l||"").replace(/%2F/g,"/"),e},{});return{params:l,pathname:n,pathnameBase:o,pattern:e}}function Ru(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return cu(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function Du(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,i=e.charAt(r);return i&&"/"!==i?null:e.slice(r)||"/"}const Au=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function Tu(e,t){void 0===t&&(t="/");let r,{pathname:i,search:s="",hash:n=""}="string"==typeof e?fu(e):e;if(i)if((e=>Au.test(e))(i))r=i;else{if(i.includes("//")){let e=i;i=i.replace(/\/\/+/g,"/"),cu(!1,"Pathnames cannot have embedded double slashes - normalizing "+e+" -> "+i)}r=i.startsWith("/")?Pu(i.substring(1),"/"):Pu(i,t)}else r=t;return{pathname:r,search:ju(s),hash:Hu(n)}}function Pu(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?r.length>1&&r.pop():"."!==e&&r.push(e)}),r.length>1?r.join("/"):"/"}function Bu(e,t,r,i){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(i)+"].  Please separate it out to the `to."+r+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function Ou(e,t){let r=function(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}(e);return t?r.map((e,t)=>t===r.length-1?e.pathname:e.pathnameBase):r.map(e=>e.pathnameBase)}function Mu(e,t,r,i){let s;void 0===i&&(i=!1),"string"==typeof e?s=fu(e):(s=nu({},e),lu(!s.pathname||!s.pathname.includes("?"),Bu("?","pathname","search",s)),lu(!s.pathname||!s.pathname.includes("#"),Bu("#","pathname","hash",s)),lu(!s.search||!s.search.includes("#"),Bu("#","search","hash",s)));let n,o=""===e||""===s.pathname,a=o?"/":s.pathname;if(null==a)n=r;else{let e=t.length-1;if(!i&&a.startsWith("..")){let t=a.split("/");for(;".."===t[0];)t.shift(),e-=1;s.pathname=t.join("/")}n=e>=0?t[e]:"/"}let l=Tu(s,n),c=a&&"/"!==a&&a.endsWith("/"),h=(o||"."===a)&&r.endsWith("/");return l.pathname.endsWith("/")||!c&&!h||(l.pathname+="/"),l}const Nu=e=>e.join("/").replace(/\/\/+/g,"/"),Iu=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),ju=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",Hu=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";const Fu=["post","put","patch","delete"];new Set(Fu);const zu=["get",...Fu];
/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */
function Uu(){return Uu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},Uu.apply(this,arguments)}new Set(zu);const Wu=F.createContext(null),$u=F.createContext(null),qu=F.createContext(null),Vu=F.createContext(null),Ku=F.createContext({outlet:null,matches:[],isDataRoute:!1}),Gu=F.createContext(null);function Xu(){return null!=F.useContext(Vu)}function Yu(){return Xu()||lu(!1),F.useContext(Vu).location}function Qu(e){F.useContext(qu).static||F.useLayoutEffect(e)}function Ju(){let{isDataRoute:e}=F.useContext(Ku);return e?function(){let{router:e}=function(){let e=F.useContext(Wu);return e||lu(!1),e}(nd.UseNavigateStable),t=ad(od.UseNavigateStable),r=F.useRef(!1);Qu(()=>{r.current=!0});let i=F.useCallback(function(i,s){void 0===s&&(s={}),r.current&&("number"==typeof i?e.navigate(i):e.navigate(i,Uu({fromRouteId:t},s)))},[e,t]);return i}():function(){Xu()||lu(!1);let e=F.useContext(Wu),{basename:t,future:r,navigator:i}=F.useContext(qu),{matches:s}=F.useContext(Ku),{pathname:n}=Yu(),o=JSON.stringify(Ou(s,r.v7_relativeSplatPath)),a=F.useRef(!1);return Qu(()=>{a.current=!0}),F.useCallback(function(r,s){if(void 0===s&&(s={}),!a.current)return;if("number"==typeof r)return void i.go(r);let l=Mu(r,JSON.parse(o),n,"path"===s.relative);null==e&&"/"!==t&&(l.pathname="/"===l.pathname?t:Nu([t,l.pathname])),(s.replace?i.replace:i.push)(l,s.state,s)},[t,i,o,n,e])}()}function Zu(e,t){let{relative:r}=void 0===t?{}:t,{future:i}=F.useContext(qu),{matches:s}=F.useContext(Ku),{pathname:n}=Yu(),o=JSON.stringify(Ou(s,i.v7_relativeSplatPath));return F.useMemo(()=>Mu(e,JSON.parse(o),n,"path"===r),[e,o,n,r])}function ed(e,t){return function(e,t,r,i){Xu()||lu(!1);let{navigator:s}=F.useContext(qu),{matches:n}=F.useContext(Ku),o=n[n.length-1],a=o?o.params:{};!o||o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c,h=Yu();if(t){var u;let e="string"==typeof t?fu(t):t;"/"===l||(null==(u=e.pathname)?void 0:u.startsWith(l))||lu(!1),c=e}else c=h;let d=c.pathname||"/",f=d;if("/"!==l){let e=l.replace(/^\//,"").split("/");f="/"+d.replace(/^\//,"").split("/").slice(e.length).join("/")}let p=_u(e,{pathname:f}),_=function(e,t,r,i){var s;void 0===t&&(t=[]);void 0===r&&(r=null);void 0===i&&(i=null);if(null==e){var n;if(!r)return null;if(r.errors)e=r.matches;else{if(!(null!=(n=i)&&n.v7_partialHydration&&0===t.length&&!r.initialized&&r.matches.length>0))return null;e=r.matches}}let o=e,a=null==(s=r)?void 0:s.errors;if(null!=a){let e=o.findIndex(e=>e.route.id&&void 0!==(null==a?void 0:a[e.route.id]));e>=0||lu(!1),o=o.slice(0,Math.min(o.length,e+1))}let l=!1,c=-1;if(r&&i&&i.v7_partialHydration)for(let h=0;h<o.length;h++){let e=o[h];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(c=h),e.route.id){let{loaderData:t,errors:i}=r,s=e.route.loader&&void 0===t[e.route.id]&&(!i||void 0===i[e.route.id]);if(e.route.lazy||s){l=!0,o=c>=0?o.slice(0,c+1):[o[0]];break}}}return o.reduceRight((e,i,s)=>{let n,h=!1,u=null,d=null;var f;r&&(n=a&&i.route.id?a[i.route.id]:void 0,u=i.route.errorElement||rd,l&&(c<0&&0===s?(ld[f="route-fallback"]||(ld[f]=!0),h=!0,d=null):c===s&&(h=!0,d=i.route.hydrateFallbackElement||null)));let p=t.concat(o.slice(0,s+1)),_=()=>{let t;return t=n?u:h?d:i.route.Component?F.createElement(i.route.Component,null):i.route.element?i.route.element:e,F.createElement(sd,{match:i,routeContext:{outlet:e,matches:p,isDataRoute:null!=r},children:t})};return r&&(i.route.ErrorBoundary||i.route.errorElement||0===s)?F.createElement(id,{location:r.location,revalidation:r.revalidation,component:u,error:n,children:_(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):_()},null)}(p&&p.map(e=>Object.assign({},e,{params:Object.assign({},a,e.params),pathname:Nu([l,s.encodeLocation?s.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?l:Nu([l,s.encodeLocation?s.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),n,r,i);if(t&&_)return F.createElement(Vu.Provider,{value:{location:Uu({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:iu.Pop}},_);return _}(e,t)}function td(){let e=function(){var e;let t=F.useContext(Gu),r=function(){let e=F.useContext($u);return e||lu(!1),e}(),i=ad();if(void 0!==t)return t;return null==(e=r.errors)?void 0:e[i]}(),t=function(e){return null!=e&&"number"==typeof e.status&&"string"==typeof e.statusText&&"boolean"==typeof e.internal&&"data"in e}(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return F.createElement(F.Fragment,null,F.createElement("h2",null,"Unexpected Application Error!"),F.createElement("h3",{style:{fontStyle:"italic"}},t),r?F.createElement("pre",{style:i},r):null,null)}const rd=F.createElement(td,null);class id extends F.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?F.createElement(Ku.Provider,{value:this.props.routeContext},F.createElement(Gu.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function sd(e){let{routeContext:t,match:r,children:i}=e,s=F.useContext(Wu);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),F.createElement(Ku.Provider,{value:t},i)}var nd=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(nd||{}),od=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(od||{});function ad(e){let t=function(){let e=F.useContext(Ku);return e||lu(!1),e}(),r=t.matches[t.matches.length-1];return r.route.id||lu(!1),r.route.id}const ld={};function cd(e){let{to:t,replace:r,state:i,relative:s}=e;Xu()||lu(!1);let{future:n,static:o}=F.useContext(qu),{matches:a}=F.useContext(Ku),{pathname:l}=Yu(),c=Ju(),h=Mu(t,Ou(a,n.v7_relativeSplatPath),l,"path"===s),u=JSON.stringify(h);return F.useEffect(()=>c(JSON.parse(u),{replace:r,state:i,relative:s}),[c,u,s,r,i]),null}function hd(e){lu(!1)}function ud(e){let{basename:t="/",children:r=null,location:i,navigationType:s=iu.Pop,navigator:n,static:o=!1,future:a}=e;Xu()&&lu(!1);let l=t.replace(/^\/*/,"/"),c=F.useMemo(()=>({basename:l,navigator:n,static:o,future:Uu({v7_relativeSplatPath:!1},a)}),[l,a,n,o]);"string"==typeof i&&(i=fu(i));let{pathname:h="/",search:u="",hash:d="",state:f=null,key:p="default"}=i,_=F.useMemo(()=>{let e=Du(h,l);return null==e?null:{location:{pathname:e,search:u,hash:d,state:f,key:p},navigationType:s}},[l,h,u,d,f,p,s]);return null==_?null:F.createElement(qu.Provider,{value:c},F.createElement(Vu.Provider,{children:r,value:_}))}function dd(e){let{children:t,location:r}=e;return ed(fd(t),r)}function fd(e,t){void 0===t&&(t=[]);let r=[];return F.Children.forEach(e,(e,i)=>{if(!F.isValidElement(e))return;let s=[...t,i];if(e.type===F.Fragment)return void r.push.apply(r,fd(e.props.children,s));e.type!==hd&&lu(!1),e.props.index&&e.props.children&&lu(!1);let n={id:e.props.id||s.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(n.children=fd(e.props.children,s)),r.push(n)}),r}
/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function pd(){return pd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},pd.apply(this,arguments)}new Promise(()=>{});const _d=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"];try{window.__reactRouterVersion="6"}catch(Rd){}const vd=U.startTransition;function gd(e){let{basename:t,children:r,future:i,window:s}=e,n=F.useRef();null==n.current&&(n.current=au({window:s,v5Compat:!0}));let o=n.current,[a,l]=F.useState({action:o.action,location:o.location}),{v7_startTransition:c}=i||{},h=F.useCallback(e=>{c&&vd?vd(()=>l(e)):l(e)},[l,c]);return F.useLayoutEffect(()=>o.listen(h),[o,h]),F.useEffect(()=>{return null==(e=i)||e.v7_startTransition,void(null==e||e.v7_relativeSplatPath);var e},[i]),F.createElement(ud,{basename:t,children:r,location:a.location,navigationType:a.action,navigator:o,future:i})}const md="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement,bd=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,yd=F.forwardRef(function(e,t){let r,{onClick:i,relative:s,reloadDocument:n,replace:o,state:a,target:l,to:c,preventScrollReset:h,viewTransition:u}=e,d=function(e,t){if(null==e)return{};var r,i,s={},n=Object.keys(e);for(i=0;i<n.length;i++)r=n[i],t.indexOf(r)>=0||(s[r]=e[r]);return s}(e,_d),{basename:f}=F.useContext(qu),p=!1;if("string"==typeof c&&bd.test(c)&&(r=c,md))try{let e=new URL(window.location.href),t=c.startsWith("//")?new URL(e.protocol+c):new URL(c),r=Du(t.pathname,f);t.origin===e.origin&&null!=r?c=r+t.search+t.hash:p=!0}catch(Rd){}let _=function(e,t){let{relative:r}=void 0===t?{}:t;Xu()||lu(!1);let{basename:i,navigator:s}=F.useContext(qu),{hash:n,pathname:o,search:a}=Zu(e,{relative:r}),l=o;return"/"!==i&&(l="/"===o?i:Nu([i,o])),s.createHref({pathname:l,search:a,hash:n})}(c,{relative:s}),v=function(e,t){let{target:r,replace:i,state:s,preventScrollReset:n,relative:o,viewTransition:a}=void 0===t?{}:t,l=Ju(),c=Yu(),h=Zu(e,{relative:o});return F.useCallback(t=>{if(function(e,t){return!(0!==e.button||t&&"_self"!==t||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e))}(t,r)){t.preventDefault();let r=void 0!==i?i:du(c)===du(h);l(e,{replace:r,state:s,preventScrollReset:n,relative:o,viewTransition:a})}},[c,l,h,i,s,r,e,n,o,a])}(c,{replace:o,state:a,target:l,preventScrollReset:h,relative:s,viewTransition:u});return F.createElement("a",pd({},d,{href:r||_,onClick:p||n?i:function(e){i&&i(e),e.defaultPrevented||v(e)},ref:t,target:l}))});var Sd,wd,Cd,xd;(wd=Sd||(Sd={})).UseScrollRestoration="useScrollRestoration",wd.UseSubmit="useSubmit",wd.UseSubmitFetcher="useSubmitFetcher",wd.UseFetcher="useFetcher",wd.useViewTransitionState="useViewTransitionState",(xd=Cd||(Cd={})).UseFetcher="useFetcher",xd.UseFetchers="useFetchers",xd.UseScrollRestoration="useScrollRestoration";let kd,Ed,Ld,Rd={data:""},Dd=e=>{if("object"==typeof window){let t=(e?e.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return t.nonce=window.__nonce__,t.parentNode||(e||document.head).appendChild(t),t.firstChild}return e||Rd},Ad=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,Td=/\/\*[^]*?\*\/|  +/g,Pd=/\n+/g,Bd=(e,t)=>{let r="",i="",s="";for(let n in e){let o=e[n];"@"==n[0]?"i"==n[1]?r=n+" "+o+";":i+="f"==n[1]?Bd(o,n):n+"{"+Bd(o,"k"==n[1]?"":t)+"}":"object"==typeof o?i+=Bd(o,t?t.replace(/([^,])+/g,e=>n.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,t=>/&/.test(t)?t.replace(/&/g,e):e?e+" "+t:t)):n):null!=o&&(n=/^--/.test(n)?n:n.replace(/[A-Z]/g,"-$&").toLowerCase(),s+=Bd.p?Bd.p(n,o):n+":"+o+";")}return r+(t&&s?t+"{"+s+"}":s)+i},Od={},Md=e=>{if("object"==typeof e){let t="";for(let r in e)t+=r+Md(e[r]);return t}return e},Nd=(e,t,r,i,s)=>{let n=Md(e),o=Od[n]||(Od[n]=(e=>{let t=0,r=11;for(;t<e.length;)r=101*r+e.charCodeAt(t++)>>>0;return"go"+r})(n));if(!Od[o]){let t=n!==e?e:(e=>{let t,r,i=[{}];for(;t=Ad.exec(e.replace(Td,""));)t[4]?i.shift():t[3]?(r=t[3].replace(Pd," ").trim(),i.unshift(i[0][r]=i[0][r]||{})):i[0][t[1]]=t[2].replace(Pd," ").trim();return i[0]})(e);Od[o]=Bd(s?{["@keyframes "+o]:t}:t,r?"":"."+o)}let a=r&&Od.g?Od.g:null;return r&&(Od.g=Od[o]),((e,t,r,i)=>{i?t.data=t.data.replace(i,e):-1===t.data.indexOf(e)&&(t.data=r?e+t.data:t.data+e)})(Od[o],t,i,a),o};function Id(e){let t=this||{},r=e.call?e(t.p):e;return Nd(r.unshift?r.raw?((e,t,r)=>e.reduce((e,i,s)=>{let n=t[s];if(n&&n.call){let e=n(r),t=e&&e.props&&e.props.className||/^go/.test(e)&&e;n=t?"."+t:e&&"object"==typeof e?e.props?"":Bd(e,""):!1===e?"":e}return e+i+(null==n?"":n)},""))(r,[].slice.call(arguments,1),t.p):r.reduce((e,r)=>Object.assign(e,r&&r.call?r(t.p):r),{}):r,Dd(t.target),t.g,t.o,t.k)}Id.bind({g:1});let jd=Id.bind({k:1});function Hd(e,t){let r=this||{};return function(){let t=arguments;return function i(s,n){let o=Object.assign({},s),a=o.className||i.className;r.p=Object.assign({theme:Ed&&Ed()},o),r.o=/ *go\d+/.test(a),o.className=Id.apply(r,t)+(a?" "+a:"");let l=e;return e[0]&&(l=o.as||e,delete o.as),Ld&&l[0]&&Ld(o),kd(l,o)}}}var Fd=(e,t)=>(e=>"function"==typeof e)(e)?e(t):e,zd=(()=>{let e=0;return()=>(++e).toString()})(),Ud=(()=>{let e;return()=>{if(void 0===e&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),Wd="default",$d=(e,t)=>{let{toastLimit:r}=e.settings;switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,r)};case 1:return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case 2:let{toast:i}=t;return $d(e,{type:e.toasts.find(e=>e.id===i.id)?1:0,toast:i});case 3:let{toastId:s}=t;return{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,dismissed:!0,visible:!1}:e)};case 4:return void 0===t.toastId?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)};case 5:return{...e,pausedAt:t.time};case 6:let n=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(e=>({...e,pauseDuration:e.pauseDuration+n}))}}},qd=[],Vd={toasts:[],pausedAt:void 0,settings:{toastLimit:20}},Kd={},Gd=(e,t=Wd)=>{Kd[t]=$d(Kd[t]||Vd,e),qd.forEach(([e,r])=>{e===t&&r(Kd[t])})},Xd=e=>Object.keys(Kd).forEach(t=>Gd(e,t)),Yd=(e=Wd)=>t=>{Gd(t,e)},Qd={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},Jd=e=>(t,r)=>{let i=((e,t="blank",r)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...r,id:(null==r?void 0:r.id)||zd()}))(t,e,r);return Yd(i.toasterId||(e=>Object.keys(Kd).find(t=>Kd[t].toasts.some(t=>t.id===e)))(i.id))({type:2,toast:i}),i.id},Zd=(e,t)=>Jd("blank")(e,t);Zd.error=Jd("error"),Zd.success=Jd("success"),Zd.loading=Jd("loading"),Zd.custom=Jd("custom"),Zd.dismiss=(e,t)=>{let r={type:3,toastId:e};t?Yd(t)(r):Xd(r)},Zd.dismissAll=e=>Zd.dismiss(void 0,e),Zd.remove=(e,t)=>{let r={type:4,toastId:e};t?Yd(t)(r):Xd(r)},Zd.removeAll=e=>Zd.remove(void 0,e),Zd.promise=(e,t,r)=>{let i=Zd.loading(t.loading,{...r,...null==r?void 0:r.loading});return"function"==typeof e&&(e=e()),e.then(e=>{let s=t.success?Fd(t.success,e):void 0;return s?Zd.success(s,{id:i,...r,...null==r?void 0:r.success}):Zd.dismiss(i),e}).catch(e=>{let s=t.error?Fd(t.error,e):void 0;s?Zd.error(s,{id:i,...r,...null==r?void 0:r.error}):Zd.dismiss(i)}),e};var ef=(e,t="default")=>{let{toasts:r,pausedAt:i}=((e={},t=Wd)=>{let[r,i]=F.useState(Kd[t]||Vd),s=F.useRef(Kd[t]);F.useEffect(()=>(s.current!==Kd[t]&&i(Kd[t]),qd.push([t,i]),()=>{let e=qd.findIndex(([e])=>e===t);e>-1&&qd.splice(e,1)}),[t]);let n=r.toasts.map(t=>{var r,i,s;return{...e,...e[t.type],...t,removeDelay:t.removeDelay||(null==(r=e[t.type])?void 0:r.removeDelay)||(null==e?void 0:e.removeDelay),duration:t.duration||(null==(i=e[t.type])?void 0:i.duration)||(null==e?void 0:e.duration)||Qd[t.type],style:{...e.style,...null==(s=e[t.type])?void 0:s.style,...t.style}}});return{...r,toasts:n}})(e,t),s=F.useRef(new Map).current,n=F.useCallback((e,t=1e3)=>{if(s.has(e))return;let r=setTimeout(()=>{s.delete(e),o({type:4,toastId:e})},t);s.set(e,r)},[]);F.useEffect(()=>{if(i)return;let e=Date.now(),s=r.map(r=>{if(r.duration===1/0)return;let i=(r.duration||0)+r.pauseDuration-(e-r.createdAt);if(!(i<0))return setTimeout(()=>Zd.dismiss(r.id,t),i);r.visible&&Zd.dismiss(r.id)});return()=>{s.forEach(e=>e&&clearTimeout(e))}},[r,i,t]);let o=F.useCallback(Yd(t),[t]),a=F.useCallback(()=>{o({type:5,time:Date.now()})},[o]),l=F.useCallback((e,t)=>{o({type:1,toast:{id:e,height:t}})},[o]),c=F.useCallback(()=>{i&&o({type:6,time:Date.now()})},[i,o]),h=F.useCallback((e,t)=>{let{reverseOrder:i=!1,gutter:s=8,defaultPosition:n}=t||{},o=r.filter(t=>(t.position||n)===(e.position||n)&&t.height),a=o.findIndex(t=>t.id===e.id),l=o.filter((e,t)=>t<a&&e.visible).length;return o.filter(e=>e.visible).slice(...i?[l+1]:[0,l]).reduce((e,t)=>e+(t.height||0)+s,0)},[r]);return F.useEffect(()=>{r.forEach(e=>{if(e.dismissed)n(e.id,e.removeDelay);else{let t=s.get(e.id);t&&(clearTimeout(t),s.delete(e.id))}})},[r,n]),{toasts:r,handlers:{updateHeight:l,startPause:a,endPause:c,calculateOffset:h}}},tf=jd`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,rf=jd`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,sf=jd`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,nf=Hd("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${tf} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${rf} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${sf} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,of=jd`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,af=Hd("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${of} 1s linear infinite;
`,lf=jd`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,cf=jd`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,hf=Hd("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${lf} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${cf} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,uf=Hd("div")`
  position: absolute;
`,df=Hd("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,ff=jd`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,pf=Hd("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${ff} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,_f=({toast:e})=>{let{icon:t,type:r,iconTheme:i}=e;return void 0!==t?"string"==typeof t?F.createElement(pf,null,t):t:"blank"===r?null:F.createElement(df,null,F.createElement(af,{...i}),"loading"!==r&&F.createElement(uf,null,"error"===r?F.createElement(nf,{...i}):F.createElement(hf,{...i})))},vf=e=>`\n0% {transform: translate3d(0,${-200*e}%,0) scale(.6); opacity:.5;}\n100% {transform: translate3d(0,0,0) scale(1); opacity:1;}\n`,gf=e=>`\n0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}\n100% {transform: translate3d(0,${-150*e}%,-1px) scale(.6); opacity:0;}\n`,mf=Hd("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,bf=Hd("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,yf=F.memo(({toast:e,position:t,style:r,children:i})=>{let s=e.height?((e,t)=>{let r=e.includes("top")?1:-1,[i,s]=Ud()?["0%{opacity:0;} 100%{opacity:1;}","0%{opacity:1;} 100%{opacity:0;}"]:[vf(r),gf(r)];return{animation:t?`${jd(i)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${jd(s)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}})(e.position||t||"top-center",e.visible):{opacity:0},n=F.createElement(_f,{toast:e}),o=F.createElement(bf,{...e.ariaProps},Fd(e.message,e));return F.createElement(mf,{className:e.className,style:{...s,...r,...e.style}},"function"==typeof i?i({icon:n,message:o}):F.createElement(F.Fragment,null,n,o))});!function(e,t,r,i){Bd.p=t,kd=e,Ed=r,Ld=i}(F.createElement);var Sf=({id:e,className:t,style:r,onHeightUpdate:i,children:s})=>{let n=F.useCallback(t=>{if(t){let r=()=>{let r=t.getBoundingClientRect().height;i(e,r)};r(),new MutationObserver(r).observe(t,{subtree:!0,childList:!0,characterData:!0})}},[e,i]);return F.createElement("div",{ref:n,className:t,style:r},s)},wf=Id`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Cf=({reverseOrder:e,position:t="top-center",toastOptions:r,gutter:i,children:s,toasterId:n,containerStyle:o,containerClassName:a})=>{let{toasts:l,handlers:c}=ef(r,n);return F.createElement("div",{"data-rht-toaster":n||"",style:{position:"fixed",zIndex:9999,top:16,left:16,right:16,bottom:16,pointerEvents:"none",...o},className:a,onMouseEnter:c.startPause,onMouseLeave:c.endPause},l.map(r=>{let n=r.position||t,o=((e,t)=>{let r=e.includes("top"),i=r?{top:0}:{bottom:0},s=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:Ud()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(r?1:-1)}px)`,...i,...s}})(n,c.calculateOffset(r,{reverseOrder:e,gutter:i,defaultPosition:t}));return F.createElement(Sf,{id:r.id,key:r.id,onHeightUpdate:c.updateHeight,className:r.visible?wf:"",style:o},"custom"===r.type?Fd(r.message,r):s?s(r):F.createElement(yf,{toast:r,position:n}))}))},xf=Zd,kf={};const Ef=F.createContext(),Lf=({children:e})=>{const[t,r]=F.useState(null),[i,s]=F.useState(null),[n,o]=F.useState(!0),[a,l]=F.useState(!1),[c,h]=F.useState(null);F.useEffect(()=>{const e=localStorage.getItem("token"),t=localStorage.getItem("user");if(e&&t)try{s(e),r(JSON.parse(t)),l(!0)}catch(i){console.error("[Auth] Error parsing stored user:",i),localStorage.removeItem("token"),localStorage.removeItem("user"),l(!1)}o(!1)},[]);const u={user:t,token:i,loading:n,isAuthenticated:a,error:c,login:async(e,t)=>{o(!0),h(null);try{const i=await fetch(`${kf.REACT_APP_API_URL||"http://localhost:3002"}/api/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})}),n=await i.json();if(!i.ok)throw new Error(n.message||"Login failed");return localStorage.setItem("token",n.token),localStorage.setItem("user",JSON.stringify(n.user)),s(n.token),r(n.user),l(!0),{success:!0,message:"Logged in successfully"}}catch(i){const e=i.message||"Login error";return h(e),l(!1),{success:!1,message:e}}finally{o(!1)}},register:async(e,t,i)=>{o(!0),h(null);try{const n=await fetch(`${kf.REACT_APP_API_URL||"http://localhost:3002"}/api/auth/register`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,username:t,password:i})}),o=await n.json();if(!n.ok)throw new Error(o.message||"Registration failed");return localStorage.setItem("token",o.token),localStorage.setItem("user",JSON.stringify(o.user)),s(o.token),r(o.user),l(!0),{success:!0,message:"Account created successfully"}}catch(n){const e=n.message||"Registration error";return h(e),{success:!1,message:e}}finally{o(!1)}},logout:()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),s(null),r(null),l(!1),h(null)},clearError:()=>{h(null)}};return Y.jsx(Ef.Provider,{value:u,children:e})},Rf=()=>{const e=F.useContext(Ef);if(!e)throw new Error("useAuth must be used within AuthProvider");return e},Df=({children:e})=>{const{isAuthenticated:t,loading:r}=Rf();return r?Y.jsx("div",{className:"min-h-screen flex items-center justify-center bg-brand.darker",children:Y.jsx("div",{className:"text-white text-center",children:Y.jsxs("div",{className:"inline-block",children:[Y.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-accent border-opacity-75 mb-4"}),Y.jsx("p",{children:"Loading..."})]})})}):t?e:Y.jsx(cd,{to:"/login",replace:!0})},Af=e=>{const t=(e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()))(e);return t.charAt(0).toUpperCase()+t.slice(1)},Tf=(...e)=>e.filter((e,t,r)=>Boolean(e)&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim(),Pf=e=>{for(const t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
var Bf={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Of=F.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:i,className:s="",children:n,iconNode:o,...a},l)=>F.createElement("svg",{ref:l,...Bf,width:t,height:t,stroke:e,strokeWidth:i?24*Number(r)/Number(t):r,className:Tf("lucide",s),...!n&&!Pf(a)&&{"aria-hidden":"true"},...a},[...o.map(([e,t])=>F.createElement(e,t)),...Array.isArray(n)?n:[n]])),Mf=(e,t)=>{const r=F.forwardRef(({className:r,...i},s)=>{return F.createElement(Of,{ref:s,iconNode:t,className:Tf(`lucide-${n=Af(e),n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${e}`,r),...i});var n});return r.displayName=Af(e),r},Nf=Mf("bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]]),If=Mf("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),jf=Mf("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),Hf=Mf("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),Ff=Mf("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),zf=Mf("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),Uf=Mf("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),Wf=Mf("cpu",[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]]),$f=Mf("credit-card",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]),qf=Mf("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]),Vf=Mf("file-code",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 12.5 8 15l2 2.5",key:"1tg20x"}],["path",{d:"m14 12.5 2 2.5-2 2.5",key:"yinavb"}]]),Kf=Mf("file-text",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]),Gf=Mf("folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]),Xf=Mf("hard-drive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]]),Yf=Mf("layout-dashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]),Qf=Mf("life-buoy",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.93 4.93 4.24 4.24",key:"1ymg45"}],["path",{d:"m14.83 9.17 4.24-4.24",key:"1cb5xl"}],["path",{d:"m14.83 14.83 4.24 4.24",key:"q42g0n"}],["path",{d:"m9.17 14.83-4.24 4.24",key:"bqpfvv"}],["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}]]),Jf=Mf("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),Zf=Mf("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]]),ep=Mf("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]]),tp=Mf("play",[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]]),rp=Mf("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),ip=Mf("rotate-cw",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]]),sp=Mf("server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]),np=Mf("settings",[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),op=Mf("shield-check",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),ap=Mf("skull",[["path",{d:"m12.5 17-.5-1-.5 1h1z",key:"3me087"}],["path",{d:"M15 22a1 1 0 0 0 1-1v-1a2 2 0 0 0 1.56-3.25 8 8 0 1 0-11.12 0A2 2 0 0 0 8 20v1a1 1 0 0 0 1 1z",key:"1o5pge"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}]]),lp=Mf("square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]),cp=Mf("terminal",[["path",{d:"M12 19h8",key:"baeox8"}],["path",{d:"m4 17 6-6-6-6",key:"1yngyt"}]]),hp=Mf("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]),up=Mf("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]),dp=Mf("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),fp=Mf("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */function pp(){const e=Ju(),{login:t}=Rf(),[r,i]=F.useState(!1),[s,n]=F.useState({email:"",password:""}),o=e=>{n({...s,[e.target.name]:e.target.value})};return Y.jsx("div",{className:"min-h-screen bg-gradient-to-br from-brand.darkest to-brand.darker flex items-center justify-center p-4",children:Y.jsx("div",{className:"w-full max-w-md",children:Y.jsxs("div",{className:"bg-brand.darker/80 backdrop-blur-xl p-8 rounded-3xl border border-brand.border shadow-2xl",children:[Y.jsx("div",{className:"flex justify-center mb-8",children:Y.jsx("div",{className:"w-12 h-12 bg-accent rounded-xl flex items-center justify-center",children:Y.jsx("span",{className:"text-white font-bold text-xl",children:""})})}),Y.jsx("h1",{className:"text-3xl font-bold text-center mb-2",children:"Welcome Back"}),Y.jsx("p",{className:"text-center text-slate-400 mb-8",children:"Sign in to LightNode Hosting"}),Y.jsxs("form",{onSubmit:async r=>{if(r.preventDefault(),s.email&&s.password){i(!0);try{const r=await t(s.email,s.password);r.success?(xf.success(" Logged in successfully!"),setTimeout(()=>e("/dashboard"),500)):xf.error(r.message||"Login failed")}catch(n){console.error("Login error:",n),xf.error("Connection error: "+n.message)}finally{i(!1)}}else xf.error("Please fill in all fields")},className:"space-y-4",children:[Y.jsxs("div",{children:[Y.jsx("label",{className:"block text-sm text-slate-300 mb-2",children:"Email Address"}),Y.jsxs("div",{className:"relative",children:[Y.jsx(ep,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-500",size:18}),Y.jsx("input",{type:"email",name:"email",value:s.email,onChange:o,placeholder:"you@example.com",className:"w-full bg-white border border-brand.border rounded-lg p-3 pl-10 text-black placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-accent transition"})]})]}),Y.jsxs("div",{children:[Y.jsx("label",{className:"block text-sm text-slate-300 mb-2",children:"Password"}),Y.jsxs("div",{className:"relative",children:[Y.jsx(Jf,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-500",size:18}),Y.jsx("input",{type:"password",name:"password",value:s.password,onChange:o,placeholder:"",className:"w-full bg-white border border-brand.border rounded-lg p-3 pl-10 text-black placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-accent transition"})]})]}),Y.jsx("button",{type:"submit",disabled:r,className:"w-full bg-accent hover:bg-accent/90 disabled:bg-slate-600 text-white font-bold py-3 rounded-lg transition duration-200 mt-6",children:r?" Signing In...":" Sign In"})]}),Y.jsxs("div",{className:"flex items-center my-6",children:[Y.jsx("div",{className:"flex-1 border-t border-brand.border"}),Y.jsx("span",{className:"px-3 text-slate-500 text-sm",children:"New to LightNode?"}),Y.jsx("div",{className:"flex-1 border-t border-brand.border"})]}),Y.jsx("p",{className:"text-center text-slate-400 text-sm",children:Y.jsx(yd,{to:"/register",className:"text-accent hover:underline font-semibold",children:"Create an account"})})]})})})}function _p(){const e=Ju(),{register:t}=Rf(),[r,i]=F.useState(!1),[s,n]=F.useState({username:"",email:"",password:"",confirmPassword:""}),[o,a]=F.useState({}),l=e=>{const{name:t,value:r}=e.target;n({...s,[t]:r}),o[t]&&a({...o,[t]:""})};return Y.jsx("div",{className:"min-h-screen bg-gradient-to-br from-brand.darkest to-brand.darker flex items-center justify-center p-4",children:Y.jsx("div",{className:"w-full max-w-md",children:Y.jsxs("div",{className:"bg-brand.darker/80 backdrop-blur-xl p-8 rounded-3xl border border-brand.border shadow-2xl",children:[Y.jsx("div",{className:"flex justify-center mb-8",children:Y.jsx("div",{className:"w-12 h-12 bg-accent rounded-xl flex items-center justify-center",children:Y.jsx("span",{className:"text-white font-bold text-xl",children:""})})}),Y.jsx("h1",{className:"text-3xl font-bold text-center mb-2",children:"Create Account"}),Y.jsx("p",{className:"text-center text-slate-400 mb-8",children:"Join LightNode Hosting"}),Y.jsxs("form",{onSubmit:async r=>{if(r.preventDefault(),(()=>{const e={};return(!s.username||s.username.length<3)&&(e.username="Username must be at least 3 characters"),s.email&&/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s.email)||(e.email="Please enter a valid email"),(!s.password||s.password.length<6)&&(e.password="Password must be at least 6 characters"),s.password!==s.confirmPassword&&(e.confirmPassword="Passwords do not match"),a(e),0===Object.keys(e).length})()){i(!0);try{const r=await t(s.email,s.username,s.password);r.success?(xf.success(" Account created! Redirecting to dashboard..."),setTimeout(()=>e("/dashboard"),1e3)):xf.error(r.message||"Registration failed")}catch(n){console.error("Register error:",n),xf.error("Connection error: "+n.message)}finally{i(!1)}}else xf.error("Please fix the errors below")},className:"space-y-4",children:[Y.jsxs("div",{children:[Y.jsx("label",{className:"block text-sm text-slate-300 mb-2",children:"Username"}),Y.jsxs("div",{className:"relative",children:[Y.jsx(dp,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-500",size:18}),Y.jsx("input",{type:"text",name:"username",value:s.username,onChange:l,placeholder:"yourname",className:"w-full bg-white border rounded-lg p-3 pl-10 text-black placeholder-slate-400 focus:outline-none focus:ring-2 "+(o.username?"border-red-500 focus:ring-red-500":"border-brand.border focus:ring-accent")})]}),o.username&&Y.jsxs("p",{className:"text-red-400 text-xs mt-1 flex items-center gap-1",children:[Y.jsx(Hf,{size:14})," ",o.username]})]}),Y.jsxs("div",{children:[Y.jsx("label",{className:"block text-sm text-slate-300 mb-2",children:"Email Address"}),Y.jsxs("div",{className:"relative",children:[Y.jsx(ep,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-500",size:18}),Y.jsx("input",{type:"email",name:"email",value:s.email,onChange:l,placeholder:"you@example.com",className:"w-full bg-white border rounded-lg p-3 pl-10 text-black placeholder-slate-400 focus:outline-none focus:ring-2 "+(o.email?"border-red-500 focus:ring-red-500":"border-brand.border focus:ring-accent")})]}),o.email&&Y.jsxs("p",{className:"text-red-400 text-xs mt-1 flex items-center gap-1",children:[Y.jsx(Hf,{size:14})," ",o.email]})]}),Y.jsxs("div",{children:[Y.jsx("label",{className:"block text-sm text-slate-300 mb-2",children:"Password"}),Y.jsxs("div",{className:"relative",children:[Y.jsx(Jf,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-500",size:18}),Y.jsx("input",{type:"password",name:"password",value:s.password,onChange:l,placeholder:"",className:"w-full bg-white border rounded-lg p-3 pl-10 text-black placeholder-slate-400 focus:outline-none focus:ring-2 "+(o.password?"border-red-500 focus:ring-red-500":"border-brand.border focus:ring-accent")})]}),o.password&&Y.jsxs("p",{className:"text-red-400 text-xs mt-1 flex items-center gap-1",children:[Y.jsx(Hf,{size:14})," ",o.password]})]}),Y.jsxs("div",{children:[Y.jsx("label",{className:"block text-sm text-slate-300 mb-2",children:"Confirm Password"}),Y.jsxs("div",{className:"relative",children:[Y.jsx(Jf,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-500",size:18}),Y.jsx("input",{type:"password",name:"confirmPassword",value:s.confirmPassword,onChange:l,placeholder:"",className:"w-full bg-white border rounded-lg p-3 pl-10 text-black placeholder-slate-400 focus:outline-none focus:ring-2 "+(o.confirmPassword?"border-red-500 focus:ring-red-500":"border-brand.border focus:ring-accent")})]}),o.confirmPassword&&Y.jsxs("p",{className:"text-red-400 text-xs mt-1 flex items-center gap-1",children:[Y.jsx(Hf,{size:14})," ",o.confirmPassword]})]}),Y.jsx("button",{type:"submit",disabled:r,className:"w-full bg-accent hover:bg-accent/90 disabled:bg-slate-600 text-white font-bold py-3 rounded-lg transition duration-200 mt-6",children:r?" Creating Account...":" Create Account"})]}),Y.jsxs("p",{className:"text-center text-slate-400 text-sm mt-6",children:["Already have an account?"," ",Y.jsx(yd,{to:"/login",className:"text-accent hover:underline font-semibold",children:"Sign In"})]})]})})})}const vp=({icon:e,label:t,active:r=!1})=>Y.jsxs("div",{className:"flex items-center space-x-3 p-3 rounded-xl cursor-pointer transition-all "+(r?"bg-accent text-white shadow-glow":"text-slate-400 hover:bg-brand.card hover:text-white"),children:[Y.jsx(e,{size:20}),Y.jsx("span",{className:"font-semibold",children:t})]});function gp(){return Y.jsxs("aside",{className:"w-64 bg-brand.darker h-screen border-r border-brand.border p-4 flex flex-col",children:[Y.jsxs("div",{className:"flex items-center space-x-2 px-2 mb-10",children:[Y.jsx("div",{className:"w-8 h-8 bg-accent rounded-lg"}),Y.jsx("span",{className:"text-xl font-bold tracking-tighter",children:"LIGHTNODE"})]}),Y.jsxs("nav",{className:"flex-1 space-y-2",children:[Y.jsx(vp,{icon:Yf,label:"Dashboard",active:!0}),Y.jsx(vp,{icon:sp,label:"My Servers"}),Y.jsx(vp,{icon:$f,label:"Billing"}),Y.jsx(vp,{icon:Qf,label:"Support"})]}),Y.jsxs("div",{className:"pt-4 border-t border-brand.border space-y-2",children:[Y.jsx(vp,{icon:np,label:"Settings"}),Y.jsx(vp,{icon:Zf,label:"Sign Out"})]})]})}function mp(){return Y.jsxs("header",{className:"h-16 flex items-center justify-between px-6 border-b border-brand.border bg-transparent",children:[Y.jsx("div",{className:"flex items-center gap-4",children:Y.jsx("h1",{className:"text-lg font-bold",children:"Dashboard"})}),Y.jsxs("div",{className:"flex items-center gap-3",children:[Y.jsx("button",{className:"p-2 rounded-lg bg-brand.card/40 hover:bg-brand.card text-slate-300",children:Y.jsx(Nf,{size:18})}),Y.jsxs("button",{className:"flex items-center gap-2 p-2 rounded-lg bg-brand.card/40 text-slate-300",children:[Y.jsx(dp,{size:16}),Y.jsx("span",{className:"text-sm",children:"You"})]})]})]})}const bp=({children:e})=>Y.jsxs("div",{className:"flex h-screen bg-brand.darker text-slate-100 font-sans",children:[Y.jsx(gp,{}),Y.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[Y.jsx(mp,{}),Y.jsx("main",{className:"flex-1 overflow-x-hidden overflow-y-auto p-6 bg-brand.darker/50",children:Y.jsx("div",{className:"max-w-7xl mx-auto",children:e})})]})]}),yp=(()=>{const e=window.location.hostname,t=window.location.port,r=window.location.protocol;if(console.log(`[API Config] Current location: ${r}//${e}:${t}`),"localhost"===e||"127.0.0.1"===e){const e="http://localhost:3002";return console.log("[API Config] Using localhost backend:",e),e}if(e&&"localhost"!==e&&"127.0.0.1"!==e){const t=`http://${e}:3002`;return console.log("[API Config] Using remote backend (HTTP):",t),t}return"http://localhost:3002"})(),Sp=async(e,t={})=>{const r=`${yp}${e}`;try{const i=await fetch(r,{...t,headers:{"Content-Type":"application/json",...t.headers}});return console.log(`[API] ${t.method||"GET"} ${e} - Status: ${i.status}`),i}catch(i){throw console.error(`[API Error] ${e}:`,i),new Error(`Failed to connect to ${r}: ${i.message}`)}},wp=({onServerCreated:e})=>{const[t,r]=F.useState(!1),[i,s]=F.useState({name:"",memory:2,disk:10,version:"Paper 1.21"}),[n,o]=F.useState({});return Y.jsx("div",{className:"min-h-screen bg-gray-950 p-6",children:Y.jsxs("div",{className:"max-w-2xl mx-auto",children:[Y.jsxs("div",{className:"mb-8",children:[Y.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Deploy New Instance"}),Y.jsx("p",{className:"text-gray-400",children:"Create and configure your Minecraft server in minutes"})]}),Y.jsx("div",{className:"bg-gray-900 p-8 rounded-xl border border-gray-800 shadow-lg",children:Y.jsxs("form",{onSubmit:async t=>{if(t.preventDefault(),(()=>{const e={};return i.name&&0!==i.name.trim().length?i.name.length<3?e.name="Server name must be at least 3 characters":i.name.length>32&&(e.name="Server name must be less than 32 characters"):e.name="Server name is required",(i.memory<1||i.memory>16)&&(e.memory="RAM must be between 1GB and 16GB"),(i.disk<5||i.disk>500)&&(e.disk="Disk space must be between 5GB and 500GB"),o(e),0===Object.keys(e).length})()){r(!0);try{const t=localStorage.getItem("token");if(!t)return xf.error("Authentication required. Please log in."),navigate("/login"),void r(!1);const s={name:i.name.trim(),memory:parseInt(i.memory),diskSpace:parseInt(i.disk),version:i.version,ipAddress:"0.0.0.0",port:25565,status:"starting"},n=await Sp("/api/servers",{method:"POST",headers:{Authorization:`Bearer ${t}`},body:JSON.stringify(s)});if(!n.ok){const e=await n.json();throw new Error(e.message||"Failed to create server")}const o=await n.json();xf.success(" Server created successfully!"),e&&e(o.server)}catch(s){console.error("Error creating server:",s),xf.error(s.message||"Failed to create server. Please try again.")}finally{r(!1)}}else xf.error("Please fix the errors in the form")},className:"space-y-6",children:[Y.jsxs("div",{children:[Y.jsx("label",{className:"block text-gray-300 font-semibold mb-2",children:"Server Name"}),Y.jsx("input",{type:"text",placeholder:"e.g. My Epic SMP",value:i.name,onChange:e=>{s({...i,name:e.target.value}),n.name&&o({...n,name:""})},className:"w-full bg-gray-800 border rounded-lg p-3 text-white placeholder-gray-500 focus:outline-none transition "+(n.name?"border-red-500 focus:border-red-500":"border-gray-700 focus:border-purple-500")}),n.name&&Y.jsx("p",{className:"text-red-400 text-sm mt-1",children:n.name}),Y.jsxs("p",{className:"text-gray-500 text-xs mt-2",children:[i.name.length,"/32 characters"]})]}),Y.jsxs("div",{children:[Y.jsxs("label",{className:"block text-gray-300 font-semibold mb-3",children:["RAM Allocation",Y.jsxs("span",{className:"text-purple-400 font-bold ml-2",children:[i.memory," GB"]})]}),Y.jsx("input",{type:"range",min:"1",max:"16",step:"1",value:i.memory,onChange:e=>s({...i,memory:parseInt(e.target.value)}),className:"w-full h-3 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-purple-500 hover:accent-purple-400 transition"}),Y.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-2",children:[Y.jsx("span",{children:"1 GB"}),Y.jsx("span",{children:"8 GB"}),Y.jsx("span",{children:"16 GB"})]}),n.memory&&Y.jsx("p",{className:"text-red-400 text-sm mt-2",children:n.memory})]}),Y.jsxs("div",{children:[Y.jsxs("label",{className:"block text-gray-300 font-semibold mb-3",children:["Disk Space",Y.jsxs("span",{className:"text-purple-400 font-bold ml-2",children:[i.disk," GB"]})]}),Y.jsx("input",{type:"range",min:"5",max:"500",step:"5",value:i.disk,onChange:e=>s({...i,disk:parseInt(e.target.value)}),className:"w-full h-3 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-purple-500 hover:accent-purple-400 transition"}),Y.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-2",children:[Y.jsx("span",{children:"5 GB"}),Y.jsx("span",{children:"250 GB"}),Y.jsx("span",{children:"500 GB"})]}),n.disk&&Y.jsx("p",{className:"text-red-400 text-sm mt-2",children:n.disk})]}),Y.jsxs("div",{children:[Y.jsx("label",{className:"block text-gray-300 font-semibold mb-2",children:"Minecraft Version"}),Y.jsxs("select",{value:i.version,onChange:e=>s({...i,version:e.target.value}),className:"w-full bg-gray-800 border border-gray-700 rounded-lg p-3 text-white focus:border-purple-500 focus:outline-none transition cursor-pointer",children:[Y.jsx("option",{children:"Paper 1.21"}),Y.jsx("option",{children:"Paper 1.20.4"}),Y.jsx("option",{children:"Forge 1.20.1"}),Y.jsx("option",{children:"Fabric 1.21"}),Y.jsx("option",{children:"Spigot 1.20.4"}),Y.jsx("option",{children:"Bungeecord"})]})]}),Y.jsx("div",{className:"bg-gray-800 border border-gray-700 rounded-lg p-4",children:Y.jsxs("div",{className:"flex justify-between items-center",children:[Y.jsxs("div",{children:[Y.jsx("p",{className:"text-gray-400 text-sm",children:"Estimated Monthly Cost"}),Y.jsxs("p",{className:"text-2xl font-bold text-white mt-1",children:["$",(2.5*i.memory+.5*i.disk).toFixed(2),"/mo"]})]}),Y.jsxs("div",{className:"text-right text-xs text-gray-500",children:[Y.jsxs("p",{children:["RAM: $",(2.5*i.memory).toFixed(2),"/mo"]}),Y.jsxs("p",{children:["Disk: $",(.5*i.disk).toFixed(2),"/mo"]})]})]})}),Y.jsx("button",{type:"submit",disabled:t,className:"w-full bg-purple-600 hover:bg-purple-700 disabled:bg-purple-900 disabled:cursor-not-allowed text-white font-bold py-3 rounded-lg transition duration-200 flex items-center justify-center gap-2",children:t?Y.jsxs(Y.Fragment,{children:[Y.jsx("span",{className:"inline-block animate-spin",children:""}),"Creating Server..."]}):Y.jsxs(Y.Fragment,{children:[Y.jsx("span",{children:""}),"Create Server"]})}),Y.jsx("p",{className:"text-gray-500 text-xs text-center",children:"Your server will be ready in 2-3 minutes. You'll receive the connection details on your dashboard."})]})})]})})},Cp=({serverData:e,onViewSetupGuide:t})=>{const[r,i]=F.useState(null),s=(e,t)=>{navigator.clipboard.writeText(e),i(t),xf.success(`${t} copied!`),setTimeout(()=>i(null),2e3)},n=`${e.ip}${e.port?":"+e.port:""}`;return Y.jsx("div",{className:"min-h-screen bg-gray-950 p-6",children:Y.jsxs("div",{className:"max-w-5xl mx-auto",children:[Y.jsxs("div",{className:"text-center mb-12",children:[Y.jsx("div",{className:"inline-flex items-center justify-center w-24 h-24 bg-green-500/10 rounded-full mb-6 animate-bounce",children:Y.jsx(Ff,{className:"w-14 h-14 text-green-400"})}),Y.jsx("h1",{className:"text-4xl md:text-5xl font-extrabold tracking-tight text-white mb-3",children:"Deployment Successful! "}),Y.jsxs("p",{className:"text-xl text-gray-400",children:["Your server ",Y.jsxs("span",{className:"text-purple-400 font-mono font-bold",children:['"',e.name,'"']})," is spinning up now."]}),Y.jsx("p",{className:"text-gray-500 mt-2 text-sm",children:"Server will be fully online in 2-3 minutes"})]}),Y.jsxs("div",{className:"grid lg:grid-cols-3 gap-6 mb-8",children:[Y.jsxs("div",{className:"lg:col-span-2 bg-gray-900 p-8 rounded-2xl border-2 border-green-500/50 shadow-2xl",children:[Y.jsxs("h3",{className:"flex items-center text-2xl font-bold mb-6 text-green-400",children:[Y.jsx(cp,{className:"w-6 h-6 mr-3"}),"Connection Details"]}),Y.jsxs("div",{className:"space-y-5",children:[Y.jsxs("div",{children:[Y.jsx("label",{className:"text-xs text-gray-500 uppercase font-bold tracking-wide",children:" Minecraft Server Address"}),Y.jsxs("div",{className:"flex mt-2 gap-2",children:[Y.jsx("code",{className:"flex-1 bg-black/60 p-4 rounded-lg font-mono text-green-400 text-sm border border-green-500/20 break-all",children:n}),Y.jsxs("button",{onClick:()=>s(n,"Address"),className:"px-4 rounded-lg font-bold transition flex items-center gap-2 "+("Address"===r?"bg-green-600 text-white":"bg-green-600 hover:bg-green-700 text-white"),children:["Address"===r?"":Y.jsx(Uf,{size:18}),Y.jsx("span",{className:"hidden sm:inline",children:"Copy"})]})]}),Y.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Paste this into Multiplayer  Add Server in Minecraft"})]}),Y.jsxs("div",{children:[Y.jsx("label",{className:"text-xs text-gray-500 uppercase font-bold tracking-wide",children:" Server IP Address"}),Y.jsxs("div",{className:"flex mt-2 gap-2",children:[Y.jsx("code",{className:"flex-1 bg-black/60 p-4 rounded-lg font-mono text-blue-400 text-sm border border-blue-500/20",children:e.ip}),Y.jsx("button",{onClick:()=>s(e.ip,"IP"),className:"px-4 rounded-lg font-bold transition flex items-center gap-2 "+("IP"===r?"bg-blue-600 text-white":"bg-blue-600 hover:bg-blue-700 text-white"),children:"IP"===r?"":Y.jsx(Uf,{size:18})})]})]}),Y.jsxs("div",{children:[Y.jsx("label",{className:"text-xs text-gray-500 uppercase font-bold tracking-wide",children:" Temporary Panel Password"}),Y.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"For accessing your control panel"}),Y.jsxs("div",{className:"flex mt-2 gap-2",children:[Y.jsx("code",{className:"flex-1 bg-black/60 p-4 rounded-lg font-mono text-orange-400 text-sm border border-orange-500/20 break-all",children:e.tempPassword}),Y.jsx("button",{onClick:()=>s(e.tempPassword,"Password"),className:"px-4 rounded-lg font-bold transition flex items-center gap-2 "+("Password"===r?"bg-orange-600 text-white":"bg-orange-600 hover:bg-orange-700 text-white"),children:"Password"===r?"":Y.jsx(Uf,{size:18})})]})]}),e.port&&25565!==e.port&&Y.jsxs("div",{children:[Y.jsx("label",{className:"text-xs text-gray-500 uppercase font-bold tracking-wide",children:" Server Port"}),Y.jsxs("div",{className:"flex mt-2 gap-2",children:[Y.jsx("code",{className:"flex-1 bg-black/60 p-4 rounded-lg font-mono text-purple-400 text-sm border border-purple-500/20",children:e.port}),Y.jsx("button",{onClick:()=>s(String(e.port),"Port"),className:"px-4 rounded-lg font-bold transition flex items-center gap-2 "+("Port"===r?"bg-purple-600 text-white":"bg-purple-600 hover:bg-purple-700 text-white"),children:"Port"===r?"":Y.jsx(Uf,{size:18})})]})]})]})]}),Y.jsxs("div",{className:"bg-gray-900 p-8 rounded-2xl border border-gray-800",children:[Y.jsxs("h3",{className:"flex items-center text-lg font-bold mb-6 text-blue-400",children:[Y.jsx(op,{className:"w-6 h-6 mr-2"}),"Server Health"]}),Y.jsxs("div",{className:"space-y-4",children:[Y.jsx("div",{children:Y.jsxs("div",{className:"flex justify-between items-center",children:[Y.jsx("span",{className:"text-sm text-gray-400",children:"Status"}),Y.jsxs("div",{className:"flex items-center gap-2",children:[Y.jsx("span",{className:"w-2 h-2 bg-yellow-500 rounded-full animate-pulse"}),Y.jsx("span",{className:"text-yellow-400 font-bold text-sm",children:"Starting..."})]})]})}),Y.jsx("div",{children:Y.jsxs("div",{className:"flex justify-between items-center",children:[Y.jsx("span",{className:"text-sm text-gray-400",children:"Location"}),Y.jsx("span",{className:"text-white font-bold",children:e.location||"US-East"})]})}),Y.jsx("div",{children:Y.jsxs("div",{className:"flex justify-between items-center",children:[Y.jsx("span",{className:"text-sm text-gray-400",children:"DDoS Protection"}),Y.jsx("span",{className:"text-green-400 font-bold",children:"ACTIVE"})]})}),Y.jsx("div",{children:Y.jsxs("div",{className:"flex justify-between items-center",children:[Y.jsx("span",{className:"text-sm text-gray-400",children:"Estimated Time"}),Y.jsxs("span",{className:"text-white font-bold flex items-center gap-1",children:[Y.jsx(zf,{size:14})," 2-3 min"]})]})}),Y.jsx("div",{className:"pt-4 border-t border-gray-700",children:Y.jsxs("div",{className:"flex items-start gap-2 text-xs",children:[Y.jsx(fp,{size:14,className:"text-green-400 flex-shrink-0 mt-0.5"}),Y.jsxs("p",{className:"text-gray-300",children:["Your server is auto-scaling. Performance optimized for ",Y.jsxs("strong",{children:[e.memory,"GB RAM"]}),"."]})]})})]})]})]}),Y.jsx("div",{className:"bg-amber-900/20 border-l-4 border-amber-500 p-6 rounded-lg mb-8",children:Y.jsxs("div",{className:"flex gap-4",children:[Y.jsx(Hf,{className:"w-6 h-6 text-amber-400 flex-shrink-0 mt-1"}),Y.jsxs("div",{children:[Y.jsx("h4",{className:"font-bold text-amber-300 mb-2",children:" Important: Accept the Minecraft EULA"}),Y.jsx("p",{className:"text-amber-100 text-sm mb-3",children:"Before your server can start, you must accept the Minecraft End User License Agreement. This prevents the server from staying idle."}),Y.jsx("p",{className:"text-amber-100/70 text-xs",children:"Go to the Console tab in your panel and accept the EULA, or the server won't run!"})]})]})}),Y.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[Y.jsxs("a",{href:e.panelUrl||"#",target:"_blank",rel:"noopener noreferrer",className:"bg-purple-600 hover:bg-purple-700 py-4 rounded-xl font-bold flex items-center justify-center gap-2 transition shadow-lg shadow-purple-900/50 text-white",children:["Open Control Panel",Y.jsx(qf,{size:20})]}),Y.jsx("button",{onClick:t,className:"bg-gray-700 hover:bg-gray-600 py-4 rounded-xl font-bold transition text-white",children:" Setup Guide"}),Y.jsxs("button",{onClick:()=>window.location.href="https://www.minecraft.net/en-us/download",target:"_blank",rel:"noopener noreferrer",className:"bg-gray-700 hover:bg-gray-600 py-4 rounded-xl font-bold transition text-white flex items-center justify-center gap-2",children:["Get Minecraft",Y.jsx(qf,{size:20})]})]}),Y.jsxs("div",{className:"mt-10 grid md:grid-cols-2 gap-6 pt-8 border-t border-gray-800",children:[Y.jsxs("div",{className:"bg-gray-900/50 p-6 rounded-lg border border-gray-800",children:[Y.jsxs("h4",{className:"font-bold text-green-400 mb-3 flex items-center gap-2",children:[Y.jsx(Ff,{size:18})," Quick Start"]}),Y.jsxs("ol",{className:"text-sm text-gray-400 space-y-2",children:[Y.jsx("li",{children:"1. Open Minecraft Java Edition"}),Y.jsx("li",{children:'2. Click "Multiplayer"'}),Y.jsx("li",{children:"3. Add Server (use address above)"}),Y.jsx("li",{children:"4. Join and start playing!"})]})]}),Y.jsxs("div",{className:"bg-gray-900/50 p-6 rounded-lg border border-gray-800",children:[Y.jsxs("h4",{className:"font-bold text-blue-400 mb-3 flex items-center gap-2",children:[Y.jsx(cp,{size:18})," Need Help?"]}),Y.jsxs("p",{className:"text-sm text-gray-400",children:["Check our ",Y.jsx("a",{href:"#",className:"text-blue-400 hover:text-blue-300 underline",children:"documentation"})," or email ",Y.jsx("code",{className:"bg-black/40 px-2 py-1 rounded text-blue-300",children:"support@lighth.io"})]})]})]})]})})};function xp({id:e,name:t,ip:r,status:i="offline",ram:s=2}){const n=Ju();return Y.jsxs("div",{onClick:()=>{n(`/server/${e}`)},className:"bg-brand.card border border-brand.border rounded-2xl p-5 hover:border-accent/50 transition-all cursor-pointer group",children:[Y.jsxs("div",{className:"flex justify-between items-start mb-4",children:[Y.jsxs("div",{children:[Y.jsx("h3",{className:"text-lg font-bold group-hover:text-accent transition-colors",children:t}),Y.jsx("p",{className:"text-sm text-slate-500 font-mono",children:r})]}),Y.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-bold uppercase "+("online"===i?"bg-status.online/10 text-status.online":"bg-status.offline/10 text-status.offline"),children:i})]}),Y.jsxs("div",{className:"space-y-2",children:[Y.jsxs("div",{className:"flex justify-between text-xs text-slate-400 mb-1",children:[Y.jsx("span",{children:"Memory Usage"}),Y.jsxs("span",{children:[s," GB"]})]}),Y.jsx("div",{className:"w-full bg-brand.darkest h-1.5 rounded-full overflow-hidden",children:Y.jsx("div",{className:"bg-accent h-full w-[45%]"})})]})]})}const kp={},Ep=e=>{let t;const r=new Set,i=(e,i)=>{const s="function"==typeof e?e(t):e;if(!Object.is(s,t)){const e=t;t=(null!=i?i:"object"!=typeof s||null===s)?s:Object.assign({},t,s),r.forEach(r=>r(t,e))}},s=()=>t,n={setState:i,getState:s,getInitialState:()=>o,subscribe:e=>(r.add(e),()=>r.delete(e)),destroy:()=>{"production"!==(kp?"production":void 0)&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),r.clear()}},o=t=e(i,s,n);return n};var Lp={exports:{}},Rp={},Dp={exports:{}},Ap={},Tp=F;var Pp="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},Bp=Tp.useState,Op=Tp.useEffect,Mp=Tp.useLayoutEffect,Np=Tp.useDebugValue;function Ip(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Pp(e,r)}catch(i){return!0}}var jp="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var r=t(),i=Bp({inst:{value:r,getSnapshot:t}}),s=i[0].inst,n=i[1];return Mp(function(){s.value=r,s.getSnapshot=t,Ip(s)&&n({inst:s})},[e,r,t]),Op(function(){return Ip(s)&&n({inst:s}),e(function(){Ip(s)&&n({inst:s})})},[e]),Np(r),r};Ap.useSyncExternalStore=void 0!==Tp.useSyncExternalStore?Tp.useSyncExternalStore:jp,Dp.exports=Ap;var Hp=Dp.exports,Fp=F,zp=Hp;
/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Up="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},Wp=zp.useSyncExternalStore,$p=Fp.useRef,qp=Fp.useEffect,Vp=Fp.useMemo,Kp=Fp.useDebugValue;Rp.useSyncExternalStoreWithSelector=function(e,t,r,i,s){var n=$p(null);if(null===n.current){var o={hasValue:!1,value:null};n.current=o}else o=n.current;n=Vp(function(){function e(e){if(!l){if(l=!0,n=e,e=i(e),void 0!==s&&o.hasValue){var t=o.value;if(s(t,e))return a=t}return a=e}if(t=a,Up(n,e))return t;var r=i(e);return void 0!==s&&s(t,r)?(n=e,t):(n=e,a=r)}var n,a,l=!1,c=void 0===r?null:r;return[function(){return e(t())},null===c?void 0:function(){return e(c())}]},[t,r,i,s]);var a=Wp(e,n[0],n[1]);return qp(function(){o.hasValue=!0,o.value=a},[a]),Kp(a),a},Lp.exports=Rp;const Gp=t(Lp.exports),Xp={},{useDebugValue:Yp}=z,{useSyncExternalStoreWithSelector:Qp}=Gp;let Jp=!1;const Zp=e=>e;const e_=e=>{"production"!==(Xp?"production":void 0)&&"function"!=typeof e&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t="function"==typeof e?(e=>e?Ep(e):Ep)(e):e,r=(e,r)=>function(e,t=Zp,r){"production"!==(Xp?"production":void 0)&&r&&!Jp&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),Jp=!0);const i=Qp(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,r);return Yp(i),i}(t,e,r);return Object.assign(r,t),r},t_=(r_=(e,t)=>({servers:[],selectedServer:null,loading:!1,error:null,fetchServers:async()=>{e({loading:!0,error:null});try{const r=localStorage.getItem("token");if(!r)throw new Error("No authentication token");const i=await Sp("/api/servers",{headers:{Authorization:`Bearer ${r}`}});if(!i.ok)throw new Error("Failed to fetch servers");const s=(await i.json()).servers||[];e({servers:s,loading:!1}),s.length>0&&!t().selectedServer&&e({selectedServer:s[0]})}catch(r){e({error:r.message,loading:!1})}},setSelectedServer:t=>{e({selectedServer:t})},addServer:t=>{e(e=>({servers:[...e.servers,t],selectedServer:t}))},updateServer:(t,r)=>{e(e=>({servers:e.servers.map(e=>e.id===t?{...e,...r}:e),selectedServer:e.selectedServer?.id===t?{...e.selectedServer,...r}:e.selectedServer}))},removeServer:t=>{e(e=>{const r=e.servers.filter(e=>e.id!==t);return{servers:r,selectedServer:e.selectedServer?.id===t?r.length>0?r[0]:null:e.selectedServer}})}}),r_?e_(r_):e_);var r_;const i_=()=>{const[e,t]=F.useState("servers"),[r,i]=F.useState(null),{servers:s,fetchServers:n,addServer:o}=t_();F.useEffect(()=>{n()},[]);const a=()=>{const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*";let t="";for(let r=0;r<16;r++)t+=e.charAt(Math.floor(70*Math.random()));return t};return Y.jsx(bp,{children:"form"===e?Y.jsx(wp,{onServerCreated:e=>{i({name:e.name,ip:e.ipAddress||"10.0.0.5",port:e.port||25565,tempPassword:e.tempPassword||a(),panelUrl:e.panelUrl||`https://panel.lighth.io/server/${e.id}`,location:e.location||"US-East-1",memory:e.memory,uuid:e.uuid,id:e.id}),t("success"),o(e)}}):"success"===e?Y.jsx(Cp,{serverData:r,onViewSetupGuide:()=>{console.log("View setup guide")},onCreateAnother:()=>{t("form"),i(null)}}):Y.jsxs("div",{className:"space-y-6",children:[Y.jsxs("div",{className:"flex justify-between items-center",children:[Y.jsx("h1",{className:"text-3xl font-bold",children:"My Servers"}),Y.jsx("button",{onClick:()=>t("form"),className:"px-4 py-2 bg-accent hover:bg-accent/90 rounded-lg font-semibold transition",children:"+ Create Server"})]}),s.length>0?Y.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:s.map(e=>Y.jsx(xp,{id:e.id,name:e.name,ip:e.ipAddress,status:e.status,ram:e.memory},e.id))}):Y.jsxs("div",{className:"text-center py-12",children:[Y.jsx("p",{className:"text-slate-400 mb-4",children:"No servers yet. Create your first one!"}),Y.jsx("button",{onClick:()=>t("form"),className:"px-6 py-3 bg-accent hover:bg-accent/90 rounded-lg font-semibold transition",children:"Deploy First Server"})]})]})})};var s_={};const n_=({serverId:e,currentStatus:t,onStatusChange:r})=>{const[i,s]=F.useState(!1),[n,o]=F.useState(t),{token:a}=Rf();z.useEffect(()=>{o(t)},[t]);const l=async t=>{if(i)xf.loading("Action in progress...");else{s(!0);try{console.log(`[Controls] Sending power action: ${t}`);const i=await fetch(`${s_.REACT_APP_API_URL||"http://localhost:3002"}/api/servers/${e}/power`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`},body:JSON.stringify({action:t})}),s=await i.json();if(!i.ok)throw new Error(s.message||`Failed to ${t} server`);o(s.status),r&&r(s.status);const n={start:" Server starting...",stop:" Server stopping gracefully...",restart:" Server restarting...",kill:" Server force killed"};xf.success(n[t]||`Server ${t} command sent!`),console.log(`[Controls]  Server ${t} command successful`)}catch(n){console.error("[Controls] Error:",n),xf.error(n.message||`Failed to ${t} server`)}finally{s(!1)}}};return Y.jsxs("div",{className:"flex flex-wrap gap-3 mb-6 p-4 bg-gray-800 rounded-xl border border-gray-700 shadow-lg",children:[Y.jsxs("button",{onClick:()=>l("start"),disabled:i||"online"===n,className:`flex items-center px-6 py-2.5 rounded-lg font-semibold transition-all duration-200 ${"online"===n?"bg-green-900/30 text-green-700 cursor-not-allowed opacity-50":"bg-green-600 hover:bg-green-500 text-white shadow-lg shadow-green-600/30 hover:shadow-green-500/50 hover:scale-105 active:scale-95"} ${i?"opacity-75":""}`,title:"online"===n?"Server is already online":"Start the server",children:[Y.jsx(tp,{size:18,className:"mr-2 fill-current "+(i?"animate-spin":"")}),i?"Starting...":"Start"]}),Y.jsxs("button",{onClick:()=>l("restart"),disabled:i||"offline"===n,className:`flex items-center px-6 py-2.5 rounded-lg font-semibold transition-all duration-200 ${"offline"===n?"bg-yellow-900/30 text-yellow-700 cursor-not-allowed opacity-50":"bg-yellow-600 hover:bg-yellow-500 text-white shadow-lg shadow-yellow-600/30 hover:shadow-yellow-500/50 hover:scale-105 active:scale-95"} ${i?"opacity-75":""}`,title:"offline"===n?"Server must be online to restart":"Restart the server",children:[Y.jsx(ip,{size:18,className:"mr-2 "+(i?"animate-spin":"")}),i?"Restarting...":"Restart"]}),Y.jsxs("button",{onClick:()=>l("stop"),disabled:i||"offline"===n,className:`flex items-center px-6 py-2.5 rounded-lg font-semibold transition-all duration-200 ${"offline"===n?"bg-red-900/30 text-red-700 cursor-not-allowed opacity-50":"bg-red-600 hover:bg-red-500 text-white shadow-lg shadow-red-600/30 hover:shadow-red-500/50 hover:scale-105 active:scale-95"} ${i?"opacity-75":""}`,title:"offline"===n?"Server is already offline":"Stop the server gracefully (saves world)",children:[Y.jsx(lp,{size:18,className:"mr-2 fill-current "+(i?"animate-spin":"")}),i?"Stopping...":"Stop"]}),Y.jsx("div",{className:"flex-1"}),Y.jsxs("button",{onClick:()=>{window.confirm(" DANGER: Force killing will NOT save world data!\n\nThis may cause corruption. Are you sure?")&&l("kill")},disabled:i,className:"flex items-center px-4 py-2.5 bg-gray-700 hover:bg-red-900 text-gray-400 hover:text-red-200 rounded-lg transition-all duration-200 border border-gray-600 hover:border-red-500 text-sm font-semibold group relative",title:"Force Kill Server ( DANGEROUS - No world save!)",children:[Y.jsx(ap,{size:16,className:"mr-2"}),"Kill",Y.jsx("div",{className:"absolute bottom-full right-0 mb-2 px-3 py-1 bg-red-900 text-red-200 text-xs rounded whitespace-nowrap opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none",children:" No world save"})]}),Y.jsxs("div",{className:"flex items-center px-4 py-2.5 bg-gray-700/50 rounded-lg border border-gray-600",children:[Y.jsx("div",{className:"w-2.5 h-2.5 rounded-full mr-2 "+("online"===n?"bg-green-500 shadow-lg shadow-green-500/50 animate-pulse":"offline"===n?"bg-red-500 shadow-lg shadow-red-500/50":"bg-yellow-500 shadow-lg shadow-yellow-500/50 animate-pulse")}),Y.jsx("span",{className:"text-sm text-gray-300 font-mono capitalize",children:"provisioning"===n?"Starting up...":n})]})]})};var o_,a_={exports:{}};o_=a_,function(e,t){o_.exports=t()}(self,()=>(()=>{var e={4567:function(e,t,r){var i=this&&this.__decorate||function(e,t,r,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n<3?s(o):n>3?s(t,r,o):s(t,r))||o);return n>3&&o&&Object.defineProperty(t,r,o),o},s=this&&this.__param||function(e,t){return function(r,i){t(r,i,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.AccessibilityManager=void 0;const n=r(9042),o=r(6114),a=r(9924),l=r(844),c=r(5596),h=r(4725),u=r(3656);let d=t.AccessibilityManager=class extends l.Disposable{constructor(e,t){super(),this._terminal=e,this._renderService=t,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="",this._accessibilityContainer=document.createElement("div"),this._accessibilityContainer.classList.add("xterm-accessibility"),this._rowContainer=document.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let r=0;r<this._terminal.rows;r++)this._rowElements[r]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[r]);if(this._topBoundaryFocusListener=e=>this._handleBoundaryFocus(e,0),this._bottomBoundaryFocusListener=e=>this._handleBoundaryFocus(e,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions(),this._accessibilityContainer.appendChild(this._rowContainer),this._liveRegion=document.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityContainer.appendChild(this._liveRegion),this._liveRegionDebouncer=this.register(new a.TimeBasedDebouncer(this._renderRows.bind(this))),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityContainer),this.register(this._terminal.onResize(e=>this._handleResize(e.rows))),this.register(this._terminal.onRender(e=>this._refreshRows(e.start,e.end))),this.register(this._terminal.onScroll(()=>this._refreshRows())),this.register(this._terminal.onA11yChar(e=>this._handleChar(e))),this.register(this._terminal.onLineFeed(()=>this._handleChar("\n"))),this.register(this._terminal.onA11yTab(e=>this._handleTab(e))),this.register(this._terminal.onKey(e=>this._handleKey(e.key))),this.register(this._terminal.onBlur(()=>this._clearLiveRegion())),this.register(this._renderService.onDimensionsChange(()=>this._refreshRowsDimensions())),this._screenDprMonitor=new c.ScreenDprMonitor(window),this.register(this._screenDprMonitor),this._screenDprMonitor.setListener(()=>this._refreshRowsDimensions()),this.register((0,u.addDisposableDomListener)(window,"resize",()=>this._refreshRowsDimensions())),this._refreshRows(),this.register((0,l.toDisposable)(()=>{this._accessibilityContainer.remove(),this._rowElements.length=0}))}_handleTab(e){for(let t=0;t<e;t++)this._handleChar(" ")}_handleChar(e){this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==e&&(this._charsToAnnounce+=e):this._charsToAnnounce+=e,"\n"===e&&(this._liveRegionLineCount++,21===this._liveRegionLineCount&&(this._liveRegion.textContent+=n.tooMuchOutput)),o.isMac&&this._liveRegion.textContent&&this._liveRegion.textContent.length>0&&!this._liveRegion.parentNode&&setTimeout(()=>{this._accessibilityContainer.appendChild(this._liveRegion)},0))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0,o.isMac&&this._liveRegion.remove()}_handleKey(e){this._clearLiveRegion(),/\p{Control}/u.test(e)||this._charsToConsume.push(e)}_refreshRows(e,t){this._liveRegionDebouncer.refresh(e,t,this._terminal.rows)}_renderRows(e,t){const r=this._terminal.buffer,i=r.lines.length.toString();for(let s=e;s<=t;s++){const e=r.translateBufferLineToString(r.ydisp+s,!0),t=(r.ydisp+s+1).toString(),n=this._rowElements[s];n&&(0===e.length?n.innerText="":n.textContent=e,n.setAttribute("aria-posinset",t),n.setAttribute("aria-setsize",i))}this._announceCharacters()}_announceCharacters(){0!==this._charsToAnnounce.length&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}_handleBoundaryFocus(e,t){const r=e.target,i=this._rowElements[0===t?1:this._rowElements.length-2];if(r.getAttribute("aria-posinset")===(0===t?"1":`${this._terminal.buffer.lines.length}`))return;if(e.relatedTarget!==i)return;let s,n;if(0===t?(s=r,n=this._rowElements.pop(),this._rowContainer.removeChild(n)):(s=this._rowElements.shift(),n=r,this._rowContainer.removeChild(s)),s.removeEventListener("focus",this._topBoundaryFocusListener),n.removeEventListener("focus",this._bottomBoundaryFocusListener),0===t){const e=this._createAccessibilityTreeNode();this._rowElements.unshift(e),this._rowContainer.insertAdjacentElement("afterbegin",e)}else{const e=this._createAccessibilityTreeNode();this._rowElements.push(e),this._rowContainer.appendChild(e)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(0===t?-1:1),this._rowElements[0===t?1:this._rowElements.length-2].focus(),e.preventDefault(),e.stopImmediatePropagation()}_handleResize(e){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let t=this._rowContainer.children.length;t<this._terminal.rows;t++)this._rowElements[t]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[t]);for(;this._rowElements.length>e;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){const e=document.createElement("div");return e.setAttribute("role","listitem"),e.tabIndex=-1,this._refreshRowDimensions(e),e}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){this._accessibilityContainer.style.width=`${this._renderService.dimensions.css.canvas.width}px`,this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let e=0;e<this._terminal.rows;e++)this._refreshRowDimensions(this._rowElements[e])}}_refreshRowDimensions(e){e.style.height=`${this._renderService.dimensions.css.cell.height}px`}};t.AccessibilityManager=d=i([s(1,h.IRenderService)],d)},3614:(e,t)=>{function r(e){return e.replace(/\r?\n/g,"\r")}function i(e,t){return t?"[200~"+e+"[201~":e}function s(e,t,s,n){e=i(e=r(e),s.decPrivateModes.bracketedPasteMode&&!0!==n.rawOptions.ignoreBracketedPasteMode),s.triggerDataEvent(e,!0),t.value=""}function n(e,t,r){const i=r.getBoundingClientRect(),s=e.clientX-i.left-10,n=e.clientY-i.top-10;t.style.width="20px",t.style.height="20px",t.style.left=`${s}px`,t.style.top=`${n}px`,t.style.zIndex="1000",t.focus()}Object.defineProperty(t,"__esModule",{value:!0}),t.rightClickHandler=t.moveTextAreaUnderMouseCursor=t.paste=t.handlePasteEvent=t.copyHandler=t.bracketTextForPaste=t.prepareTextForTerminal=void 0,t.prepareTextForTerminal=r,t.bracketTextForPaste=i,t.copyHandler=function(e,t){e.clipboardData&&e.clipboardData.setData("text/plain",t.selectionText),e.preventDefault()},t.handlePasteEvent=function(e,t,r,i){e.stopPropagation(),e.clipboardData&&s(e.clipboardData.getData("text/plain"),t,r,i)},t.paste=s,t.moveTextAreaUnderMouseCursor=n,t.rightClickHandler=function(e,t,r,i,s){n(e,t,r),s&&i.rightClickSelect(e),t.value=i.selectionText,t.select()}},7239:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ColorContrastCache=void 0;const i=r(1505);t.ColorContrastCache=class{constructor(){this._color=new i.TwoKeyMap,this._css=new i.TwoKeyMap}setCss(e,t,r){this._css.set(e,t,r)}getCss(e,t){return this._css.get(e,t)}setColor(e,t,r){this._color.set(e,t,r)}getColor(e,t){return this._color.get(e,t)}clear(){this._color.clear(),this._css.clear()}}},3656:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.addDisposableDomListener=void 0,t.addDisposableDomListener=function(e,t,r,i){e.addEventListener(t,r,i);let s=!1;return{dispose:()=>{s||(s=!0,e.removeEventListener(t,r,i))}}}},6465:function(e,t,r){var i=this&&this.__decorate||function(e,t,r,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n<3?s(o):n>3?s(t,r,o):s(t,r))||o);return n>3&&o&&Object.defineProperty(t,r,o),o},s=this&&this.__param||function(e,t){return function(r,i){t(r,i,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.Linkifier2=void 0;const n=r(3656),o=r(8460),a=r(844),l=r(2585);let c=t.Linkifier2=class extends a.Disposable{get currentLink(){return this._currentLink}constructor(e){super(),this._bufferService=e,this._linkProviders=[],this._linkCacheDisposables=[],this._isMouseOut=!0,this._wasResized=!1,this._activeLine=-1,this._onShowLinkUnderline=this.register(new o.EventEmitter),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this.register(new o.EventEmitter),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this.register((0,a.getDisposeArrayDisposable)(this._linkCacheDisposables)),this.register((0,a.toDisposable)(()=>{this._lastMouseEvent=void 0})),this.register(this._bufferService.onResize(()=>{this._clearCurrentLink(),this._wasResized=!0}))}registerLinkProvider(e){return this._linkProviders.push(e),{dispose:()=>{const t=this._linkProviders.indexOf(e);-1!==t&&this._linkProviders.splice(t,1)}}}attachToDom(e,t,r){this._element=e,this._mouseService=t,this._renderService=r,this.register((0,n.addDisposableDomListener)(this._element,"mouseleave",()=>{this._isMouseOut=!0,this._clearCurrentLink()})),this.register((0,n.addDisposableDomListener)(this._element,"mousemove",this._handleMouseMove.bind(this))),this.register((0,n.addDisposableDomListener)(this._element,"mousedown",this._handleMouseDown.bind(this))),this.register((0,n.addDisposableDomListener)(this._element,"mouseup",this._handleMouseUp.bind(this)))}_handleMouseMove(e){if(this._lastMouseEvent=e,!this._element||!this._mouseService)return;const t=this._positionFromMouseEvent(e,this._element,this._mouseService);if(!t)return;this._isMouseOut=!1;const r=e.composedPath();for(let i=0;i<r.length;i++){const e=r[i];if(e.classList.contains("xterm"))break;if(e.classList.contains("xterm-hover"))return}this._lastBufferCell&&t.x===this._lastBufferCell.x&&t.y===this._lastBufferCell.y||(this._handleHover(t),this._lastBufferCell=t)}_handleHover(e){if(this._activeLine!==e.y||this._wasResized)return this._clearCurrentLink(),this._askForLink(e,!1),void(this._wasResized=!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,e)||(this._clearCurrentLink(),this._askForLink(e,!0))}_askForLink(e,t){var r,i;this._activeProviderReplies&&t||(null===(r=this._activeProviderReplies)||void 0===r||r.forEach(e=>{null==e||e.forEach(e=>{e.link.dispose&&e.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=e.y);let s=!1;for(const[n,o]of this._linkProviders.entries())t?(null===(i=this._activeProviderReplies)||void 0===i?void 0:i.get(n))&&(s=this._checkLinkProviderResult(n,e,s)):o.provideLinks(e.y,t=>{var r,i;if(this._isMouseOut)return;const o=null==t?void 0:t.map(e=>({link:e}));null===(r=this._activeProviderReplies)||void 0===r||r.set(n,o),s=this._checkLinkProviderResult(n,e,s),(null===(i=this._activeProviderReplies)||void 0===i?void 0:i.size)===this._linkProviders.length&&this._removeIntersectingLinks(e.y,this._activeProviderReplies)})}_removeIntersectingLinks(e,t){const r=new Set;for(let i=0;i<t.size;i++){const s=t.get(i);if(s)for(let t=0;t<s.length;t++){const i=s[t],n=i.link.range.start.y<e?0:i.link.range.start.x,o=i.link.range.end.y>e?this._bufferService.cols:i.link.range.end.x;for(let e=n;e<=o;e++){if(r.has(e)){s.splice(t--,1);break}r.add(e)}}}}_checkLinkProviderResult(e,t,r){var i;if(!this._activeProviderReplies)return r;const s=this._activeProviderReplies.get(e);let n=!1;for(let o=0;o<e;o++)this._activeProviderReplies.has(o)&&!this._activeProviderReplies.get(o)||(n=!0);if(!n&&s){const e=s.find(e=>this._linkAtPosition(e.link,t));e&&(r=!0,this._handleNewLink(e))}if(this._activeProviderReplies.size===this._linkProviders.length&&!r)for(let o=0;o<this._activeProviderReplies.size;o++){const e=null===(i=this._activeProviderReplies.get(o))||void 0===i?void 0:i.find(e=>this._linkAtPosition(e.link,t));if(e){r=!0,this._handleNewLink(e);break}}return r}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(e){if(!this._element||!this._mouseService||!this._currentLink)return;const t=this._positionFromMouseEvent(e,this._element,this._mouseService);t&&this._mouseDownLink===this._currentLink&&this._linkAtPosition(this._currentLink.link,t)&&this._currentLink.link.activate(e,this._currentLink.link.text)}_clearCurrentLink(e,t){this._element&&this._currentLink&&this._lastMouseEvent&&(!e||!t||this._currentLink.link.range.start.y>=e&&this._currentLink.link.range.end.y<=t)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,a.disposeArray)(this._linkCacheDisposables))}_handleNewLink(e){if(!this._element||!this._lastMouseEvent||!this._mouseService)return;const t=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);t&&this._linkAtPosition(e.link,t)&&(this._currentLink=e,this._currentLink.state={decorations:{underline:void 0===e.link.decorations||e.link.decorations.underline,pointerCursor:void 0===e.link.decorations||e.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,e.link,this._lastMouseEvent),e.link.decorations={},Object.defineProperties(e.link.decorations,{pointerCursor:{get:()=>{var e,t;return null===(t=null===(e=this._currentLink)||void 0===e?void 0:e.state)||void 0===t?void 0:t.decorations.pointerCursor},set:e=>{var t,r;(null===(t=this._currentLink)||void 0===t?void 0:t.state)&&this._currentLink.state.decorations.pointerCursor!==e&&(this._currentLink.state.decorations.pointerCursor=e,this._currentLink.state.isHovered&&(null===(r=this._element)||void 0===r||r.classList.toggle("xterm-cursor-pointer",e)))}},underline:{get:()=>{var e,t;return null===(t=null===(e=this._currentLink)||void 0===e?void 0:e.state)||void 0===t?void 0:t.decorations.underline},set:t=>{var r,i,s;(null===(r=this._currentLink)||void 0===r?void 0:r.state)&&(null===(s=null===(i=this._currentLink)||void 0===i?void 0:i.state)||void 0===s?void 0:s.decorations.underline)!==t&&(this._currentLink.state.decorations.underline=t,this._currentLink.state.isHovered&&this._fireUnderlineEvent(e.link,t))}}}),this._renderService&&this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange(e=>{if(!this._currentLink)return;const t=0===e.start?0:e.start+1+this._bufferService.buffer.ydisp,r=this._bufferService.buffer.ydisp+1+e.end;if(this._currentLink.link.range.start.y>=t&&this._currentLink.link.range.end.y<=r&&(this._clearCurrentLink(t,r),this._lastMouseEvent&&this._element)){const e=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);e&&this._askForLink(e,!1)}})))}_linkHover(e,t,r){var i;(null===(i=this._currentLink)||void 0===i?void 0:i.state)&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(t,!0),this._currentLink.state.decorations.pointerCursor&&e.classList.add("xterm-cursor-pointer")),t.hover&&t.hover(r,t.text)}_fireUnderlineEvent(e,t){const r=e.range,i=this._bufferService.buffer.ydisp,s=this._createLinkUnderlineEvent(r.start.x-1,r.start.y-i-1,r.end.x,r.end.y-i-1,void 0);(t?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(s)}_linkLeave(e,t,r){var i;(null===(i=this._currentLink)||void 0===i?void 0:i.state)&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(t,!1),this._currentLink.state.decorations.pointerCursor&&e.classList.remove("xterm-cursor-pointer")),t.leave&&t.leave(r,t.text)}_linkAtPosition(e,t){const r=e.range.start.y*this._bufferService.cols+e.range.start.x,i=e.range.end.y*this._bufferService.cols+e.range.end.x,s=t.y*this._bufferService.cols+t.x;return r<=s&&s<=i}_positionFromMouseEvent(e,t,r){const i=r.getCoords(e,t,this._bufferService.cols,this._bufferService.rows);if(i)return{x:i[0],y:i[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(e,t,r,i,s){return{x1:e,y1:t,x2:r,y2:i,cols:this._bufferService.cols,fg:s}}};t.Linkifier2=c=i([s(0,l.IBufferService)],c)},9042:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.tooMuchOutput=t.promptLabel=void 0,t.promptLabel="Terminal input",t.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},3730:function(e,t,r){var i=this&&this.__decorate||function(e,t,r,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n<3?s(o):n>3?s(t,r,o):s(t,r))||o);return n>3&&o&&Object.defineProperty(t,r,o),o},s=this&&this.__param||function(e,t){return function(r,i){t(r,i,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.OscLinkProvider=void 0;const n=r(511),o=r(2585);let a=t.OscLinkProvider=class{constructor(e,t,r){this._bufferService=e,this._optionsService=t,this._oscLinkService=r}provideLinks(e,t){var r;const i=this._bufferService.buffer.lines.get(e-1);if(!i)return void t(void 0);const s=[],o=this._optionsService.rawOptions.linkHandler,a=new n.CellData,c=i.getTrimmedLength();let h=-1,u=-1,d=!1;for(let n=0;n<c;n++)if(-1!==u||i.hasContent(n)){if(i.loadCell(n,a),a.hasExtendedAttrs()&&a.extended.urlId){if(-1===u){u=n,h=a.extended.urlId;continue}d=a.extended.urlId!==h}else-1!==u&&(d=!0);if(d||-1!==u&&n===c-1){const t=null===(r=this._oscLinkService.getLinkData(h))||void 0===r?void 0:r.uri;if(t){const r={start:{x:u+1,y:e},end:{x:n+(d||n!==c-1?0:1),y:e}};let i=!1;if(!(null==o?void 0:o.allowNonHttpProtocols))try{const e=new URL(t);["http:","https:"].includes(e.protocol)||(i=!0)}catch(e){i=!0}i||s.push({text:t,range:r,activate:(e,t)=>o?o.activate(e,t,r):l(0,t),hover:(e,t)=>{var i;return null===(i=null==o?void 0:o.hover)||void 0===i?void 0:i.call(o,e,t,r)},leave:(e,t)=>{var i;return null===(i=null==o?void 0:o.leave)||void 0===i?void 0:i.call(o,e,t,r)}})}d=!1,a.hasExtendedAttrs()&&a.extended.urlId?(u=n,h=a.extended.urlId):(u=-1,h=-1)}}t(s)}};function l(e,t){if(confirm(`Do you want to navigate to ${t}?\n\nWARNING: This link could potentially be dangerous`)){const r=window.open();if(r){try{r.opener=null}catch(e){}r.location.href=t}else console.warn("Opening link blocked as opener could not be cleared")}}t.OscLinkProvider=a=i([s(0,o.IBufferService),s(1,o.IOptionsService),s(2,o.IOscLinkService)],a)},6193:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.RenderDebouncer=void 0,t.RenderDebouncer=class{constructor(e,t){this._parentWindow=e,this._renderCallback=t,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._parentWindow.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(e){return this._refreshCallbacks.push(e),this._animationFrame||(this._animationFrame=this._parentWindow.requestAnimationFrame(()=>this._innerRefresh())),this._animationFrame}refresh(e,t,r){this._rowCount=r,e=void 0!==e?e:0,t=void 0!==t?t:this._rowCount-1,this._rowStart=void 0!==this._rowStart?Math.min(this._rowStart,e):e,this._rowEnd=void 0!==this._rowEnd?Math.max(this._rowEnd,t):t,this._animationFrame||(this._animationFrame=this._parentWindow.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._animationFrame=void 0,void 0===this._rowStart||void 0===this._rowEnd||void 0===this._rowCount)return void this._runRefreshCallbacks();const e=Math.max(this._rowStart,0),t=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(e,t),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(const e of this._refreshCallbacks)e(0);this._refreshCallbacks=[]}}},5596:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ScreenDprMonitor=void 0;const i=r(844);class s extends i.Disposable{constructor(e){super(),this._parentWindow=e,this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this.register((0,i.toDisposable)(()=>{this.clearListener()}))}setListener(e){this._listener&&this.clearListener(),this._listener=e,this._outerListener=()=>{this._listener&&(this._listener(this._parentWindow.devicePixelRatio,this._currentDevicePixelRatio),this._updateDpr())},this._updateDpr()}_updateDpr(){var e;this._outerListener&&(null===(e=this._resolutionMediaMatchList)||void 0===e||e.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){this._resolutionMediaMatchList&&this._listener&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._listener=void 0,this._outerListener=void 0)}}t.ScreenDprMonitor=s},3236:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Terminal=void 0;const i=r(3614),s=r(3656),n=r(6465),o=r(9042),a=r(3730),l=r(1680),c=r(3107),h=r(5744),u=r(2950),d=r(1296),f=r(428),p=r(4269),_=r(5114),v=r(8934),g=r(3230),m=r(9312),b=r(4725),y=r(6731),S=r(8055),w=r(8969),C=r(8460),x=r(844),k=r(6114),E=r(8437),L=r(2584),R=r(7399),D=r(5941),A=r(9074),T=r(2585),P=r(5435),B=r(4567),O="undefined"!=typeof window?window.document:null;class M extends w.CoreTerminal{get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}constructor(e={}){super(e),this.browser=k,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._accessibilityManager=this.register(new x.MutableDisposable),this._onCursorMove=this.register(new C.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onKey=this.register(new C.EventEmitter),this.onKey=this._onKey.event,this._onRender=this.register(new C.EventEmitter),this.onRender=this._onRender.event,this._onSelectionChange=this.register(new C.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this.register(new C.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onBell=this.register(new C.EventEmitter),this.onBell=this._onBell.event,this._onFocus=this.register(new C.EventEmitter),this._onBlur=this.register(new C.EventEmitter),this._onA11yCharEmitter=this.register(new C.EventEmitter),this._onA11yTabEmitter=this.register(new C.EventEmitter),this._onWillOpen=this.register(new C.EventEmitter),this._setup(),this.linkifier2=this.register(this._instantiationService.createInstance(n.Linkifier2)),this.linkifier2.registerLinkProvider(this._instantiationService.createInstance(a.OscLinkProvider)),this._decorationService=this._instantiationService.createInstance(A.DecorationService),this._instantiationService.setService(T.IDecorationService,this._decorationService),this.register(this._inputHandler.onRequestBell(()=>this._onBell.fire())),this.register(this._inputHandler.onRequestRefreshRows((e,t)=>this.refresh(e,t))),this.register(this._inputHandler.onRequestSendFocus(()=>this._reportFocus())),this.register(this._inputHandler.onRequestReset(()=>this.reset())),this.register(this._inputHandler.onRequestWindowsOptionsReport(e=>this._reportWindowsOptions(e))),this.register(this._inputHandler.onColor(e=>this._handleColorEvent(e))),this.register((0,C.forwardEvent)(this._inputHandler.onCursorMove,this._onCursorMove)),this.register((0,C.forwardEvent)(this._inputHandler.onTitleChange,this._onTitleChange)),this.register((0,C.forwardEvent)(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this.register((0,C.forwardEvent)(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this.register(this._bufferService.onResize(e=>this._afterResize(e.cols,e.rows))),this.register((0,x.toDisposable)(()=>{var e,t;this._customKeyEventHandler=void 0,null===(t=null===(e=this.element)||void 0===e?void 0:e.parentNode)||void 0===t||t.removeChild(this.element)}))}_handleColorEvent(e){if(this._themeService)for(const t of e){let e,r="";switch(t.index){case 256:e="foreground",r="10";break;case 257:e="background",r="11";break;case 258:e="cursor",r="12";break;default:e="ansi",r="4;"+t.index}switch(t.type){case 0:const i=S.color.toColorRGB("ansi"===e?this._themeService.colors.ansi[t.index]:this._themeService.colors[e]);this.coreService.triggerDataEvent(`${L.C0.ESC}]${r};${(0,D.toRgbString)(i)}${L.C1_ESCAPED.ST}`);break;case 1:if("ansi"===e)this._themeService.modifyColors(e=>e.ansi[t.index]=S.rgba.toColor(...t.color));else{const r=e;this._themeService.modifyColors(e=>e[r]=S.rgba.toColor(...t.color))}break;case 2:this._themeService.restoreColor(t.index)}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(e){e?!this._accessibilityManager.value&&this._renderService&&(this._accessibilityManager.value=this._instantiationService.createInstance(B.AccessibilityManager,this)):this._accessibilityManager.clear()}_handleTextAreaFocus(e){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(L.C0.ESC+"[I"),this.updateCursorStyle(e),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){var e;return null===(e=this.textarea)||void 0===e?void 0:e.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(L.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;const e=this.buffer.ybase+this.buffer.y,t=this.buffer.lines.get(e);if(!t)return;const r=Math.min(this.buffer.x,this.cols-1),i=this._renderService.dimensions.css.cell.height,s=t.getWidth(r),n=this._renderService.dimensions.css.cell.width*s,o=this.buffer.y*this._renderService.dimensions.css.cell.height,a=r*this._renderService.dimensions.css.cell.width;this.textarea.style.left=a+"px",this.textarea.style.top=o+"px",this.textarea.style.width=n+"px",this.textarea.style.height=i+"px",this.textarea.style.lineHeight=i+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this.register((0,s.addDisposableDomListener)(this.element,"copy",e=>{this.hasSelection()&&(0,i.copyHandler)(e,this._selectionService)}));const e=e=>(0,i.handlePasteEvent)(e,this.textarea,this.coreService,this.optionsService);this.register((0,s.addDisposableDomListener)(this.textarea,"paste",e)),this.register((0,s.addDisposableDomListener)(this.element,"paste",e)),k.isFirefox?this.register((0,s.addDisposableDomListener)(this.element,"mousedown",e=>{2===e.button&&(0,i.rightClickHandler)(e,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})):this.register((0,s.addDisposableDomListener)(this.element,"contextmenu",e=>{(0,i.rightClickHandler)(e,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})),k.isLinux&&this.register((0,s.addDisposableDomListener)(this.element,"auxclick",e=>{1===e.button&&(0,i.moveTextAreaUnderMouseCursor)(e,this.textarea,this.screenElement)}))}_bindKeys(){this.register((0,s.addDisposableDomListener)(this.textarea,"keyup",e=>this._keyUp(e),!0)),this.register((0,s.addDisposableDomListener)(this.textarea,"keydown",e=>this._keyDown(e),!0)),this.register((0,s.addDisposableDomListener)(this.textarea,"keypress",e=>this._keyPress(e),!0)),this.register((0,s.addDisposableDomListener)(this.textarea,"compositionstart",()=>this._compositionHelper.compositionstart())),this.register((0,s.addDisposableDomListener)(this.textarea,"compositionupdate",e=>this._compositionHelper.compositionupdate(e))),this.register((0,s.addDisposableDomListener)(this.textarea,"compositionend",()=>this._compositionHelper.compositionend())),this.register((0,s.addDisposableDomListener)(this.textarea,"input",e=>this._inputEvent(e),!0)),this.register(this.onRender(()=>this._compositionHelper.updateCompositionElements()))}open(e){var t;if(!e)throw new Error("Terminal requires a parent element.");e.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),this._document=e.ownerDocument,this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),e.appendChild(this.element);const r=O.createDocumentFragment();this._viewportElement=O.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),r.appendChild(this._viewportElement),this._viewportScrollArea=O.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=O.createElement("div"),this.screenElement.classList.add("xterm-screen"),this._helperContainer=O.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),r.appendChild(this.screenElement),this.textarea=O.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",o.promptLabel),k.isChromeOS||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._coreBrowserService=this._instantiationService.createInstance(_.CoreBrowserService,this.textarea,null!==(t=this._document.defaultView)&&void 0!==t?t:window),this._instantiationService.setService(b.ICoreBrowserService,this._coreBrowserService),this.register((0,s.addDisposableDomListener)(this.textarea,"focus",e=>this._handleTextAreaFocus(e))),this.register((0,s.addDisposableDomListener)(this.textarea,"blur",()=>this._handleTextAreaBlur())),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(f.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(b.ICharSizeService,this._charSizeService),this._themeService=this._instantiationService.createInstance(y.ThemeService),this._instantiationService.setService(b.IThemeService,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(p.CharacterJoinerService),this._instantiationService.setService(b.ICharacterJoinerService,this._characterJoinerService),this._renderService=this.register(this._instantiationService.createInstance(g.RenderService,this.rows,this.screenElement)),this._instantiationService.setService(b.IRenderService,this._renderService),this.register(this._renderService.onRenderedViewportChange(e=>this._onRender.fire(e))),this.onResize(e=>this._renderService.resize(e.cols,e.rows)),this._compositionView=O.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(u.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this.element.appendChild(r);try{this._onWillOpen.fire(this.element)}catch(e){}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this._mouseService=this._instantiationService.createInstance(v.MouseService),this._instantiationService.setService(b.IMouseService,this._mouseService),this.viewport=this._instantiationService.createInstance(l.Viewport,this._viewportElement,this._viewportScrollArea),this.viewport.onRequestScrollLines(e=>this.scrollLines(e.amount,e.suppressScrollEvent,1)),this.register(this._inputHandler.onRequestSyncScrollBar(()=>this.viewport.syncScrollArea())),this.register(this.viewport),this.register(this.onCursorMove(()=>{this._renderService.handleCursorMove(),this._syncTextArea()})),this.register(this.onResize(()=>this._renderService.handleResize(this.cols,this.rows))),this.register(this.onBlur(()=>this._renderService.handleBlur())),this.register(this.onFocus(()=>this._renderService.handleFocus())),this.register(this._renderService.onDimensionsChange(()=>this.viewport.syncScrollArea())),this._selectionService=this.register(this._instantiationService.createInstance(m.SelectionService,this.element,this.screenElement,this.linkifier2)),this._instantiationService.setService(b.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines(e=>this.scrollLines(e.amount,e.suppressScrollEvent))),this.register(this._selectionService.onSelectionChange(()=>this._onSelectionChange.fire())),this.register(this._selectionService.onRequestRedraw(e=>this._renderService.handleSelectionChanged(e.start,e.end,e.columnSelectMode))),this.register(this._selectionService.onLinuxMouseSelection(e=>{this.textarea.value=e,this.textarea.focus(),this.textarea.select()})),this.register(this._onScroll.event(e=>{this.viewport.syncScrollArea(),this._selectionService.refresh()})),this.register((0,s.addDisposableDomListener)(this._viewportElement,"scroll",()=>this._selectionService.refresh())),this.linkifier2.attachToDom(this.screenElement,this._mouseService,this._renderService),this.register(this._instantiationService.createInstance(c.BufferDecorationRenderer,this.screenElement)),this.register((0,s.addDisposableDomListener)(this.element,"mousedown",e=>this._selectionService.handleMouseDown(e))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager.value=this._instantiationService.createInstance(B.AccessibilityManager,this)),this.register(this.optionsService.onSpecificOptionChange("screenReaderMode",e=>this._handleScreenReaderModeOptionChange(e))),this.options.overviewRulerWidth&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(h.OverviewRulerRenderer,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRulerWidth",e=>{!this._overviewRulerRenderer&&e&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(h.OverviewRulerRenderer,this._viewportElement,this.screenElement)))}),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(d.DomRenderer,this.element,this.screenElement,this._viewportElement,this.linkifier2)}bindMouse(){const e=this,t=this.element;function r(t){const r=e._mouseService.getMouseReportCoords(t,e.screenElement);if(!r)return!1;let i,s;switch(t.overrideType||t.type){case"mousemove":s=32,void 0===t.buttons?(i=3,void 0!==t.button&&(i=t.button<3?t.button:3)):i=1&t.buttons?0:4&t.buttons?1:2&t.buttons?2:3;break;case"mouseup":s=0,i=t.button<3?t.button:3;break;case"mousedown":s=1,i=t.button<3?t.button:3;break;case"wheel":if(0===e.viewport.getLinesScrolled(t))return!1;s=t.deltaY<0?0:1,i=4;break;default:return!1}return!(void 0===s||void 0===i||i>4)&&e.coreMouseService.triggerMouseEvent({col:r.col,row:r.row,x:r.x,y:r.y,button:i,action:s,ctrl:t.ctrlKey,alt:t.altKey,shift:t.shiftKey})}const i={mouseup:null,wheel:null,mousedrag:null,mousemove:null},n={mouseup:e=>(r(e),e.buttons||(this._document.removeEventListener("mouseup",i.mouseup),i.mousedrag&&this._document.removeEventListener("mousemove",i.mousedrag)),this.cancel(e)),wheel:e=>(r(e),this.cancel(e,!0)),mousedrag:e=>{e.buttons&&r(e)},mousemove:e=>{e.buttons||r(e)}};this.register(this.coreMouseService.onProtocolChange(e=>{e?("debug"===this.optionsService.rawOptions.logLevel&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents(e)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),8&e?i.mousemove||(t.addEventListener("mousemove",n.mousemove),i.mousemove=n.mousemove):(t.removeEventListener("mousemove",i.mousemove),i.mousemove=null),16&e?i.wheel||(t.addEventListener("wheel",n.wheel,{passive:!1}),i.wheel=n.wheel):(t.removeEventListener("wheel",i.wheel),i.wheel=null),2&e?i.mouseup||(t.addEventListener("mouseup",n.mouseup),i.mouseup=n.mouseup):(this._document.removeEventListener("mouseup",i.mouseup),t.removeEventListener("mouseup",i.mouseup),i.mouseup=null),4&e?i.mousedrag||(i.mousedrag=n.mousedrag):(this._document.removeEventListener("mousemove",i.mousedrag),i.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,s.addDisposableDomListener)(t,"mousedown",e=>{if(e.preventDefault(),this.focus(),this.coreMouseService.areMouseEventsActive&&!this._selectionService.shouldForceSelection(e))return r(e),i.mouseup&&this._document.addEventListener("mouseup",i.mouseup),i.mousedrag&&this._document.addEventListener("mousemove",i.mousedrag),this.cancel(e)})),this.register((0,s.addDisposableDomListener)(t,"wheel",e=>{if(!i.wheel){if(!this.buffer.hasScrollback){const t=this.viewport.getLinesScrolled(e);if(0===t)return;const r=L.C0.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(e.deltaY<0?"A":"B");let i="";for(let e=0;e<Math.abs(t);e++)i+=r;return this.coreService.triggerDataEvent(i,!0),this.cancel(e,!0)}return this.viewport.handleWheel(e)?this.cancel(e):void 0}},{passive:!1})),this.register((0,s.addDisposableDomListener)(t,"touchstart",e=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchStart(e),this.cancel(e)},{passive:!0})),this.register((0,s.addDisposableDomListener)(t,"touchmove",e=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchMove(e)?void 0:this.cancel(e)},{passive:!1}))}refresh(e,t){var r;null===(r=this._renderService)||void 0===r||r.refreshRows(e,t)}updateCursorStyle(e){var t;(null===(t=this._selectionService)||void 0===t?void 0:t.shouldColumnSelect(e))?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(e,t,r=0){var i;1===r?(super.scrollLines(e,t,r),this.refresh(0,this.rows-1)):null===(i=this.viewport)||void 0===i||i.scrollLines(e)}paste(e){(0,i.paste)(e,this.textarea,this.coreService,this.optionsService)}attachCustomKeyEventHandler(e){this._customKeyEventHandler=e}registerLinkProvider(e){return this.linkifier2.registerLinkProvider(e)}registerCharacterJoiner(e){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");const t=this._characterJoinerService.register(e);return this.refresh(0,this.rows-1),t}deregisterCharacterJoiner(e){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(e)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}registerMarker(e){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+e)}registerDecoration(e){return this._decorationService.registerDecoration(e)}hasSelection(){return!!this._selectionService&&this._selectionService.hasSelection}select(e,t,r){this._selectionService.setSelection(e,t,r)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(this._selectionService&&this._selectionService.hasSelection)return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){var e;null===(e=this._selectionService)||void 0===e||e.clearSelection()}selectAll(){var e;null===(e=this._selectionService)||void 0===e||e.selectAll()}selectLines(e,t){var r;null===(r=this._selectionService)||void 0===r||r.selectLines(e,t)}_keyDown(e){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&!1===this._customKeyEventHandler(e))return!1;const t=this.browser.isMac&&this.options.macOptionIsMeta&&e.altKey;if(!t&&!this._compositionHelper.keydown(e))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),!1;t||"Dead"!==e.key&&"AltGraph"!==e.key||(this._unprocessedDeadKey=!0);const r=(0,R.evaluateKeyboardEvent)(e,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(e),3===r.type||2===r.type){const t=this.rows-1;return this.scrollLines(2===r.type?-t:t),this.cancel(e,!0)}return 1===r.type&&this.selectAll(),!!this._isThirdLevelShift(this.browser,e)||(r.cancel&&this.cancel(e,!0),!r.key||!!(e.key&&!e.ctrlKey&&!e.altKey&&!e.metaKey&&1===e.key.length&&e.key.charCodeAt(0)>=65&&e.key.charCodeAt(0)<=90)||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(r.key!==L.C0.ETX&&r.key!==L.C0.CR||(this.textarea.value=""),this._onKey.fire({key:r.key,domEvent:e}),this._showCursor(),this.coreService.triggerDataEvent(r.key,!0),!this.optionsService.rawOptions.screenReaderMode||e.altKey||e.ctrlKey?this.cancel(e,!0):void(this._keyDownHandled=!0))))}_isThirdLevelShift(e,t){const r=e.isMac&&!this.options.macOptionIsMeta&&t.altKey&&!t.ctrlKey&&!t.metaKey||e.isWindows&&t.altKey&&t.ctrlKey&&!t.metaKey||e.isWindows&&t.getModifierState("AltGraph");return"keypress"===t.type?r:r&&(!t.keyCode||t.keyCode>47)}_keyUp(e){this._keyDownSeen=!1,this._customKeyEventHandler&&!1===this._customKeyEventHandler(e)||(function(e){return 16===e.keyCode||17===e.keyCode||18===e.keyCode}(e)||this.focus(),this.updateCursorStyle(e),this._keyPressHandled=!1)}_keyPress(e){let t;if(this._keyPressHandled=!1,this._keyDownHandled)return!1;if(this._customKeyEventHandler&&!1===this._customKeyEventHandler(e))return!1;if(this.cancel(e),e.charCode)t=e.charCode;else if(null===e.which||void 0===e.which)t=e.keyCode;else{if(0===e.which||0===e.charCode)return!1;t=e.which}return!(!t||(e.altKey||e.ctrlKey||e.metaKey)&&!this._isThirdLevelShift(this.browser,e)||(t=String.fromCharCode(t),this._onKey.fire({key:t,domEvent:e}),this._showCursor(),this.coreService.triggerDataEvent(t,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))}_inputEvent(e){if(e.data&&"insertText"===e.inputType&&(!e.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;const t=e.data;return this.coreService.triggerDataEvent(t,!0),this.cancel(e),!0}return!1}resize(e,t){e!==this.cols||t!==this.rows?super.resize(e,t):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()}_afterResize(e,t){var r,i;null===(r=this._charSizeService)||void 0===r||r.measure(),null===(i=this.viewport)||void 0===i||i.syncScrollArea(!0)}clear(){var e;if(0!==this.buffer.ybase||0!==this.buffer.y){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let e=1;e<this.rows;e++)this.buffer.lines.push(this.buffer.getBlankLine(E.DEFAULT_ATTR_DATA));this._onScroll.fire({position:this.buffer.ydisp,source:0}),null===(e=this.viewport)||void 0===e||e.reset(),this.refresh(0,this.rows-1)}}reset(){var e,t;this.options.rows=this.rows,this.options.cols=this.cols;const r=this._customKeyEventHandler;this._setup(),super.reset(),null===(e=this._selectionService)||void 0===e||e.reset(),this._decorationService.reset(),null===(t=this.viewport)||void 0===t||t.reset(),this._customKeyEventHandler=r,this.refresh(0,this.rows-1)}clearTextureAtlas(){var e;null===(e=this._renderService)||void 0===e||e.clearTextureAtlas()}_reportFocus(){var e;(null===(e=this.element)||void 0===e?void 0:e.classList.contains("focus"))?this.coreService.triggerDataEvent(L.C0.ESC+"[I"):this.coreService.triggerDataEvent(L.C0.ESC+"[O")}_reportWindowsOptions(e){if(this._renderService)switch(e){case P.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:const e=this._renderService.dimensions.css.canvas.width.toFixed(0),t=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${L.C0.ESC}[4;${t};${e}t`);break;case P.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:const r=this._renderService.dimensions.css.cell.width.toFixed(0),i=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${L.C0.ESC}[6;${i};${r}t`)}}cancel(e,t){if(this.options.cancelEvents||t)return e.preventDefault(),e.stopPropagation(),!1}}t.Terminal=M},9924:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TimeBasedDebouncer=void 0,t.TimeBasedDebouncer=class{constructor(e,t=1e3){this._renderCallback=e,this._debounceThresholdMS=t,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(e,t,r){this._rowCount=r,e=void 0!==e?e:0,t=void 0!==t?t:this._rowCount-1,this._rowStart=void 0!==this._rowStart?Math.min(this._rowStart,e):e,this._rowEnd=void 0!==this._rowEnd?Math.max(this._rowEnd,t):t;const i=Date.now();if(i-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=i,this._innerRefresh();else if(!this._additionalRefreshRequested){const e=i-this._lastRefreshMs,t=this._debounceThresholdMS-e;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(()=>{this._lastRefreshMs=Date.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0},t)}}_innerRefresh(){if(void 0===this._rowStart||void 0===this._rowEnd||void 0===this._rowCount)return;const e=Math.max(this._rowStart,0),t=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(e,t)}}},1680:function(e,t,r){var i=this&&this.__decorate||function(e,t,r,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n<3?s(o):n>3?s(t,r,o):s(t,r))||o);return n>3&&o&&Object.defineProperty(t,r,o),o},s=this&&this.__param||function(e,t){return function(r,i){t(r,i,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.Viewport=void 0;const n=r(3656),o=r(4725),a=r(8460),l=r(844),c=r(2585);let h=t.Viewport=class extends l.Disposable{constructor(e,t,r,i,s,o,l,c){super(),this._viewportElement=e,this._scrollArea=t,this._bufferService=r,this._optionsService=i,this._charSizeService=s,this._renderService=o,this._coreBrowserService=l,this.scrollBarWidth=0,this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._wheelPartialScroll=0,this._refreshAnimationFrame=null,this._ignoreNextScrollEvent=!1,this._smoothScrollState={startTime:0,origin:-1,target:-1},this._onRequestScrollLines=this.register(new a.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this.register((0,n.addDisposableDomListener)(this._viewportElement,"scroll",this._handleScroll.bind(this))),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(e=>this._activeBuffer=e.activeBuffer)),this._renderDimensions=this._renderService.dimensions,this.register(this._renderService.onDimensionsChange(e=>this._renderDimensions=e)),this._handleThemeChange(c.colors),this.register(c.onChangeColors(e=>this._handleThemeChange(e))),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.syncScrollArea())),setTimeout(()=>this.syncScrollArea())}_handleThemeChange(e){this._viewportElement.style.backgroundColor=e.background.css}reset(){this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._coreBrowserService.window.requestAnimationFrame(()=>this.syncScrollArea())}_refresh(e){if(e)return this._innerRefresh(),void(null!==this._refreshAnimationFrame&&this._coreBrowserService.window.cancelAnimationFrame(this._refreshAnimationFrame));null===this._refreshAnimationFrame&&(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderService.dimensions.device.cell.height/this._coreBrowserService.dpr,this._currentDeviceCellHeight=this._renderService.dimensions.device.cell.height,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;const e=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderService.dimensions.css.canvas.height);this._lastRecordedBufferHeight!==e&&(this._lastRecordedBufferHeight=e,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}const e=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==e&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=e),this._refreshAnimationFrame=null}syncScrollArea(e=!1){if(this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(e);this._lastRecordedViewportHeight===this._renderService.dimensions.css.canvas.height&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.device.cell.height===this._currentDeviceCellHeight||this._refresh(e)}_handleScroll(e){if(this._lastScrollTop=this._viewportElement.scrollTop,!this._viewportElement.offsetParent)return;if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._onRequestScrollLines.fire({amount:0,suppressScrollEvent:!0});const t=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._onRequestScrollLines.fire({amount:t,suppressScrollEvent:!0})}_smoothScroll(){if(this._isDisposed||-1===this._smoothScrollState.origin||-1===this._smoothScrollState.target)return;const e=this._smoothScrollPercent();this._viewportElement.scrollTop=this._smoothScrollState.origin+Math.round(e*(this._smoothScrollState.target-this._smoothScrollState.origin)),e<1?this._coreBrowserService.window.requestAnimationFrame(()=>this._smoothScroll()):this._clearSmoothScrollState()}_smoothScrollPercent(){return this._optionsService.rawOptions.smoothScrollDuration&&this._smoothScrollState.startTime?Math.max(Math.min((Date.now()-this._smoothScrollState.startTime)/this._optionsService.rawOptions.smoothScrollDuration,1),0):1}_clearSmoothScrollState(){this._smoothScrollState.startTime=0,this._smoothScrollState.origin=-1,this._smoothScrollState.target=-1}_bubbleScroll(e,t){const r=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(t<0&&0!==this._viewportElement.scrollTop||t>0&&r<this._lastRecordedBufferHeight)||(e.cancelable&&e.preventDefault(),!1)}handleWheel(e){const t=this._getPixelsScrolled(e);return 0!==t&&(this._optionsService.rawOptions.smoothScrollDuration?(this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,-1===this._smoothScrollState.target?this._smoothScrollState.target=this._viewportElement.scrollTop+t:this._smoothScrollState.target+=t,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()):this._viewportElement.scrollTop+=t,this._bubbleScroll(e,t))}scrollLines(e){if(0!==e)if(this._optionsService.rawOptions.smoothScrollDuration){const t=e*this._currentRowHeight;this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target=this._smoothScrollState.origin+t,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()}else this._onRequestScrollLines.fire({amount:e,suppressScrollEvent:!1})}_getPixelsScrolled(e){if(0===e.deltaY||e.shiftKey)return 0;let t=this._applyScrollModifier(e.deltaY,e);return e.deltaMode===WheelEvent.DOM_DELTA_LINE?t*=this._currentRowHeight:e.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(t*=this._currentRowHeight*this._bufferService.rows),t}getBufferElements(e,t){var r;let i,s="";const n=[],o=null!=t?t:this._bufferService.buffer.lines.length,a=this._bufferService.buffer.lines;for(let l=e;l<o;l++){const e=a.get(l);if(!e)continue;const t=null===(r=a.get(l+1))||void 0===r?void 0:r.isWrapped;if(s+=e.translateToString(!t),!t||l===a.length-1){const e=document.createElement("div");e.textContent=s,n.push(e),s.length>0&&(i=e),s=""}}return{bufferElements:n,cursorElement:i}}getLinesScrolled(e){if(0===e.deltaY||e.shiftKey)return 0;let t=this._applyScrollModifier(e.deltaY,e);return e.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(t/=this._currentRowHeight+0,this._wheelPartialScroll+=t,t=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):e.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(t*=this._bufferService.rows),t}_applyScrollModifier(e,t){const r=this._optionsService.rawOptions.fastScrollModifier;return"alt"===r&&t.altKey||"ctrl"===r&&t.ctrlKey||"shift"===r&&t.shiftKey?e*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:e*this._optionsService.rawOptions.scrollSensitivity}handleTouchStart(e){this._lastTouchY=e.touches[0].pageY}handleTouchMove(e){const t=this._lastTouchY-e.touches[0].pageY;return this._lastTouchY=e.touches[0].pageY,0!==t&&(this._viewportElement.scrollTop+=t,this._bubbleScroll(e,t))}};t.Viewport=h=i([s(2,c.IBufferService),s(3,c.IOptionsService),s(4,o.ICharSizeService),s(5,o.IRenderService),s(6,o.ICoreBrowserService),s(7,o.IThemeService)],h)},3107:function(e,t,r){var i=this&&this.__decorate||function(e,t,r,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n<3?s(o):n>3?s(t,r,o):s(t,r))||o);return n>3&&o&&Object.defineProperty(t,r,o),o},s=this&&this.__param||function(e,t){return function(r,i){t(r,i,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.BufferDecorationRenderer=void 0;const n=r(3656),o=r(4725),a=r(844),l=r(2585);let c=t.BufferDecorationRenderer=class extends a.Disposable{constructor(e,t,r,i){super(),this._screenElement=e,this._bufferService=t,this._decorationService=r,this._renderService=i,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this.register(this._renderService.onRenderedViewportChange(()=>this._doRefreshDecorations())),this.register(this._renderService.onDimensionsChange(()=>{this._dimensionsChanged=!0,this._queueRefresh()})),this.register((0,n.addDisposableDomListener)(window,"resize",()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt})),this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh())),this.register(this._decorationService.onDecorationRemoved(e=>this._removeDecoration(e))),this.register((0,a.toDisposable)(()=>{this._container.remove(),this._decorationElements.clear()}))}_queueRefresh(){void 0===this._animationFrame&&(this._animationFrame=this._renderService.addRefreshCallback(()=>{this._doRefreshDecorations(),this._animationFrame=void 0}))}_doRefreshDecorations(){for(const e of this._decorationService.decorations)this._renderDecoration(e);this._dimensionsChanged=!1}_renderDecoration(e){this._refreshStyle(e),this._dimensionsChanged&&this._refreshXPosition(e)}_createElement(e){var t,r;const i=document.createElement("div");i.classList.add("xterm-decoration"),i.classList.toggle("xterm-decoration-top-layer","top"===(null===(t=null==e?void 0:e.options)||void 0===t?void 0:t.layer)),i.style.width=`${Math.round((e.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,i.style.height=(e.options.height||1)*this._renderService.dimensions.css.cell.height+"px",i.style.top=(e.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height+"px",i.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;const s=null!==(r=e.options.x)&&void 0!==r?r:0;return s&&s>this._bufferService.cols&&(i.style.display="none"),this._refreshXPosition(e,i),i}_refreshStyle(e){const t=e.marker.line-this._bufferService.buffers.active.ydisp;if(t<0||t>=this._bufferService.rows)e.element&&(e.element.style.display="none",e.onRenderEmitter.fire(e.element));else{let r=this._decorationElements.get(e);r||(r=this._createElement(e),e.element=r,this._decorationElements.set(e,r),this._container.appendChild(r),e.onDispose(()=>{this._decorationElements.delete(e),r.remove()})),r.style.top=t*this._renderService.dimensions.css.cell.height+"px",r.style.display=this._altBufferIsActive?"none":"block",e.onRenderEmitter.fire(r)}}_refreshXPosition(e,t=e.element){var r;if(!t)return;const i=null!==(r=e.options.x)&&void 0!==r?r:0;"right"===(e.options.anchor||"left")?t.style.right=i?i*this._renderService.dimensions.css.cell.width+"px":"":t.style.left=i?i*this._renderService.dimensions.css.cell.width+"px":""}_removeDecoration(e){var t;null===(t=this._decorationElements.get(e))||void 0===t||t.remove(),this._decorationElements.delete(e),e.dispose()}};t.BufferDecorationRenderer=c=i([s(1,l.IBufferService),s(2,l.IDecorationService),s(3,o.IRenderService)],c)},5871:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ColorZoneStore=void 0,t.ColorZoneStore=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(e){if(e.options.overviewRulerOptions){for(const t of this._zones)if(t.color===e.options.overviewRulerOptions.color&&t.position===e.options.overviewRulerOptions.position){if(this._lineIntersectsZone(t,e.marker.line))return;if(this._lineAdjacentToZone(t,e.marker.line,e.options.overviewRulerOptions.position))return void this._addLineToZone(t,e.marker.line)}if(this._zonePoolIndex<this._zonePool.length)return this._zonePool[this._zonePoolIndex].color=e.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=e.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=e.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=e.marker.line,void this._zones.push(this._zonePool[this._zonePoolIndex++]);this._zones.push({color:e.options.overviewRulerOptions.color,position:e.options.overviewRulerOptions.position,startBufferLine:e.marker.line,endBufferLine:e.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(e){this._linePadding=e}_lineIntersectsZone(e,t){return t>=e.startBufferLine&&t<=e.endBufferLine}_lineAdjacentToZone(e,t,r){return t>=e.startBufferLine-this._linePadding[r||"full"]&&t<=e.endBufferLine+this._linePadding[r||"full"]}_addLineToZone(e,t){e.startBufferLine=Math.min(e.startBufferLine,t),e.endBufferLine=Math.max(e.endBufferLine,t)}}},5744:function(e,t,r){var i=this&&this.__decorate||function(e,t,r,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n<3?s(o):n>3?s(t,r,o):s(t,r))||o);return n>3&&o&&Object.defineProperty(t,r,o),o},s=this&&this.__param||function(e,t){return function(r,i){t(r,i,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.OverviewRulerRenderer=void 0;const n=r(5871),o=r(3656),a=r(4725),l=r(844),c=r(2585),h={full:0,left:0,center:0,right:0},u={full:0,left:0,center:0,right:0},d={full:0,left:0,center:0,right:0};let f=t.OverviewRulerRenderer=class extends l.Disposable{get _width(){return this._optionsService.options.overviewRulerWidth||0}constructor(e,t,r,i,s,o,a){var c;super(),this._viewportElement=e,this._screenElement=t,this._bufferService=r,this._decorationService=i,this._renderService=s,this._optionsService=o,this._coreBrowseService=a,this._colorZoneStore=new n.ColorZoneStore,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=document.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),null===(c=this._viewportElement.parentElement)||void 0===c||c.insertBefore(this._canvas,this._viewportElement);const h=this._canvas.getContext("2d");if(!h)throw new Error("Ctx cannot be null");this._ctx=h,this._registerDecorationListeners(),this._registerBufferChangeListeners(),this._registerDimensionChangeListeners(),this.register((0,l.toDisposable)(()=>{var e;null===(e=this._canvas)||void 0===e||e.remove()}))}_registerDecorationListeners(){this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh(void 0,!0))),this.register(this._decorationService.onDecorationRemoved(()=>this._queueRefresh(void 0,!0)))}_registerBufferChangeListeners(){this.register(this._renderService.onRenderedViewportChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"})),this.register(this._bufferService.onScroll(()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())}))}_registerDimensionChangeListeners(){this.register(this._renderService.onRender(()=>{this._containerHeight&&this._containerHeight===this._screenElement.clientHeight||(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)})),this.register(this._optionsService.onSpecificOptionChange("overviewRulerWidth",()=>this._queueRefresh(!0))),this.register((0,o.addDisposableDomListener)(this._coreBrowseService.window,"resize",()=>this._queueRefresh(!0))),this._queueRefresh(!0)}_refreshDrawConstants(){const e=Math.floor(this._canvas.width/3),t=Math.ceil(this._canvas.width/3);u.full=this._canvas.width,u.left=e,u.center=t,u.right=e,this._refreshDrawHeightConstants(),d.full=0,d.left=0,d.center=u.left,d.right=u.left+u.center}_refreshDrawHeightConstants(){h.full=Math.round(2*this._coreBrowseService.dpr);const e=this._canvas.height/this._bufferService.buffer.lines.length,t=Math.round(Math.max(Math.min(e,12),6)*this._coreBrowseService.dpr);h.left=t,h.center=t,h.right=t}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*h.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*h.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*h.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*h.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowseService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowseService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(const t of this._decorationService.decorations)this._colorZoneStore.addDecoration(t);this._ctx.lineWidth=1;const e=this._colorZoneStore.zones;for(const t of e)"full"!==t.position&&this._renderColorZone(t);for(const t of e)"full"===t.position&&this._renderColorZone(t);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderColorZone(e){this._ctx.fillStyle=e.color,this._ctx.fillRect(d[e.position||"full"],Math.round((this._canvas.height-1)*(e.startBufferLine/this._bufferService.buffers.active.lines.length)-h[e.position||"full"]/2),u[e.position||"full"],Math.round((this._canvas.height-1)*((e.endBufferLine-e.startBufferLine)/this._bufferService.buffers.active.lines.length)+h[e.position||"full"]))}_queueRefresh(e,t){this._shouldUpdateDimensions=e||this._shouldUpdateDimensions,this._shouldUpdateAnchor=t||this._shouldUpdateAnchor,void 0===this._animationFrame&&(this._animationFrame=this._coreBrowseService.window.requestAnimationFrame(()=>{this._refreshDecorations(),this._animationFrame=void 0}))}};t.OverviewRulerRenderer=f=i([s(2,c.IBufferService),s(3,c.IDecorationService),s(4,a.IRenderService),s(5,c.IOptionsService),s(6,a.ICoreBrowserService)],f)},2950:function(e,t,r){var i=this&&this.__decorate||function(e,t,r,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n<3?s(o):n>3?s(t,r,o):s(t,r))||o);return n>3&&o&&Object.defineProperty(t,r,o),o},s=this&&this.__param||function(e,t){return function(r,i){t(r,i,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.CompositionHelper=void 0;const n=r(4725),o=r(2585),a=r(2584);let l=t.CompositionHelper=class{get isComposing(){return this._isComposing}constructor(e,t,r,i,s,n){this._textarea=e,this._compositionView=t,this._bufferService=r,this._optionsService=i,this._coreService=s,this._renderService=n,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(e){this._compositionView.textContent=e.data,this.updateCompositionElements(),setTimeout(()=>{this._compositionPosition.end=this._textarea.value.length},0)}compositionend(){this._finalizeComposition(!0)}keydown(e){if(this._isComposing||this._isSendingComposition){if(229===e.keyCode)return!1;if(16===e.keyCode||17===e.keyCode||18===e.keyCode)return!1;this._finalizeComposition(!1)}return 229!==e.keyCode||(this._handleAnyTextareaChanges(),!1)}_finalizeComposition(e){if(this._compositionView.classList.remove("active"),this._isComposing=!1,e){const e={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(()=>{if(this._isSendingComposition){let t;this._isSendingComposition=!1,e.start+=this._dataAlreadySent.length,t=this._isComposing?this._textarea.value.substring(e.start,e.end):this._textarea.value.substring(e.start),t.length>0&&this._coreService.triggerDataEvent(t,!0)}},0)}else{this._isSendingComposition=!1;const e=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(e,!0)}}_handleAnyTextareaChanges(){const e=this._textarea.value;setTimeout(()=>{if(!this._isComposing){const t=this._textarea.value,r=t.replace(e,"");this._dataAlreadySent=r,t.length>e.length?this._coreService.triggerDataEvent(r,!0):t.length<e.length?this._coreService.triggerDataEvent(`${a.C0.DEL}`,!0):t.length===e.length&&t!==e&&this._coreService.triggerDataEvent(t,!0)}},0)}updateCompositionElements(e){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){const e=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),t=this._renderService.dimensions.css.cell.height,r=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,i=e*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=i+"px",this._compositionView.style.top=r+"px",this._compositionView.style.height=t+"px",this._compositionView.style.lineHeight=t+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";const s=this._compositionView.getBoundingClientRect();this._textarea.style.left=i+"px",this._textarea.style.top=r+"px",this._textarea.style.width=Math.max(s.width,1)+"px",this._textarea.style.height=Math.max(s.height,1)+"px",this._textarea.style.lineHeight=s.height+"px"}e||setTimeout(()=>this.updateCompositionElements(!0),0)}}};t.CompositionHelper=l=i([s(2,o.IBufferService),s(3,o.IOptionsService),s(4,o.ICoreService),s(5,n.IRenderService)],l)},9806:(e,t)=>{function r(e,t,r){const i=r.getBoundingClientRect(),s=e.getComputedStyle(r),n=parseInt(s.getPropertyValue("padding-left")),o=parseInt(s.getPropertyValue("padding-top"));return[t.clientX-i.left-n,t.clientY-i.top-o]}Object.defineProperty(t,"__esModule",{value:!0}),t.getCoords=t.getCoordsRelativeToElement=void 0,t.getCoordsRelativeToElement=r,t.getCoords=function(e,t,i,s,n,o,a,l,c){if(!o)return;const h=r(e,t,i);return h?(h[0]=Math.ceil((h[0]+(c?a/2:0))/a),h[1]=Math.ceil(h[1]/l),h[0]=Math.min(Math.max(h[0],1),s+(c?1:0)),h[1]=Math.min(Math.max(h[1],1),n),h):void 0}},9504:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.moveToCellSequence=void 0;const i=r(2584);function s(e,t,r,i){const s=e-n(e,r),a=t-n(t,r),h=Math.abs(s-a)-function(e,t,r){let i=0;const s=e-n(e,r),a=t-n(t,r);for(let n=0;n<Math.abs(s-a);n++){const a="A"===o(e,t)?-1:1,l=r.buffer.lines.get(s+a*n);(null==l?void 0:l.isWrapped)&&i++}return i}(e,t,r);return c(h,l(o(e,t),i))}function n(e,t){let r=0,i=t.buffer.lines.get(e),s=null==i?void 0:i.isWrapped;for(;s&&e>=0&&e<t.rows;)r++,i=t.buffer.lines.get(--e),s=null==i?void 0:i.isWrapped;return r}function o(e,t){return e>t?"A":"B"}function a(e,t,r,i,s,n){let o=e,a=t,l="";for(;o!==r||a!==i;)o+=s?1:-1,s&&o>n.cols-1?(l+=n.buffer.translateBufferLineToString(a,!1,e,o),o=0,e=0,a++):!s&&o<0&&(l+=n.buffer.translateBufferLineToString(a,!1,0,e+1),o=n.cols-1,e=o,a--);return l+n.buffer.translateBufferLineToString(a,!1,e,o)}function l(e,t){const r=t?"O":"[";return i.C0.ESC+r+e}function c(e,t){e=Math.floor(e);let r="";for(let i=0;i<e;i++)r+=t;return r}t.moveToCellSequence=function(e,t,r,i){const o=r.buffer.x,h=r.buffer.y;if(!r.buffer.hasScrollback)return function(e,t,r,i,o,h){return 0===s(t,i,o,h).length?"":c(a(e,t,e,t-n(t,o),!1,o).length,l("D",h))}(o,h,0,t,r,i)+s(h,t,r,i)+function(e,t,r,i,o,h){let u;u=s(t,i,o,h).length>0?i-n(i,o):t;const d=i,f=function(e,t,r,i,o,a){let l;return l=s(r,i,o,a).length>0?i-n(i,o):t,e<r&&l<=i||e>=r&&l<i?"C":"D"}(e,t,r,i,o,h);return c(a(e,u,r,d,"C"===f,o).length,l(f,h))}(o,h,e,t,r,i);let u;if(h===t)return u=o>e?"D":"C",c(Math.abs(o-e),l(u,i));u=h>t?"D":"C";const d=Math.abs(h-t);return c(function(e,t){return t.cols-e}(h>t?e:o,r)+(d-1)*r.cols+1+((h>t?o:e)-1),l(u,i))}},1296:function(e,t,r){var i=this&&this.__decorate||function(e,t,r,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n<3?s(o):n>3?s(t,r,o):s(t,r))||o);return n>3&&o&&Object.defineProperty(t,r,o),o},s=this&&this.__param||function(e,t){return function(r,i){t(r,i,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.DomRenderer=void 0;const n=r(3787),o=r(2550),a=r(2223),l=r(6171),c=r(4725),h=r(8055),u=r(8460),d=r(844),f=r(2585),p="xterm-dom-renderer-owner-",_="xterm-rows",v="xterm-fg-",g="xterm-bg-",m="xterm-focus",b="xterm-selection";let y=1,S=t.DomRenderer=class extends d.Disposable{constructor(e,t,r,i,s,a,c,h,f,v){super(),this._element=e,this._screenElement=t,this._viewportElement=r,this._linkifier2=i,this._charSizeService=a,this._optionsService=c,this._bufferService=h,this._coreBrowserService=f,this._themeService=v,this._terminalClass=y++,this._rowElements=[],this.onRequestRedraw=this.register(new u.EventEmitter).event,this._rowContainer=document.createElement("div"),this._rowContainer.classList.add(_),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=document.createElement("div"),this._selectionContainer.classList.add(b),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=(0,l.createRenderDimensions)(),this._updateDimensions(),this.register(this._optionsService.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._themeService.onChangeColors(e=>this._injectCss(e))),this._injectCss(this._themeService.colors),this._rowFactory=s.createInstance(n.DomRendererRowFactory,document),this._element.classList.add(p+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this.register(this._linkifier2.onShowLinkUnderline(e=>this._handleLinkHover(e))),this.register(this._linkifier2.onHideLinkUnderline(e=>this._handleLinkLeave(e))),this.register((0,d.toDisposable)(()=>{this._element.classList.remove(p+this._terminalClass),this._rowContainer.remove(),this._selectionContainer.remove(),this._widthCache.dispose(),this._themeStyleElement.remove(),this._dimensionsStyleElement.remove()})),this._widthCache=new o.WidthCache(document),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}_updateDimensions(){const e=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*e,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*e),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/e),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/e),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(const r of this._rowElements)r.style.width=`${this.dimensions.css.canvas.width}px`,r.style.height=`${this.dimensions.css.cell.height}px`,r.style.lineHeight=`${this.dimensions.css.cell.height}px`,r.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));const t=`${this._terminalSelector} .${_} span { display: inline-block; height: 100%; vertical-align: top;}`;this._dimensionsStyleElement.textContent=t,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(e){this._themeStyleElement||(this._themeStyleElement=document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let t=`${this._terminalSelector} .${_} { color: ${e.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px; font-kerning: none; white-space: pre}`;t+=`${this._terminalSelector} .${_} .xterm-dim { color: ${h.color.multiplyOpacity(e.foreground,.5).css};}`,t+=`${this._terminalSelector} span:not(.xterm-bold) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.xterm-bold { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.xterm-italic { font-style: italic;}`,t+="@keyframes blink_box_shadow_"+this._terminalClass+" { 50% {  border-bottom-style: hidden; }}",t+="@keyframes blink_block_"+this._terminalClass+" { 0% {"+`  background-color: ${e.cursor.css};`+`  color: ${e.cursorAccent.css}; } 50% {  background-color: inherit;`+`  color: ${e.cursor.css}; }}`,t+=`${this._terminalSelector} .${_}.${m} .xterm-cursor.xterm-cursor-blink:not(.xterm-cursor-block) { animation: blink_box_shadow_`+this._terminalClass+" 1s step-end infinite;}"+`${this._terminalSelector} .${_}.${m} .xterm-cursor.xterm-cursor-blink.xterm-cursor-block { animation: blink_block_`+this._terminalClass+" 1s step-end infinite;}"+`${this._terminalSelector} .${_} .xterm-cursor.xterm-cursor-block {`+` background-color: ${e.cursor.css};`+` color: ${e.cursorAccent.css};}`+`${this._terminalSelector} .${_} .xterm-cursor.xterm-cursor-outline {`+` outline: 1px solid ${e.cursor.css}; outline-offset: -1px;}`+`${this._terminalSelector} .${_} .xterm-cursor.xterm-cursor-bar {`+` box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${e.cursor.css} inset;}`+`${this._terminalSelector} .${_} .xterm-cursor.xterm-cursor-underline {`+` border-bottom: 1px ${e.cursor.css}; border-bottom-style: solid; height: calc(100% - 1px);}`,t+=`${this._terminalSelector} .${b} { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .${b} div { position: absolute; background-color: ${e.selectionBackgroundOpaque.css};}${this._terminalSelector} .${b} div { position: absolute; background-color: ${e.selectionInactiveBackgroundOpaque.css};}`;for(const[r,i]of e.ansi.entries())t+=`${this._terminalSelector} .${v}${r} { color: ${i.css}; }${this._terminalSelector} .${v}${r}.xterm-dim { color: ${h.color.multiplyOpacity(i,.5).css}; }${this._terminalSelector} .${g}${r} { background-color: ${i.css}; }`;t+=`${this._terminalSelector} .${v}${a.INVERTED_DEFAULT_COLOR} { color: ${h.color.opaque(e.background).css}; }${this._terminalSelector} .${v}${a.INVERTED_DEFAULT_COLOR}.xterm-dim { color: ${h.color.multiplyOpacity(h.color.opaque(e.background),.5).css}; }${this._terminalSelector} .${g}${a.INVERTED_DEFAULT_COLOR} { background-color: ${e.foreground.css}; }`,this._themeStyleElement.textContent=t}_setDefaultSpacing(){const e=this.dimensions.css.cell.width-this._widthCache.get("W",!1,!1);this._rowContainer.style.letterSpacing=`${e}px`,this._rowFactory.defaultSpacing=e}handleDevicePixelRatioChange(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}_refreshRowElements(e,t){for(let r=this._rowElements.length;r<=t;r++){const e=document.createElement("div");this._rowContainer.appendChild(e),this._rowElements.push(e)}for(;this._rowElements.length>t;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(e,t){this._refreshRowElements(e,t),this._updateDimensions()}handleCharSizeChanged(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}handleBlur(){this._rowContainer.classList.remove(m)}handleFocus(){this._rowContainer.classList.add(m),this.renderRows(this._bufferService.buffer.y,this._bufferService.buffer.y)}handleSelectionChanged(e,t,r){if(this._selectionContainer.replaceChildren(),this._rowFactory.handleSelectionChanged(e,t,r),this.renderRows(0,this._bufferService.rows-1),!e||!t)return;const i=e[1]-this._bufferService.buffer.ydisp,s=t[1]-this._bufferService.buffer.ydisp,n=Math.max(i,0),o=Math.min(s,this._bufferService.rows-1);if(n>=this._bufferService.rows||o<0)return;const a=document.createDocumentFragment();if(r){const r=e[0]>t[0];a.appendChild(this._createSelectionElement(n,r?t[0]:e[0],r?e[0]:t[0],o-n+1))}else{const r=i===n?e[0]:0,l=n===s?t[0]:this._bufferService.cols;a.appendChild(this._createSelectionElement(n,r,l));const c=o-n-1;if(a.appendChild(this._createSelectionElement(n+1,0,this._bufferService.cols,c)),n!==o){const e=s===o?t[0]:this._bufferService.cols;a.appendChild(this._createSelectionElement(o,0,e))}}this._selectionContainer.appendChild(a)}_createSelectionElement(e,t,r,i=1){const s=document.createElement("div");return s.style.height=i*this.dimensions.css.cell.height+"px",s.style.top=e*this.dimensions.css.cell.height+"px",s.style.left=t*this.dimensions.css.cell.width+"px",s.style.width=this.dimensions.css.cell.width*(r-t)+"px",s}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions(),this._injectCss(this._themeService.colors),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}clear(){for(const e of this._rowElements)e.replaceChildren()}renderRows(e,t){const r=this._bufferService.buffer,i=r.ybase+r.y,s=Math.min(r.x,this._bufferService.cols-1),n=this._optionsService.rawOptions.cursorBlink,o=this._optionsService.rawOptions.cursorStyle,a=this._optionsService.rawOptions.cursorInactiveStyle;for(let l=e;l<=t;l++){const e=l+r.ydisp,t=this._rowElements[l],c=r.lines.get(e);if(!t||!c)break;t.replaceChildren(...this._rowFactory.createRow(c,e,e===i,o,a,s,n,this.dimensions.css.cell.width,this._widthCache,-1,-1))}}get _terminalSelector(){return`.${p}${this._terminalClass}`}_handleLinkHover(e){this._setCellUnderline(e.x1,e.x2,e.y1,e.y2,e.cols,!0)}_handleLinkLeave(e){this._setCellUnderline(e.x1,e.x2,e.y1,e.y2,e.cols,!1)}_setCellUnderline(e,t,r,i,s,n){r<0&&(e=0),i<0&&(t=0);const o=this._bufferService.rows-1;r=Math.max(Math.min(r,o),0),i=Math.max(Math.min(i,o),0),s=Math.min(s,this._bufferService.cols);const a=this._bufferService.buffer,l=a.ybase+a.y,c=Math.min(a.x,s-1),h=this._optionsService.rawOptions.cursorBlink,u=this._optionsService.rawOptions.cursorStyle,d=this._optionsService.rawOptions.cursorInactiveStyle;for(let f=r;f<=i;++f){const o=f+a.ydisp,p=this._rowElements[f],_=a.lines.get(o);if(!p||!_)break;p.replaceChildren(...this._rowFactory.createRow(_,o,o===l,u,d,c,h,this.dimensions.css.cell.width,this._widthCache,n?f===r?e:0:-1,n?(f===i?t:s)-1:-1))}}};t.DomRenderer=S=i([s(4,f.IInstantiationService),s(5,c.ICharSizeService),s(6,f.IOptionsService),s(7,f.IBufferService),s(8,c.ICoreBrowserService),s(9,c.IThemeService)],S)},3787:function(e,t,r){var i=this&&this.__decorate||function(e,t,r,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n<3?s(o):n>3?s(t,r,o):s(t,r))||o);return n>3&&o&&Object.defineProperty(t,r,o),o},s=this&&this.__param||function(e,t){return function(r,i){t(r,i,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.DomRendererRowFactory=void 0;const n=r(2223),o=r(643),a=r(511),l=r(2585),c=r(8055),h=r(4725),u=r(4269),d=r(6171),f=r(3734);let p=t.DomRendererRowFactory=class{constructor(e,t,r,i,s,n,o){this._document=e,this._characterJoinerService=t,this._optionsService=r,this._coreBrowserService=i,this._coreService=s,this._decorationService=n,this._themeService=o,this._workCell=new a.CellData,this._columnSelectMode=!1,this.defaultSpacing=0}handleSelectionChanged(e,t,r){this._selectionStart=e,this._selectionEnd=t,this._columnSelectMode=r}createRow(e,t,r,i,s,a,l,h,d,p,v){const g=[],m=this._characterJoinerService.getJoinedCharacters(t),b=this._themeService.colors;let y,S=e.getNoBgTrimmedLength();r&&S<a+1&&(S=a+1);let w=0,C="",x=0,k=0,E=0,L=!1,R=0,D=!1,A=0;const T=[],P=-1!==p&&-1!==v;for(let B=0;B<S;B++){e.loadCell(B,this._workCell);let S=this._workCell.getWidth();if(0===S)continue;let O=!1,M=B,N=this._workCell;if(m.length>0&&B===m[0][0]){O=!0;const t=m.shift();N=new u.JoinedCellData(this._workCell,e.translateToString(!0,t[0],t[1]),t[1]-t[0]),M=t[1]-1,S=N.getWidth()}const I=this._isCellInSelection(B,t),j=r&&B===a,H=P&&B>=p&&B<=v;let F=!1;this._decorationService.forEachDecorationAtCell(B,t,void 0,e=>{F=!0});let z=N.getChars()||o.WHITESPACE_CELL_CHAR;if(" "===z&&(N.isUnderline()||N.isOverline())&&(z=""),A=S*h-d.get(z,N.isBold(),N.isItalic()),y){if(w&&(I&&D||!I&&!D&&N.bg===x)&&(I&&D&&b.selectionForeground||N.fg===k)&&N.extended.ext===E&&H===L&&A===R&&!j&&!O&&!F){C+=z,w++;continue}w&&(y.textContent=C),y=this._document.createElement("span"),w=0,C=""}else y=this._document.createElement("span");if(x=N.bg,k=N.fg,E=N.extended.ext,L=H,R=A,D=I,O&&a>=B&&a<=M&&(a=B),!this._coreService.isCursorHidden&&j)if(T.push("xterm-cursor"),this._coreBrowserService.isFocused)l&&T.push("xterm-cursor-blink"),T.push("bar"===i?"xterm-cursor-bar":"underline"===i?"xterm-cursor-underline":"xterm-cursor-block");else if(s)switch(s){case"outline":T.push("xterm-cursor-outline");break;case"block":T.push("xterm-cursor-block");break;case"bar":T.push("xterm-cursor-bar");break;case"underline":T.push("xterm-cursor-underline")}if(N.isBold()&&T.push("xterm-bold"),N.isItalic()&&T.push("xterm-italic"),N.isDim()&&T.push("xterm-dim"),C=N.isInvisible()?o.WHITESPACE_CELL_CHAR:N.getChars()||o.WHITESPACE_CELL_CHAR,N.isUnderline()&&(T.push(`xterm-underline-${N.extended.underlineStyle}`)," "===C&&(C=""),!N.isUnderlineColorDefault()))if(N.isUnderlineColorRGB())y.style.textDecorationColor=`rgb(${f.AttributeData.toColorRGB(N.getUnderlineColor()).join(",")})`;else{let e=N.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&N.isBold()&&e<8&&(e+=8),y.style.textDecorationColor=b.ansi[e].css}N.isOverline()&&(T.push("xterm-overline")," "===C&&(C="")),N.isStrikethrough()&&T.push("xterm-strikethrough"),H&&(y.style.textDecoration="underline");let U=N.getFgColor(),W=N.getFgColorMode(),$=N.getBgColor(),q=N.getBgColorMode();const V=!!N.isInverse();if(V){const e=U;U=$,$=e;const t=W;W=q,q=t}let K,G,X,Y=!1;switch(this._decorationService.forEachDecorationAtCell(B,t,void 0,e=>{"top"!==e.options.layer&&Y||(e.backgroundColorRGB&&(q=50331648,$=e.backgroundColorRGB.rgba>>8&16777215,K=e.backgroundColorRGB),e.foregroundColorRGB&&(W=50331648,U=e.foregroundColorRGB.rgba>>8&16777215,G=e.foregroundColorRGB),Y="top"===e.options.layer)}),!Y&&I&&(K=this._coreBrowserService.isFocused?b.selectionBackgroundOpaque:b.selectionInactiveBackgroundOpaque,$=K.rgba>>8&16777215,q=50331648,Y=!0,b.selectionForeground&&(W=50331648,U=b.selectionForeground.rgba>>8&16777215,G=b.selectionForeground)),Y&&T.push("xterm-decoration-top"),q){case 16777216:case 33554432:X=b.ansi[$],T.push(`xterm-bg-${$}`);break;case 50331648:X=c.rgba.toColor($>>16,$>>8&255,255&$),this._addStyle(y,`background-color:#${_(($>>>0).toString(16),"0",6)}`);break;default:V?(X=b.foreground,T.push(`xterm-bg-${n.INVERTED_DEFAULT_COLOR}`)):X=b.background}switch(K||N.isDim()&&(K=c.color.multiplyOpacity(X,.5)),W){case 16777216:case 33554432:N.isBold()&&U<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(U+=8),this._applyMinimumContrast(y,X,b.ansi[U],N,K,void 0)||T.push(`xterm-fg-${U}`);break;case 50331648:const e=c.rgba.toColor(U>>16&255,U>>8&255,255&U);this._applyMinimumContrast(y,X,e,N,K,G)||this._addStyle(y,`color:#${_(U.toString(16),"0",6)}`);break;default:this._applyMinimumContrast(y,X,b.foreground,N,K,void 0)||V&&T.push(`xterm-fg-${n.INVERTED_DEFAULT_COLOR}`)}T.length&&(y.className=T.join(" "),T.length=0),j||O||F?y.textContent=C:w++,A!==this.defaultSpacing&&(y.style.letterSpacing=`${A}px`),g.push(y),B=M}return y&&w&&(y.textContent=C),g}_applyMinimumContrast(e,t,r,i,s,n){if(1===this._optionsService.rawOptions.minimumContrastRatio||(0,d.excludeFromContrastRatioDemands)(i.getCode()))return!1;const o=this._getContrastCache(i);let a;if(s||n||(a=o.getColor(t.rgba,r.rgba)),void 0===a){const e=this._optionsService.rawOptions.minimumContrastRatio/(i.isDim()?2:1);a=c.color.ensureContrastRatio(s||t,n||r,e),o.setColor((s||t).rgba,(n||r).rgba,null!=a?a:null)}return!!a&&(this._addStyle(e,`color:${a.css}`),!0)}_getContrastCache(e){return e.isDim()?this._themeService.colors.halfContrastCache:this._themeService.colors.contrastCache}_addStyle(e,t){e.setAttribute("style",`${e.getAttribute("style")||""}${t};`)}_isCellInSelection(e,t){const r=this._selectionStart,i=this._selectionEnd;return!(!r||!i)&&(this._columnSelectMode?r[0]<=i[0]?e>=r[0]&&t>=r[1]&&e<i[0]&&t<=i[1]:e<r[0]&&t>=r[1]&&e>=i[0]&&t<=i[1]:t>r[1]&&t<i[1]||r[1]===i[1]&&t===r[1]&&e>=r[0]&&e<i[0]||r[1]<i[1]&&t===i[1]&&e<i[0]||r[1]<i[1]&&t===r[1]&&e>=r[0])}};function _(e,t,r){for(;e.length<r;)e=t+e;return e}t.DomRendererRowFactory=p=i([s(1,h.ICharacterJoinerService),s(2,l.IOptionsService),s(3,h.ICoreBrowserService),s(4,l.ICoreService),s(5,l.IDecorationService),s(6,h.IThemeService)],p)},2550:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.WidthCache=void 0,t.WidthCache=class{constructor(e){this._flat=new Float32Array(256),this._font="",this._fontSize=0,this._weight="normal",this._weightBold="bold",this._measureElements=[],this._container=e.createElement("div"),this._container.style.position="absolute",this._container.style.top="-50000px",this._container.style.width="50000px",this._container.style.whiteSpace="pre",this._container.style.fontKerning="none";const t=e.createElement("span"),r=e.createElement("span");r.style.fontWeight="bold";const i=e.createElement("span");i.style.fontStyle="italic";const s=e.createElement("span");s.style.fontWeight="bold",s.style.fontStyle="italic",this._measureElements=[t,r,i,s],this._container.appendChild(t),this._container.appendChild(r),this._container.appendChild(i),this._container.appendChild(s),e.body.appendChild(this._container),this.clear()}dispose(){this._container.remove(),this._measureElements.length=0,this._holey=void 0}clear(){this._flat.fill(-9999),this._holey=new Map}setFont(e,t,r,i){e===this._font&&t===this._fontSize&&r===this._weight&&i===this._weightBold||(this._font=e,this._fontSize=t,this._weight=r,this._weightBold=i,this._container.style.fontFamily=this._font,this._container.style.fontSize=`${this._fontSize}px`,this._measureElements[0].style.fontWeight=`${r}`,this._measureElements[1].style.fontWeight=`${i}`,this._measureElements[2].style.fontWeight=`${r}`,this._measureElements[3].style.fontWeight=`${i}`,this.clear())}get(e,t,r){let i=0;if(!t&&!r&&1===e.length&&(i=e.charCodeAt(0))<256)return-9999!==this._flat[i]?this._flat[i]:this._flat[i]=this._measure(e,0);let s=e;t&&(s+="B"),r&&(s+="I");let n=this._holey.get(s);if(void 0===n){let i=0;t&&(i|=1),r&&(i|=2),n=this._measure(e,i),this._holey.set(s,n)}return n}_measure(e,t){const r=this._measureElements[t];return r.textContent=e.repeat(32),r.offsetWidth/32}}},2223:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TEXT_BASELINE=t.DIM_OPACITY=t.INVERTED_DEFAULT_COLOR=void 0;const i=r(6114);t.INVERTED_DEFAULT_COLOR=257,t.DIM_OPACITY=.5,t.TEXT_BASELINE=i.isFirefox||i.isLegacyEdge?"bottom":"ideographic"},6171:(e,t)=>{function r(e){return 57508<=e&&e<=57558}Object.defineProperty(t,"__esModule",{value:!0}),t.createRenderDimensions=t.excludeFromContrastRatioDemands=t.isRestrictedPowerlineGlyph=t.isPowerlineGlyph=t.throwIfFalsy=void 0,t.throwIfFalsy=function(e){if(!e)throw new Error("value must not be falsy");return e},t.isPowerlineGlyph=r,t.isRestrictedPowerlineGlyph=function(e){return 57520<=e&&e<=57527},t.excludeFromContrastRatioDemands=function(e){return r(e)||function(e){return 9472<=e&&e<=9631}(e)},t.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}}},456:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SelectionModel=void 0,t.SelectionModel=class{constructor(e){this._bufferService=e,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){const e=this.selectionStart[0]+this.selectionStartLength;return e>this._bufferService.cols?e%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(e/this._bufferService.cols)-1]:[e%this._bufferService.cols,this.selectionStart[1]+Math.floor(e/this._bufferService.cols)]:[e,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){const e=this.selectionStart[0]+this.selectionStartLength;return e>this._bufferService.cols?[e%this._bufferService.cols,this.selectionStart[1]+Math.floor(e/this._bufferService.cols)]:[Math.max(e,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){const e=this.selectionStart,t=this.selectionEnd;return!(!e||!t)&&(e[1]>t[1]||e[1]===t[1]&&e[0]>t[0])}handleTrim(e){return this.selectionStart&&(this.selectionStart[1]-=e),this.selectionEnd&&(this.selectionEnd[1]-=e),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}}},428:function(e,t,r){var i=this&&this.__decorate||function(e,t,r,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n<3?s(o):n>3?s(t,r,o):s(t,r))||o);return n>3&&o&&Object.defineProperty(t,r,o),o},s=this&&this.__param||function(e,t){return function(r,i){t(r,i,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.CharSizeService=void 0;const n=r(2585),o=r(8460),a=r(844);let l=t.CharSizeService=class extends a.Disposable{get hasValidSize(){return this.width>0&&this.height>0}constructor(e,t,r){super(),this._optionsService=r,this.width=0,this.height=0,this._onCharSizeChange=this.register(new o.EventEmitter),this.onCharSizeChange=this._onCharSizeChange.event,this._measureStrategy=new c(e,t,this._optionsService),this.register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],()=>this.measure()))}measure(){const e=this._measureStrategy.measure();e.width===this.width&&e.height===this.height||(this.width=e.width,this.height=e.height,this._onCharSizeChange.fire())}};t.CharSizeService=l=i([s(2,n.IOptionsService)],l);class c{constructor(e,t,r){this._document=e,this._parentElement=t,this._optionsService=r,this._result={width:0,height:0},this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W".repeat(32),this._measureElement.setAttribute("aria-hidden","true"),this._measureElement.style.whiteSpace="pre",this._measureElement.style.fontKerning="none",this._parentElement.appendChild(this._measureElement)}measure(){this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`;const e={height:Number(this._measureElement.offsetHeight),width:Number(this._measureElement.offsetWidth)};return 0!==e.width&&0!==e.height&&(this._result.width=e.width/32,this._result.height=Math.ceil(e.height)),this._result}}},4269:function(e,t,r){var i=this&&this.__decorate||function(e,t,r,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n<3?s(o):n>3?s(t,r,o):s(t,r))||o);return n>3&&o&&Object.defineProperty(t,r,o),o},s=this&&this.__param||function(e,t){return function(r,i){t(r,i,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.CharacterJoinerService=t.JoinedCellData=void 0;const n=r(3734),o=r(643),a=r(511),l=r(2585);class c extends n.AttributeData{constructor(e,t,r){super(),this.content=0,this.combinedData="",this.fg=e.fg,this.bg=e.bg,this.combinedData=t,this._width=r}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(e){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}t.JoinedCellData=c;let h=t.CharacterJoinerService=class e{constructor(e){this._bufferService=e,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new a.CellData}register(e){const t={id:this._nextCharacterJoinerId++,handler:e};return this._characterJoiners.push(t),t.id}deregister(e){for(let t=0;t<this._characterJoiners.length;t++)if(this._characterJoiners[t].id===e)return this._characterJoiners.splice(t,1),!0;return!1}getJoinedCharacters(e){if(0===this._characterJoiners.length)return[];const t=this._bufferService.buffer.lines.get(e);if(!t||0===t.length)return[];const r=[],i=t.translateToString(!0);let s=0,n=0,a=0,l=t.getFg(0),c=t.getBg(0);for(let h=0;h<t.getTrimmedLength();h++)if(t.loadCell(h,this._workCell),0!==this._workCell.getWidth()){if(this._workCell.fg!==l||this._workCell.bg!==c){if(h-s>1){const e=this._getJoinedRanges(i,a,n,t,s);for(let t=0;t<e.length;t++)r.push(e[t])}s=h,a=n,l=this._workCell.fg,c=this._workCell.bg}n+=this._workCell.getChars().length||o.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-s>1){const e=this._getJoinedRanges(i,a,n,t,s);for(let t=0;t<e.length;t++)r.push(e[t])}return r}_getJoinedRanges(t,r,i,s,n){const o=t.substring(r,i);let a=[];try{a=this._characterJoiners[0].handler(o)}catch(e){console.error(e)}for(let l=1;l<this._characterJoiners.length;l++)try{const t=this._characterJoiners[l].handler(o);for(let r=0;r<t.length;r++)e._mergeRanges(a,t[r])}catch(e){console.error(e)}return this._stringRangesToCellRanges(a,s,n),a}_stringRangesToCellRanges(e,t,r){let i=0,s=!1,n=0,a=e[i];if(a){for(let l=r;l<this._bufferService.cols;l++){const r=t.getWidth(l),c=t.getString(l).length||o.WHITESPACE_CELL_CHAR.length;if(0!==r){if(!s&&a[0]<=n&&(a[0]=l,s=!0),a[1]<=n){if(a[1]=l,a=e[++i],!a)break;a[0]<=n?(a[0]=l,s=!0):s=!1}n+=c}}a&&(a[1]=this._bufferService.cols)}}static _mergeRanges(e,t){let r=!1;for(let i=0;i<e.length;i++){const s=e[i];if(r){if(t[1]<=s[0])return e[i-1][1]=t[1],e;if(t[1]<=s[1])return e[i-1][1]=Math.max(t[1],s[1]),e.splice(i,1),e;e.splice(i,1),i--}else{if(t[1]<=s[0])return e.splice(i,0,t),e;if(t[1]<=s[1])return s[0]=Math.min(t[0],s[0]),e;t[0]<s[1]&&(s[0]=Math.min(t[0],s[0]),r=!0)}}return r?e[e.length-1][1]=t[1]:e.push(t),e}};t.CharacterJoinerService=h=i([s(0,l.IBufferService)],h)},5114:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CoreBrowserService=void 0,t.CoreBrowserService=class{constructor(e,t){this._textarea=e,this.window=t,this._isFocused=!1,this._cachedIsFocused=void 0,this._textarea.addEventListener("focus",()=>this._isFocused=!0),this._textarea.addEventListener("blur",()=>this._isFocused=!1)}get dpr(){return this.window.devicePixelRatio}get isFocused(){return void 0===this._cachedIsFocused&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask(()=>this._cachedIsFocused=void 0)),this._cachedIsFocused}}},8934:function(e,t,r){var i=this&&this.__decorate||function(e,t,r,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n<3?s(o):n>3?s(t,r,o):s(t,r))||o);return n>3&&o&&Object.defineProperty(t,r,o),o},s=this&&this.__param||function(e,t){return function(r,i){t(r,i,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.MouseService=void 0;const n=r(4725),o=r(9806);let a=t.MouseService=class{constructor(e,t){this._renderService=e,this._charSizeService=t}getCoords(e,t,r,i,s){return(0,o.getCoords)(window,e,t,r,i,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,s)}getMouseReportCoords(e,t){const r=(0,o.getCoordsRelativeToElement)(window,e,t);if(this._charSizeService.hasValidSize)return r[0]=Math.min(Math.max(r[0],0),this._renderService.dimensions.css.canvas.width-1),r[1]=Math.min(Math.max(r[1],0),this._renderService.dimensions.css.canvas.height-1),{col:Math.floor(r[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(r[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(r[0]),y:Math.floor(r[1])}}};t.MouseService=a=i([s(0,n.IRenderService),s(1,n.ICharSizeService)],a)},3230:function(e,t,r){var i=this&&this.__decorate||function(e,t,r,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n<3?s(o):n>3?s(t,r,o):s(t,r))||o);return n>3&&o&&Object.defineProperty(t,r,o),o},s=this&&this.__param||function(e,t){return function(r,i){t(r,i,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.RenderService=void 0;const n=r(3656),o=r(6193),a=r(5596),l=r(4725),c=r(8460),h=r(844),u=r(7226),d=r(2585);let f=t.RenderService=class extends h.Disposable{get dimensions(){return this._renderer.value.dimensions}constructor(e,t,r,i,s,l,d,f){if(super(),this._rowCount=e,this._charSizeService=i,this._renderer=this.register(new h.MutableDisposable),this._pausedResizeTask=new u.DebouncedIdleTask,this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this.register(new c.EventEmitter),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this.register(new c.EventEmitter),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this.register(new c.EventEmitter),this.onRender=this._onRender.event,this._onRefreshRequest=this.register(new c.EventEmitter),this.onRefreshRequest=this._onRefreshRequest.event,this._renderDebouncer=new o.RenderDebouncer(d.window,(e,t)=>this._renderRows(e,t)),this.register(this._renderDebouncer),this._screenDprMonitor=new a.ScreenDprMonitor(d.window),this._screenDprMonitor.setListener(()=>this.handleDevicePixelRatioChange()),this.register(this._screenDprMonitor),this.register(l.onResize(()=>this._fullRefresh())),this.register(l.buffers.onBufferActivate(()=>{var e;return null===(e=this._renderer.value)||void 0===e?void 0:e.clear()})),this.register(r.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._charSizeService.onCharSizeChange(()=>this.handleCharSizeChanged())),this.register(s.onDecorationRegistered(()=>this._fullRefresh())),this.register(s.onDecorationRemoved(()=>this._fullRefresh())),this.register(r.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio"],()=>{this.clear(),this.handleResize(l.cols,l.rows),this._fullRefresh()})),this.register(r.onMultipleOptionChange(["cursorBlink","cursorStyle"],()=>this.refreshRows(l.buffer.y,l.buffer.y,!0))),this.register((0,n.addDisposableDomListener)(d.window,"resize",()=>this.handleDevicePixelRatioChange())),this.register(f.onChangeColors(()=>this._fullRefresh())),"IntersectionObserver"in d.window){const e=new d.window.IntersectionObserver(e=>this._handleIntersectionChange(e[e.length-1]),{threshold:0});e.observe(t),this.register({dispose:()=>e.disconnect()})}}_handleIntersectionChange(e){this._isPaused=void 0===e.isIntersecting?0===e.intersectionRatio:!e.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(e,t,r=!1){this._isPaused?this._needsFullRefresh=!0:(r||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(e,t,this._rowCount))}_renderRows(e,t){this._renderer.value&&(e=Math.min(e,this._rowCount-1),t=Math.min(t,this._rowCount-1),this._renderer.value.renderRows(e,t),this._needsSelectionRefresh&&(this._renderer.value.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:e,end:t}),this._onRender.fire({start:e,end:t}),this._isNextRenderRedrawOnly=!0)}resize(e,t){this._rowCount=t,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer.value&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer.value&&(this._renderer.value.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.value.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.value.dimensions))}hasRenderer(){return!!this._renderer.value}setRenderer(e){this._renderer.value=e,this._renderer.value.onRequestRedraw(e=>this.refreshRows(e.start,e.end,!0)),this._needsSelectionRefresh=!0,this._fullRefresh()}addRefreshCallback(e){return this._renderDebouncer.addRefreshCallback(e)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){var e,t;this._renderer.value&&(null===(t=(e=this._renderer.value).clearTextureAtlas)||void 0===t||t.call(e),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer.value&&(this._renderer.value.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(e,t){this._renderer.value&&(this._isPaused?this._pausedResizeTask.set(()=>this._renderer.value.handleResize(e,t)):this._renderer.value.handleResize(e,t),this._fullRefresh())}handleCharSizeChanged(){var e;null===(e=this._renderer.value)||void 0===e||e.handleCharSizeChanged()}handleBlur(){var e;null===(e=this._renderer.value)||void 0===e||e.handleBlur()}handleFocus(){var e;null===(e=this._renderer.value)||void 0===e||e.handleFocus()}handleSelectionChanged(e,t,r){var i;this._selectionState.start=e,this._selectionState.end=t,this._selectionState.columnSelectMode=r,null===(i=this._renderer.value)||void 0===i||i.handleSelectionChanged(e,t,r)}handleCursorMove(){var e;null===(e=this._renderer.value)||void 0===e||e.handleCursorMove()}clear(){var e;null===(e=this._renderer.value)||void 0===e||e.clear()}};t.RenderService=f=i([s(2,d.IOptionsService),s(3,l.ICharSizeService),s(4,d.IDecorationService),s(5,d.IBufferService),s(6,l.ICoreBrowserService),s(7,l.IThemeService)],f)},9312:function(e,t,r){var i=this&&this.__decorate||function(e,t,r,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n<3?s(o):n>3?s(t,r,o):s(t,r))||o);return n>3&&o&&Object.defineProperty(t,r,o),o},s=this&&this.__param||function(e,t){return function(r,i){t(r,i,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.SelectionService=void 0;const n=r(9806),o=r(9504),a=r(456),l=r(4725),c=r(8460),h=r(844),u=r(6114),d=r(4841),f=r(511),p=r(2585),_=String.fromCharCode(160),v=new RegExp(_,"g");let g=t.SelectionService=class extends h.Disposable{constructor(e,t,r,i,s,n,o,l,u){super(),this._element=e,this._screenElement=t,this._linkifier=r,this._bufferService=i,this._coreService=s,this._mouseService=n,this._optionsService=o,this._renderService=l,this._coreBrowserService=u,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new f.CellData,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this.register(new c.EventEmitter),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this.register(new c.EventEmitter),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this.register(new c.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this.register(new c.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=e=>this._handleMouseMove(e),this._mouseUpListener=e=>this._handleMouseUp(e),this._coreService.onUserInput(()=>{this.hasSelection&&this.clearSelection()}),this._trimListener=this._bufferService.buffer.lines.onTrim(e=>this._handleTrim(e)),this.register(this._bufferService.buffers.onBufferActivate(e=>this._handleBufferActivate(e))),this.enable(),this._model=new a.SelectionModel(this._bufferService),this._activeSelectionMode=0,this.register((0,h.toDisposable)(()=>{this._removeMouseDownListeners()}))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){const e=this._model.finalSelectionStart,t=this._model.finalSelectionEnd;return!(!e||!t||e[0]===t[0]&&e[1]===t[1])}get selectionText(){const e=this._model.finalSelectionStart,t=this._model.finalSelectionEnd;if(!e||!t)return"";const r=this._bufferService.buffer,i=[];if(3===this._activeSelectionMode){if(e[0]===t[0])return"";const s=e[0]<t[0]?e[0]:t[0],n=e[0]<t[0]?t[0]:e[0];for(let o=e[1];o<=t[1];o++){const e=r.translateBufferLineToString(o,!0,s,n);i.push(e)}}else{const s=e[1]===t[1]?t[0]:void 0;i.push(r.translateBufferLineToString(e[1],!0,e[0],s));for(let n=e[1]+1;n<=t[1]-1;n++){const e=r.lines.get(n),t=r.translateBufferLineToString(n,!0);(null==e?void 0:e.isWrapped)?i[i.length-1]+=t:i.push(t)}if(e[1]!==t[1]){const e=r.lines.get(t[1]),s=r.translateBufferLineToString(t[1],!0,0,t[0]);e&&e.isWrapped?i[i.length-1]+=s:i.push(s)}}return i.map(e=>e.replace(v," ")).join(u.isWindows?"\r\n":"\n")}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(e){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._refresh())),u.isLinux&&e&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:3===this._activeSelectionMode})}_isClickInSelection(e){const t=this._getMouseBufferCoords(e),r=this._model.finalSelectionStart,i=this._model.finalSelectionEnd;return!!(r&&i&&t)&&this._areCoordsInSelection(t,r,i)}isCellInSelection(e,t){const r=this._model.finalSelectionStart,i=this._model.finalSelectionEnd;return!(!r||!i)&&this._areCoordsInSelection([e,t],r,i)}_areCoordsInSelection(e,t,r){return e[1]>t[1]&&e[1]<r[1]||t[1]===r[1]&&e[1]===t[1]&&e[0]>=t[0]&&e[0]<r[0]||t[1]<r[1]&&e[1]===r[1]&&e[0]<r[0]||t[1]<r[1]&&e[1]===t[1]&&e[0]>=t[0]}_selectWordAtCursor(e,t){var r,i;const s=null===(i=null===(r=this._linkifier.currentLink)||void 0===r?void 0:r.link)||void 0===i?void 0:i.range;if(s)return this._model.selectionStart=[s.start.x-1,s.start.y-1],this._model.selectionStartLength=(0,d.getRangeLength)(s,this._bufferService.cols),this._model.selectionEnd=void 0,!0;const n=this._getMouseBufferCoords(e);return!!n&&(this._selectWordAt(n,t),this._model.selectionEnd=void 0,!0)}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(e,t){this._model.clearSelection(),e=Math.max(e,0),t=Math.min(t,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,e],this._model.selectionEnd=[this._bufferService.cols,t],this.refresh(),this._onSelectionChange.fire()}_handleTrim(e){this._model.handleTrim(e)&&this.refresh()}_getMouseBufferCoords(e){const t=this._mouseService.getCoords(e,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(t)return t[0]--,t[1]--,t[1]+=this._bufferService.buffer.ydisp,t}_getMouseEventScrollAmount(e){let t=(0,n.getCoordsRelativeToElement)(this._coreBrowserService.window,e,this._screenElement)[1];const r=this._renderService.dimensions.css.canvas.height;return t>=0&&t<=r?0:(t>r&&(t-=r),t=Math.min(Math.max(t,-50),50),t/=50,t/Math.abs(t)+Math.round(14*t))}shouldForceSelection(e){return u.isMac?e.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:e.shiftKey}handleMouseDown(e){if(this._mouseDownTimeStamp=e.timeStamp,(2!==e.button||!this.hasSelection)&&0===e.button){if(!this._enabled){if(!this.shouldForceSelection(e))return;e.stopPropagation()}e.preventDefault(),this._dragScrollAmount=0,this._enabled&&e.shiftKey?this._handleIncrementalClick(e):1===e.detail?this._handleSingleClick(e):2===e.detail?this._handleDoubleClick(e):3===e.detail&&this._handleTripleClick(e),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval(()=>this._dragScroll(),50)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(e){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(e))}_handleSingleClick(e){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(e)?3:0,this._model.selectionStart=this._getMouseBufferCoords(e),!this._model.selectionStart)return;this._model.selectionEnd=void 0;const t=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);t&&t.length!==this._model.selectionStart[0]&&0===t.hasWidth(this._model.selectionStart[0])&&this._model.selectionStart[0]++}_handleDoubleClick(e){this._selectWordAtCursor(e,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(e){const t=this._getMouseBufferCoords(e);t&&(this._activeSelectionMode=2,this._selectLineAt(t[1]))}shouldColumnSelect(e){return e.altKey&&!(u.isMac&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(e){if(e.stopImmediatePropagation(),!this._model.selectionStart)return;const t=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(e),!this._model.selectionEnd)return void this.refresh(!0);2===this._activeSelectionMode?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:1===this._activeSelectionMode&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(e),3!==this._activeSelectionMode&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));const r=this._bufferService.buffer;if(this._model.selectionEnd[1]<r.lines.length){const e=r.lines.get(this._model.selectionEnd[1]);e&&0===e.hasWidth(this._model.selectionEnd[0])&&this._model.selectionEnd[0]++}t&&t[0]===this._model.selectionEnd[0]&&t[1]===this._model.selectionEnd[1]||this.refresh(!0)}_dragScroll(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});const e=this._bufferService.buffer;this._dragScrollAmount>0?(3!==this._activeSelectionMode&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(e.ydisp+this._bufferService.rows,e.lines.length-1)):(3!==this._activeSelectionMode&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=e.ydisp),this.refresh()}}_handleMouseUp(e){const t=e.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&t<500&&e.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){const t=this._mouseService.getCoords(e,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(t&&void 0!==t[0]&&void 0!==t[1]){const e=(0,o.moveToCellSequence)(t[0]-1,t[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(e,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){const e=this._model.finalSelectionStart,t=this._model.finalSelectionEnd,r=!(!e||!t||e[0]===t[0]&&e[1]===t[1]);r?e&&t&&(this._oldSelectionStart&&this._oldSelectionEnd&&e[0]===this._oldSelectionStart[0]&&e[1]===this._oldSelectionStart[1]&&t[0]===this._oldSelectionEnd[0]&&t[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(e,t,r)):this._oldHasSelection&&this._fireOnSelectionChange(e,t,r)}_fireOnSelectionChange(e,t,r){this._oldSelectionStart=e,this._oldSelectionEnd=t,this._oldHasSelection=r,this._onSelectionChange.fire()}_handleBufferActivate(e){this.clearSelection(),this._trimListener.dispose(),this._trimListener=e.activeBuffer.lines.onTrim(e=>this._handleTrim(e))}_convertViewportColToCharacterIndex(e,t){let r=t;for(let i=0;t>=i;i++){const s=e.loadCell(i,this._workCell).getChars().length;0===this._workCell.getWidth()?r--:s>1&&t!==i&&(r+=s-1)}return r}setSelection(e,t,r){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[e,t],this._model.selectionStartLength=r,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(e){this._isClickInSelection(e)||(this._selectWordAtCursor(e,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(e,t,r=!0,i=!0){if(e[0]>=this._bufferService.cols)return;const s=this._bufferService.buffer,n=s.lines.get(e[1]);if(!n)return;const o=s.translateBufferLineToString(e[1],!1);let a=this._convertViewportColToCharacterIndex(n,e[0]),l=a;const c=e[0]-a;let h=0,u=0,d=0,f=0;if(" "===o.charAt(a)){for(;a>0&&" "===o.charAt(a-1);)a--;for(;l<o.length&&" "===o.charAt(l+1);)l++}else{let t=e[0],r=e[0];0===n.getWidth(t)&&(h++,t--),2===n.getWidth(r)&&(u++,r++);const i=n.getString(r).length;for(i>1&&(f+=i-1,l+=i-1);t>0&&a>0&&!this._isCharWordSeparator(n.loadCell(t-1,this._workCell));){n.loadCell(t-1,this._workCell);const e=this._workCell.getChars().length;0===this._workCell.getWidth()?(h++,t--):e>1&&(d+=e-1,a-=e-1),a--,t--}for(;r<n.length&&l+1<o.length&&!this._isCharWordSeparator(n.loadCell(r+1,this._workCell));){n.loadCell(r+1,this._workCell);const e=this._workCell.getChars().length;2===this._workCell.getWidth()?(u++,r++):e>1&&(f+=e-1,l+=e-1),l++,r++}}l++;let p=a+c-h+d,_=Math.min(this._bufferService.cols,l-a+h+u-d-f);if(t||""!==o.slice(a,l).trim()){if(r&&0===p&&32!==n.getCodePoint(0)){const t=s.lines.get(e[1]-1);if(t&&n.isWrapped&&32!==t.getCodePoint(this._bufferService.cols-1)){const t=this._getWordAt([this._bufferService.cols-1,e[1]-1],!1,!0,!1);if(t){const e=this._bufferService.cols-t.start;p-=e,_+=e}}}if(i&&p+_===this._bufferService.cols&&32!==n.getCodePoint(this._bufferService.cols-1)){const t=s.lines.get(e[1]+1);if((null==t?void 0:t.isWrapped)&&32!==t.getCodePoint(0)){const t=this._getWordAt([0,e[1]+1],!1,!1,!0);t&&(_+=t.length)}}return{start:p,length:_}}}_selectWordAt(e,t){const r=this._getWordAt(e,t);if(r){for(;r.start<0;)r.start+=this._bufferService.cols,e[1]--;this._model.selectionStart=[r.start,e[1]],this._model.selectionStartLength=r.length}}_selectToWordAt(e){const t=this._getWordAt(e,!0);if(t){let r=e[1];for(;t.start<0;)t.start+=this._bufferService.cols,r--;if(!this._model.areSelectionValuesReversed())for(;t.start+t.length>this._bufferService.cols;)t.length-=this._bufferService.cols,r++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?t.start:t.start+t.length,r]}}_isCharWordSeparator(e){return 0!==e.getWidth()&&this._optionsService.rawOptions.wordSeparator.indexOf(e.getChars())>=0}_selectLineAt(e){const t=this._bufferService.buffer.getWrappedRangeForLine(e),r={start:{x:0,y:t.first},end:{x:this._bufferService.cols-1,y:t.last}};this._model.selectionStart=[0,t.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=(0,d.getRangeLength)(r,this._bufferService.cols)}};t.SelectionService=g=i([s(3,p.IBufferService),s(4,p.ICoreService),s(5,l.IMouseService),s(6,p.IOptionsService),s(7,l.IRenderService),s(8,l.ICoreBrowserService)],g)},4725:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.IThemeService=t.ICharacterJoinerService=t.ISelectionService=t.IRenderService=t.IMouseService=t.ICoreBrowserService=t.ICharSizeService=void 0;const i=r(8343);t.ICharSizeService=(0,i.createDecorator)("CharSizeService"),t.ICoreBrowserService=(0,i.createDecorator)("CoreBrowserService"),t.IMouseService=(0,i.createDecorator)("MouseService"),t.IRenderService=(0,i.createDecorator)("RenderService"),t.ISelectionService=(0,i.createDecorator)("SelectionService"),t.ICharacterJoinerService=(0,i.createDecorator)("CharacterJoinerService"),t.IThemeService=(0,i.createDecorator)("ThemeService")},6731:function(e,t,r){var i=this&&this.__decorate||function(e,t,r,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n<3?s(o):n>3?s(t,r,o):s(t,r))||o);return n>3&&o&&Object.defineProperty(t,r,o),o},s=this&&this.__param||function(e,t){return function(r,i){t(r,i,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ThemeService=t.DEFAULT_ANSI_COLORS=void 0;const n=r(7239),o=r(8055),a=r(8460),l=r(844),c=r(2585),h=o.css.toColor("#ffffff"),u=o.css.toColor("#000000"),d=o.css.toColor("#ffffff"),f=o.css.toColor("#000000"),p={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};t.DEFAULT_ANSI_COLORS=Object.freeze((()=>{const e=[o.css.toColor("#2e3436"),o.css.toColor("#cc0000"),o.css.toColor("#4e9a06"),o.css.toColor("#c4a000"),o.css.toColor("#3465a4"),o.css.toColor("#75507b"),o.css.toColor("#06989a"),o.css.toColor("#d3d7cf"),o.css.toColor("#555753"),o.css.toColor("#ef2929"),o.css.toColor("#8ae234"),o.css.toColor("#fce94f"),o.css.toColor("#729fcf"),o.css.toColor("#ad7fa8"),o.css.toColor("#34e2e2"),o.css.toColor("#eeeeec")],t=[0,95,135,175,215,255];for(let r=0;r<216;r++){const i=t[r/36%6|0],s=t[r/6%6|0],n=t[r%6];e.push({css:o.channels.toCss(i,s,n),rgba:o.channels.toRgba(i,s,n)})}for(let r=0;r<24;r++){const t=8+10*r;e.push({css:o.channels.toCss(t,t,t),rgba:o.channels.toRgba(t,t,t)})}return e})());let _=t.ThemeService=class extends l.Disposable{get colors(){return this._colors}constructor(e){super(),this._optionsService=e,this._contrastCache=new n.ColorContrastCache,this._halfContrastCache=new n.ColorContrastCache,this._onChangeColors=this.register(new a.EventEmitter),this.onChangeColors=this._onChangeColors.event,this._colors={foreground:h,background:u,cursor:d,cursorAccent:f,selectionForeground:void 0,selectionBackgroundTransparent:p,selectionBackgroundOpaque:o.color.blend(u,p),selectionInactiveBackgroundTransparent:p,selectionInactiveBackgroundOpaque:o.color.blend(u,p),ansi:t.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache,halfContrastCache:this._halfContrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this.register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",()=>this._contrastCache.clear())),this.register(this._optionsService.onSpecificOptionChange("theme",()=>this._setTheme(this._optionsService.rawOptions.theme)))}_setTheme(e={}){const r=this._colors;if(r.foreground=v(e.foreground,h),r.background=v(e.background,u),r.cursor=v(e.cursor,d),r.cursorAccent=v(e.cursorAccent,f),r.selectionBackgroundTransparent=v(e.selectionBackground,p),r.selectionBackgroundOpaque=o.color.blend(r.background,r.selectionBackgroundTransparent),r.selectionInactiveBackgroundTransparent=v(e.selectionInactiveBackground,r.selectionBackgroundTransparent),r.selectionInactiveBackgroundOpaque=o.color.blend(r.background,r.selectionInactiveBackgroundTransparent),r.selectionForeground=e.selectionForeground?v(e.selectionForeground,o.NULL_COLOR):void 0,r.selectionForeground===o.NULL_COLOR&&(r.selectionForeground=void 0),o.color.isOpaque(r.selectionBackgroundTransparent)){const e=.3;r.selectionBackgroundTransparent=o.color.opacity(r.selectionBackgroundTransparent,e)}if(o.color.isOpaque(r.selectionInactiveBackgroundTransparent)){const e=.3;r.selectionInactiveBackgroundTransparent=o.color.opacity(r.selectionInactiveBackgroundTransparent,e)}if(r.ansi=t.DEFAULT_ANSI_COLORS.slice(),r.ansi[0]=v(e.black,t.DEFAULT_ANSI_COLORS[0]),r.ansi[1]=v(e.red,t.DEFAULT_ANSI_COLORS[1]),r.ansi[2]=v(e.green,t.DEFAULT_ANSI_COLORS[2]),r.ansi[3]=v(e.yellow,t.DEFAULT_ANSI_COLORS[3]),r.ansi[4]=v(e.blue,t.DEFAULT_ANSI_COLORS[4]),r.ansi[5]=v(e.magenta,t.DEFAULT_ANSI_COLORS[5]),r.ansi[6]=v(e.cyan,t.DEFAULT_ANSI_COLORS[6]),r.ansi[7]=v(e.white,t.DEFAULT_ANSI_COLORS[7]),r.ansi[8]=v(e.brightBlack,t.DEFAULT_ANSI_COLORS[8]),r.ansi[9]=v(e.brightRed,t.DEFAULT_ANSI_COLORS[9]),r.ansi[10]=v(e.brightGreen,t.DEFAULT_ANSI_COLORS[10]),r.ansi[11]=v(e.brightYellow,t.DEFAULT_ANSI_COLORS[11]),r.ansi[12]=v(e.brightBlue,t.DEFAULT_ANSI_COLORS[12]),r.ansi[13]=v(e.brightMagenta,t.DEFAULT_ANSI_COLORS[13]),r.ansi[14]=v(e.brightCyan,t.DEFAULT_ANSI_COLORS[14]),r.ansi[15]=v(e.brightWhite,t.DEFAULT_ANSI_COLORS[15]),e.extendedAnsi){const i=Math.min(r.ansi.length-16,e.extendedAnsi.length);for(let s=0;s<i;s++)r.ansi[s+16]=v(e.extendedAnsi[s],t.DEFAULT_ANSI_COLORS[s+16])}this._contrastCache.clear(),this._halfContrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(e){this._restoreColor(e),this._onChangeColors.fire(this.colors)}_restoreColor(e){if(void 0!==e)switch(e){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[e]=this._restoreColors.ansi[e]}else for(let t=0;t<this._restoreColors.ansi.length;++t)this._colors.ansi[t]=this._restoreColors.ansi[t]}modifyColors(e){e(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};function v(e,t){if(void 0!==e)try{return o.css.toColor(e)}catch(e){}return t}t.ThemeService=_=i([s(0,c.IOptionsService)],_)},6349:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CircularList=void 0;const i=r(8460),s=r(844);class n extends s.Disposable{constructor(e){super(),this._maxLength=e,this.onDeleteEmitter=this.register(new i.EventEmitter),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this.register(new i.EventEmitter),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this.register(new i.EventEmitter),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(e){if(this._maxLength===e)return;const t=new Array(e);for(let r=0;r<Math.min(e,this.length);r++)t[r]=this._array[this._getCyclicIndex(r)];this._array=t,this._maxLength=e,this._startIndex=0}get length(){return this._length}set length(e){if(e>this._length)for(let t=this._length;t<e;t++)this._array[t]=void 0;this._length=e}get(e){return this._array[this._getCyclicIndex(e)]}set(e,t){this._array[this._getCyclicIndex(e)]=t}push(e){this._array[this._getCyclicIndex(this._length)]=e,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(e,t,...r){if(t){for(let r=e;r<this._length-t;r++)this._array[this._getCyclicIndex(r)]=this._array[this._getCyclicIndex(r+t)];this._length-=t,this.onDeleteEmitter.fire({index:e,amount:t})}for(let i=this._length-1;i>=e;i--)this._array[this._getCyclicIndex(i+r.length)]=this._array[this._getCyclicIndex(i)];for(let i=0;i<r.length;i++)this._array[this._getCyclicIndex(e+i)]=r[i];if(r.length&&this.onInsertEmitter.fire({index:e,amount:r.length}),this._length+r.length>this._maxLength){const e=this._length+r.length-this._maxLength;this._startIndex+=e,this._length=this._maxLength,this.onTrimEmitter.fire(e)}else this._length+=r.length}trimStart(e){e>this._length&&(e=this._length),this._startIndex+=e,this._length-=e,this.onTrimEmitter.fire(e)}shiftElements(e,t,r){if(!(t<=0)){if(e<0||e>=this._length)throw new Error("start argument out of range");if(e+r<0)throw new Error("Cannot shift elements in list beyond index 0");if(r>0){for(let s=t-1;s>=0;s--)this.set(e+s+r,this.get(e+s));const i=e+t+r-this._length;if(i>0)for(this._length+=i;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let i=0;i<t;i++)this.set(e+i+r,this.get(e+i))}}_getCyclicIndex(e){return(this._startIndex+e)%this._maxLength}}t.CircularList=n},1439:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.clone=void 0,t.clone=function e(t,r=5){if("object"!=typeof t)return t;const i=Array.isArray(t)?[]:{};for(const s in t)i[s]=r<=1?t[s]:t[s]&&e(t[s],r-1);return i}},8055:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.contrastRatio=t.toPaddedHex=t.rgba=t.rgb=t.css=t.color=t.channels=t.NULL_COLOR=void 0;const i=r(6114);let s=0,n=0,o=0,a=0;var l,c,h,u,d;function f(e){const t=e.toString(16);return t.length<2?"0"+t:t}function p(e,t){return e<t?(t+.05)/(e+.05):(e+.05)/(t+.05)}t.NULL_COLOR={css:"#00000000",rgba:0},function(e){e.toCss=function(e,t,r,i){return void 0!==i?`#${f(e)}${f(t)}${f(r)}${f(i)}`:`#${f(e)}${f(t)}${f(r)}`},e.toRgba=function(e,t,r,i=255){return(e<<24|t<<16|r<<8|i)>>>0}}(l||(t.channels=l={})),function(e){function t(e,t){return a=Math.round(255*t),[s,n,o]=d.toChannels(e.rgba),{css:l.toCss(s,n,o,a),rgba:l.toRgba(s,n,o,a)}}e.blend=function(e,t){if(a=(255&t.rgba)/255,1===a)return{css:t.css,rgba:t.rgba};const r=t.rgba>>24&255,i=t.rgba>>16&255,c=t.rgba>>8&255,h=e.rgba>>24&255,u=e.rgba>>16&255,d=e.rgba>>8&255;return s=h+Math.round((r-h)*a),n=u+Math.round((i-u)*a),o=d+Math.round((c-d)*a),{css:l.toCss(s,n,o),rgba:l.toRgba(s,n,o)}},e.isOpaque=function(e){return!(255&~e.rgba)},e.ensureContrastRatio=function(e,t,r){const i=d.ensureContrastRatio(e.rgba,t.rgba,r);if(i)return d.toColor(i>>24&255,i>>16&255,i>>8&255)},e.opaque=function(e){const t=(255|e.rgba)>>>0;return[s,n,o]=d.toChannels(t),{css:l.toCss(s,n,o),rgba:t}},e.opacity=t,e.multiplyOpacity=function(e,r){return a=255&e.rgba,t(e,a*r/255)},e.toColorRGB=function(e){return[e.rgba>>24&255,e.rgba>>16&255,e.rgba>>8&255]}}(c||(t.color=c={})),function(e){let t,r;if(!i.isNode){const e=document.createElement("canvas");e.width=1,e.height=1;const i=e.getContext("2d",{willReadFrequently:!0});i&&(t=i,t.globalCompositeOperation="copy",r=t.createLinearGradient(0,0,1,1))}e.toColor=function(e){if(e.match(/#[\da-f]{3,8}/i))switch(e.length){case 4:return s=parseInt(e.slice(1,2).repeat(2),16),n=parseInt(e.slice(2,3).repeat(2),16),o=parseInt(e.slice(3,4).repeat(2),16),d.toColor(s,n,o);case 5:return s=parseInt(e.slice(1,2).repeat(2),16),n=parseInt(e.slice(2,3).repeat(2),16),o=parseInt(e.slice(3,4).repeat(2),16),a=parseInt(e.slice(4,5).repeat(2),16),d.toColor(s,n,o,a);case 7:return{css:e,rgba:(parseInt(e.slice(1),16)<<8|255)>>>0};case 9:return{css:e,rgba:parseInt(e.slice(1),16)>>>0}}const i=e.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(i)return s=parseInt(i[1]),n=parseInt(i[2]),o=parseInt(i[3]),a=Math.round(255*(void 0===i[5]?1:parseFloat(i[5]))),d.toColor(s,n,o,a);if(!t||!r)throw new Error("css.toColor: Unsupported css format");if(t.fillStyle=r,t.fillStyle=e,"string"!=typeof t.fillStyle)throw new Error("css.toColor: Unsupported css format");if(t.fillRect(0,0,1,1),[s,n,o,a]=t.getImageData(0,0,1,1).data,255!==a)throw new Error("css.toColor: Unsupported css format");return{rgba:l.toRgba(s,n,o,a),css:e}}}(h||(t.css=h={})),function(e){function t(e,t,r){const i=e/255,s=t/255,n=r/255;return.2126*(i<=.03928?i/12.92:Math.pow((i+.055)/1.055,2.4))+.7152*(s<=.03928?s/12.92:Math.pow((s+.055)/1.055,2.4))+.0722*(n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4))}e.relativeLuminance=function(e){return t(e>>16&255,e>>8&255,255&e)},e.relativeLuminance2=t}(u||(t.rgb=u={})),function(e){function t(e,t,r){const i=e>>24&255,s=e>>16&255,n=e>>8&255;let o=t>>24&255,a=t>>16&255,l=t>>8&255,c=p(u.relativeLuminance2(o,a,l),u.relativeLuminance2(i,s,n));for(;c<r&&(o>0||a>0||l>0);)o-=Math.max(0,Math.ceil(.1*o)),a-=Math.max(0,Math.ceil(.1*a)),l-=Math.max(0,Math.ceil(.1*l)),c=p(u.relativeLuminance2(o,a,l),u.relativeLuminance2(i,s,n));return(o<<24|a<<16|l<<8|255)>>>0}function r(e,t,r){const i=e>>24&255,s=e>>16&255,n=e>>8&255;let o=t>>24&255,a=t>>16&255,l=t>>8&255,c=p(u.relativeLuminance2(o,a,l),u.relativeLuminance2(i,s,n));for(;c<r&&(o<255||a<255||l<255);)o=Math.min(255,o+Math.ceil(.1*(255-o))),a=Math.min(255,a+Math.ceil(.1*(255-a))),l=Math.min(255,l+Math.ceil(.1*(255-l))),c=p(u.relativeLuminance2(o,a,l),u.relativeLuminance2(i,s,n));return(o<<24|a<<16|l<<8|255)>>>0}e.ensureContrastRatio=function(e,i,s){const n=u.relativeLuminance(e>>8),o=u.relativeLuminance(i>>8);if(p(n,o)<s){if(o<n){const o=t(e,i,s),a=p(n,u.relativeLuminance(o>>8));if(a<s){const t=r(e,i,s);return a>p(n,u.relativeLuminance(t>>8))?o:t}return o}const a=r(e,i,s),l=p(n,u.relativeLuminance(a>>8));if(l<s){const r=t(e,i,s);return l>p(n,u.relativeLuminance(r>>8))?a:r}return a}},e.reduceLuminance=t,e.increaseLuminance=r,e.toChannels=function(e){return[e>>24&255,e>>16&255,e>>8&255,255&e]},e.toColor=function(e,t,r,i){return{css:l.toCss(e,t,r,i),rgba:l.toRgba(e,t,r,i)}}}(d||(t.rgba=d={})),t.toPaddedHex=f,t.contrastRatio=p},8969:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CoreTerminal=void 0;const i=r(844),s=r(2585),n=r(4348),o=r(7866),a=r(744),l=r(7302),c=r(6975),h=r(8460),u=r(1753),d=r(1480),f=r(7994),p=r(9282),_=r(5435),v=r(5981),g=r(2660);let m=!1;class b extends i.Disposable{get onScroll(){return this._onScrollApi||(this._onScrollApi=this.register(new h.EventEmitter),this._onScroll.event(e=>{var t;null===(t=this._onScrollApi)||void 0===t||t.fire(e.position)})),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(e){for(const t in e)this.optionsService.options[t]=e[t]}constructor(e){super(),this._windowsWrappingHeuristics=this.register(new i.MutableDisposable),this._onBinary=this.register(new h.EventEmitter),this.onBinary=this._onBinary.event,this._onData=this.register(new h.EventEmitter),this.onData=this._onData.event,this._onLineFeed=this.register(new h.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onResize=this.register(new h.EventEmitter),this.onResize=this._onResize.event,this._onWriteParsed=this.register(new h.EventEmitter),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this.register(new h.EventEmitter),this._instantiationService=new n.InstantiationService,this.optionsService=this.register(new l.OptionsService(e)),this._instantiationService.setService(s.IOptionsService,this.optionsService),this._bufferService=this.register(this._instantiationService.createInstance(a.BufferService)),this._instantiationService.setService(s.IBufferService,this._bufferService),this._logService=this.register(this._instantiationService.createInstance(o.LogService)),this._instantiationService.setService(s.ILogService,this._logService),this.coreService=this.register(this._instantiationService.createInstance(c.CoreService)),this._instantiationService.setService(s.ICoreService,this.coreService),this.coreMouseService=this.register(this._instantiationService.createInstance(u.CoreMouseService)),this._instantiationService.setService(s.ICoreMouseService,this.coreMouseService),this.unicodeService=this.register(this._instantiationService.createInstance(d.UnicodeService)),this._instantiationService.setService(s.IUnicodeService,this.unicodeService),this._charsetService=this._instantiationService.createInstance(f.CharsetService),this._instantiationService.setService(s.ICharsetService,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(g.OscLinkService),this._instantiationService.setService(s.IOscLinkService,this._oscLinkService),this._inputHandler=this.register(new _.InputHandler(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this.register((0,h.forwardEvent)(this._inputHandler.onLineFeed,this._onLineFeed)),this.register(this._inputHandler),this.register((0,h.forwardEvent)(this._bufferService.onResize,this._onResize)),this.register((0,h.forwardEvent)(this.coreService.onData,this._onData)),this.register((0,h.forwardEvent)(this.coreService.onBinary,this._onBinary)),this.register(this.coreService.onRequestScrollToBottom(()=>this.scrollToBottom())),this.register(this.coreService.onUserInput(()=>this._writeBuffer.handleUserInput())),this.register(this.optionsService.onMultipleOptionChange(["windowsMode","windowsPty"],()=>this._handleWindowsPtyOptionChange())),this.register(this._bufferService.onScroll(e=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this.register(this._inputHandler.onScroll(e=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this._writeBuffer=this.register(new v.WriteBuffer((e,t)=>this._inputHandler.parse(e,t))),this.register((0,h.forwardEvent)(this._writeBuffer.onWriteParsed,this._onWriteParsed))}write(e,t){this._writeBuffer.write(e,t)}writeSync(e,t){this._logService.logLevel<=s.LogLevelEnum.WARN&&!m&&(this._logService.warn("writeSync is unreliable and will be removed soon."),m=!0),this._writeBuffer.writeSync(e,t)}resize(e,t){isNaN(e)||isNaN(t)||(e=Math.max(e,a.MINIMUM_COLS),t=Math.max(t,a.MINIMUM_ROWS),this._bufferService.resize(e,t))}scroll(e,t=!1){this._bufferService.scroll(e,t)}scrollLines(e,t,r){this._bufferService.scrollLines(e,t,r)}scrollPages(e){this.scrollLines(e*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(){this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(e){const t=e-this._bufferService.buffer.ydisp;0!==t&&this.scrollLines(t)}registerEscHandler(e,t){return this._inputHandler.registerEscHandler(e,t)}registerDcsHandler(e,t){return this._inputHandler.registerDcsHandler(e,t)}registerCsiHandler(e,t){return this._inputHandler.registerCsiHandler(e,t)}registerOscHandler(e,t){return this._inputHandler.registerOscHandler(e,t)}_setup(){this._handleWindowsPtyOptionChange()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsPtyOptionChange(){let e=!1;const t=this.optionsService.rawOptions.windowsPty;t&&void 0!==t.buildNumber&&void 0!==t.buildNumber?e=!!("conpty"===t.backend&&t.buildNumber<21376):this.optionsService.rawOptions.windowsMode&&(e=!0),e?this._enableWindowsWrappingHeuristics():this._windowsWrappingHeuristics.clear()}_enableWindowsWrappingHeuristics(){if(!this._windowsWrappingHeuristics.value){const e=[];e.push(this.onLineFeed(p.updateWindowsModeWrappedState.bind(null,this._bufferService))),e.push(this.registerCsiHandler({final:"H"},()=>((0,p.updateWindowsModeWrappedState)(this._bufferService),!1))),this._windowsWrappingHeuristics.value=(0,i.toDisposable)(()=>{for(const t of e)t.dispose()})}}}t.CoreTerminal=b},8460:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.forwardEvent=t.EventEmitter=void 0,t.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=e=>(this._listeners.push(e),{dispose:()=>{if(!this._disposed)for(let t=0;t<this._listeners.length;t++)if(this._listeners[t]===e)return void this._listeners.splice(t,1)}})),this._event}fire(e,t){const r=[];for(let i=0;i<this._listeners.length;i++)r.push(this._listeners[i]);for(let i=0;i<r.length;i++)r[i].call(void 0,e,t)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},t.forwardEvent=function(e,t){return e(e=>t.fire(e))}},5435:function(e,t,r){var i=this&&this.__decorate||function(e,t,r,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n<3?s(o):n>3?s(t,r,o):s(t,r))||o);return n>3&&o&&Object.defineProperty(t,r,o),o},s=this&&this.__param||function(e,t){return function(r,i){t(r,i,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.InputHandler=t.WindowsOptionsReportType=void 0;const n=r(2584),o=r(7116),a=r(2015),l=r(844),c=r(482),h=r(8437),u=r(8460),d=r(643),f=r(511),p=r(3734),_=r(2585),v=r(6242),g=r(6351),m=r(5941),b={"(":0,")":1,"*":2,"+":3,"-":1,".":2},y=131072;function S(e,t){if(e>24)return t.setWinLines||!1;switch(e){case 1:return!!t.restoreWin;case 2:return!!t.minimizeWin;case 3:return!!t.setWinPosition;case 4:return!!t.setWinSizePixels;case 5:return!!t.raiseWin;case 6:return!!t.lowerWin;case 7:return!!t.refreshWin;case 8:return!!t.setWinSizeChars;case 9:return!!t.maximizeWin;case 10:return!!t.fullscreenWin;case 11:return!!t.getWinState;case 13:return!!t.getWinPosition;case 14:return!!t.getWinSizePixels;case 15:return!!t.getScreenSizePixels;case 16:return!!t.getCellSizePixels;case 18:return!!t.getWinSizeChars;case 19:return!!t.getScreenSizeChars;case 20:return!!t.getIconTitle;case 21:return!!t.getWinTitle;case 22:return!!t.pushTitle;case 23:return!!t.popTitle;case 24:return!!t.setWinLines}return!1}var w;!function(e){e[e.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",e[e.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"}(w||(t.WindowsOptionsReportType=w={}));let C=0;class x extends l.Disposable{getAttrData(){return this._curAttrData}constructor(e,t,r,i,s,l,d,p,_=new a.EscapeSequenceParser){super(),this._bufferService=e,this._charsetService=t,this._coreService=r,this._logService=i,this._optionsService=s,this._oscLinkService=l,this._coreMouseService=d,this._unicodeService=p,this._parser=_,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new c.StringToUtf32,this._utf8Decoder=new c.Utf8ToUtf32,this._workCell=new f.CellData,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=h.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=h.DEFAULT_ATTR_DATA.clone(),this._onRequestBell=this.register(new u.EventEmitter),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this.register(new u.EventEmitter),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this.register(new u.EventEmitter),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this.register(new u.EventEmitter),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this.register(new u.EventEmitter),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this.register(new u.EventEmitter),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this.register(new u.EventEmitter),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this.register(new u.EventEmitter),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this.register(new u.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this.register(new u.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onScroll=this.register(new u.EventEmitter),this.onScroll=this._onScroll.event,this._onTitleChange=this.register(new u.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onColor=this.register(new u.EventEmitter),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this.register(this._parser),this._dirtyRowTracker=new k(this._bufferService),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(e=>this._activeBuffer=e.activeBuffer)),this._parser.setCsiHandlerFallback((e,t)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(e),params:t.toArray()})}),this._parser.setEscHandlerFallback(e=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(e)})}),this._parser.setExecuteHandlerFallback(e=>{this._logService.debug("Unknown EXECUTE code: ",{code:e})}),this._parser.setOscHandlerFallback((e,t,r)=>{this._logService.debug("Unknown OSC code: ",{identifier:e,action:t,data:r})}),this._parser.setDcsHandlerFallback((e,t,r)=>{"HOOK"===t&&(r=r.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(e),action:t,payload:r})}),this._parser.setPrintHandler((e,t,r)=>this.print(e,t,r)),this._parser.registerCsiHandler({final:"@"},e=>this.insertChars(e)),this._parser.registerCsiHandler({intermediates:" ",final:"@"},e=>this.scrollLeft(e)),this._parser.registerCsiHandler({final:"A"},e=>this.cursorUp(e)),this._parser.registerCsiHandler({intermediates:" ",final:"A"},e=>this.scrollRight(e)),this._parser.registerCsiHandler({final:"B"},e=>this.cursorDown(e)),this._parser.registerCsiHandler({final:"C"},e=>this.cursorForward(e)),this._parser.registerCsiHandler({final:"D"},e=>this.cursorBackward(e)),this._parser.registerCsiHandler({final:"E"},e=>this.cursorNextLine(e)),this._parser.registerCsiHandler({final:"F"},e=>this.cursorPrecedingLine(e)),this._parser.registerCsiHandler({final:"G"},e=>this.cursorCharAbsolute(e)),this._parser.registerCsiHandler({final:"H"},e=>this.cursorPosition(e)),this._parser.registerCsiHandler({final:"I"},e=>this.cursorForwardTab(e)),this._parser.registerCsiHandler({final:"J"},e=>this.eraseInDisplay(e,!1)),this._parser.registerCsiHandler({prefix:"?",final:"J"},e=>this.eraseInDisplay(e,!0)),this._parser.registerCsiHandler({final:"K"},e=>this.eraseInLine(e,!1)),this._parser.registerCsiHandler({prefix:"?",final:"K"},e=>this.eraseInLine(e,!0)),this._parser.registerCsiHandler({final:"L"},e=>this.insertLines(e)),this._parser.registerCsiHandler({final:"M"},e=>this.deleteLines(e)),this._parser.registerCsiHandler({final:"P"},e=>this.deleteChars(e)),this._parser.registerCsiHandler({final:"S"},e=>this.scrollUp(e)),this._parser.registerCsiHandler({final:"T"},e=>this.scrollDown(e)),this._parser.registerCsiHandler({final:"X"},e=>this.eraseChars(e)),this._parser.registerCsiHandler({final:"Z"},e=>this.cursorBackwardTab(e)),this._parser.registerCsiHandler({final:"`"},e=>this.charPosAbsolute(e)),this._parser.registerCsiHandler({final:"a"},e=>this.hPositionRelative(e)),this._parser.registerCsiHandler({final:"b"},e=>this.repeatPrecedingCharacter(e)),this._parser.registerCsiHandler({final:"c"},e=>this.sendDeviceAttributesPrimary(e)),this._parser.registerCsiHandler({prefix:">",final:"c"},e=>this.sendDeviceAttributesSecondary(e)),this._parser.registerCsiHandler({final:"d"},e=>this.linePosAbsolute(e)),this._parser.registerCsiHandler({final:"e"},e=>this.vPositionRelative(e)),this._parser.registerCsiHandler({final:"f"},e=>this.hVPosition(e)),this._parser.registerCsiHandler({final:"g"},e=>this.tabClear(e)),this._parser.registerCsiHandler({final:"h"},e=>this.setMode(e)),this._parser.registerCsiHandler({prefix:"?",final:"h"},e=>this.setModePrivate(e)),this._parser.registerCsiHandler({final:"l"},e=>this.resetMode(e)),this._parser.registerCsiHandler({prefix:"?",final:"l"},e=>this.resetModePrivate(e)),this._parser.registerCsiHandler({final:"m"},e=>this.charAttributes(e)),this._parser.registerCsiHandler({final:"n"},e=>this.deviceStatus(e)),this._parser.registerCsiHandler({prefix:"?",final:"n"},e=>this.deviceStatusPrivate(e)),this._parser.registerCsiHandler({intermediates:"!",final:"p"},e=>this.softReset(e)),this._parser.registerCsiHandler({intermediates:" ",final:"q"},e=>this.setCursorStyle(e)),this._parser.registerCsiHandler({final:"r"},e=>this.setScrollRegion(e)),this._parser.registerCsiHandler({final:"s"},e=>this.saveCursor(e)),this._parser.registerCsiHandler({final:"t"},e=>this.windowOptions(e)),this._parser.registerCsiHandler({final:"u"},e=>this.restoreCursor(e)),this._parser.registerCsiHandler({intermediates:"'",final:"}"},e=>this.insertColumns(e)),this._parser.registerCsiHandler({intermediates:"'",final:"~"},e=>this.deleteColumns(e)),this._parser.registerCsiHandler({intermediates:'"',final:"q"},e=>this.selectProtected(e)),this._parser.registerCsiHandler({intermediates:"$",final:"p"},e=>this.requestMode(e,!0)),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},e=>this.requestMode(e,!1)),this._parser.setExecuteHandler(n.C0.BEL,()=>this.bell()),this._parser.setExecuteHandler(n.C0.LF,()=>this.lineFeed()),this._parser.setExecuteHandler(n.C0.VT,()=>this.lineFeed()),this._parser.setExecuteHandler(n.C0.FF,()=>this.lineFeed()),this._parser.setExecuteHandler(n.C0.CR,()=>this.carriageReturn()),this._parser.setExecuteHandler(n.C0.BS,()=>this.backspace()),this._parser.setExecuteHandler(n.C0.HT,()=>this.tab()),this._parser.setExecuteHandler(n.C0.SO,()=>this.shiftOut()),this._parser.setExecuteHandler(n.C0.SI,()=>this.shiftIn()),this._parser.setExecuteHandler(n.C1.IND,()=>this.index()),this._parser.setExecuteHandler(n.C1.NEL,()=>this.nextLine()),this._parser.setExecuteHandler(n.C1.HTS,()=>this.tabSet()),this._parser.registerOscHandler(0,new v.OscHandler(e=>(this.setTitle(e),this.setIconName(e),!0))),this._parser.registerOscHandler(1,new v.OscHandler(e=>this.setIconName(e))),this._parser.registerOscHandler(2,new v.OscHandler(e=>this.setTitle(e))),this._parser.registerOscHandler(4,new v.OscHandler(e=>this.setOrReportIndexedColor(e))),this._parser.registerOscHandler(8,new v.OscHandler(e=>this.setHyperlink(e))),this._parser.registerOscHandler(10,new v.OscHandler(e=>this.setOrReportFgColor(e))),this._parser.registerOscHandler(11,new v.OscHandler(e=>this.setOrReportBgColor(e))),this._parser.registerOscHandler(12,new v.OscHandler(e=>this.setOrReportCursorColor(e))),this._parser.registerOscHandler(104,new v.OscHandler(e=>this.restoreIndexedColor(e))),this._parser.registerOscHandler(110,new v.OscHandler(e=>this.restoreFgColor(e))),this._parser.registerOscHandler(111,new v.OscHandler(e=>this.restoreBgColor(e))),this._parser.registerOscHandler(112,new v.OscHandler(e=>this.restoreCursorColor(e))),this._parser.registerEscHandler({final:"7"},()=>this.saveCursor()),this._parser.registerEscHandler({final:"8"},()=>this.restoreCursor()),this._parser.registerEscHandler({final:"D"},()=>this.index()),this._parser.registerEscHandler({final:"E"},()=>this.nextLine()),this._parser.registerEscHandler({final:"H"},()=>this.tabSet()),this._parser.registerEscHandler({final:"M"},()=>this.reverseIndex()),this._parser.registerEscHandler({final:"="},()=>this.keypadApplicationMode()),this._parser.registerEscHandler({final:">"},()=>this.keypadNumericMode()),this._parser.registerEscHandler({final:"c"},()=>this.fullReset()),this._parser.registerEscHandler({final:"n"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"o"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"|"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"}"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"~"},()=>this.setgLevel(1)),this._parser.registerEscHandler({intermediates:"%",final:"@"},()=>this.selectDefaultCharset()),this._parser.registerEscHandler({intermediates:"%",final:"G"},()=>this.selectDefaultCharset());for(const n in o.CHARSETS)this._parser.registerEscHandler({intermediates:"(",final:n},()=>this.selectCharset("("+n)),this._parser.registerEscHandler({intermediates:")",final:n},()=>this.selectCharset(")"+n)),this._parser.registerEscHandler({intermediates:"*",final:n},()=>this.selectCharset("*"+n)),this._parser.registerEscHandler({intermediates:"+",final:n},()=>this.selectCharset("+"+n)),this._parser.registerEscHandler({intermediates:"-",final:n},()=>this.selectCharset("-"+n)),this._parser.registerEscHandler({intermediates:".",final:n},()=>this.selectCharset("."+n)),this._parser.registerEscHandler({intermediates:"/",final:n},()=>this.selectCharset("/"+n));this._parser.registerEscHandler({intermediates:"#",final:"8"},()=>this.screenAlignmentPattern()),this._parser.setErrorHandler(e=>(this._logService.error("Parsing error: ",e),e)),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new g.DcsHandler((e,t)=>this.requestStatusString(e,t)))}_preserveStack(e,t,r,i){this._parseStack.paused=!0,this._parseStack.cursorStartX=e,this._parseStack.cursorStartY=t,this._parseStack.decodedLength=r,this._parseStack.position=i}_logSlowResolvingAsync(e){this._logService.logLevel<=_.LogLevelEnum.WARN&&Promise.race([e,new Promise((e,t)=>setTimeout(()=>t("#SLOW_TIMEOUT"),5e3))]).catch(e=>{if("#SLOW_TIMEOUT"!==e)throw e;console.warn("async parser handler taking longer than 5000 ms")})}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(e,t){let r,i=this._activeBuffer.x,s=this._activeBuffer.y,n=0;const o=this._parseStack.paused;if(o){if(r=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,t))return this._logSlowResolvingAsync(r),r;i=this._parseStack.cursorStartX,s=this._parseStack.cursorStartY,this._parseStack.paused=!1,e.length>y&&(n=this._parseStack.position+y)}if(this._logService.logLevel<=_.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+("string"==typeof e?` "${e}"`:` "${Array.prototype.map.call(e,e=>String.fromCharCode(e)).join("")}"`),"string"==typeof e?e.split("").map(e=>e.charCodeAt(0)):e),this._parseBuffer.length<e.length&&this._parseBuffer.length<y&&(this._parseBuffer=new Uint32Array(Math.min(e.length,y))),o||this._dirtyRowTracker.clearRange(),e.length>y)for(let a=n;a<e.length;a+=y){const t=a+y<e.length?a+y:e.length,n="string"==typeof e?this._stringDecoder.decode(e.substring(a,t),this._parseBuffer):this._utf8Decoder.decode(e.subarray(a,t),this._parseBuffer);if(r=this._parser.parse(this._parseBuffer,n))return this._preserveStack(i,s,n,a),this._logSlowResolvingAsync(r),r}else if(!o){const t="string"==typeof e?this._stringDecoder.decode(e,this._parseBuffer):this._utf8Decoder.decode(e,this._parseBuffer);if(r=this._parser.parse(this._parseBuffer,t))return this._preserveStack(i,s,t,0),this._logSlowResolvingAsync(r),r}this._activeBuffer.x===i&&this._activeBuffer.y===s||this._onCursorMove.fire(),this._onRequestRefreshRows.fire(this._dirtyRowTracker.start,this._dirtyRowTracker.end)}print(e,t,r){let i,s;const n=this._charsetService.charset,o=this._optionsService.rawOptions.screenReaderMode,a=this._bufferService.cols,l=this._coreService.decPrivateModes.wraparound,h=this._coreService.modes.insertMode,u=this._curAttrData;let f=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&r-t>0&&2===f.getWidth(this._activeBuffer.x-1)&&f.setCellFromCodePoint(this._activeBuffer.x-1,0,1,u.fg,u.bg,u.extended);for(let p=t;p<r;++p){if(i=e[p],s=this._unicodeService.wcwidth(i),i<127&&n){const e=n[String.fromCharCode(i)];e&&(i=e.charCodeAt(0))}if(o&&this._onA11yChar.fire((0,c.stringFromCodePoint)(i)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),s||!this._activeBuffer.x){if(this._activeBuffer.x+s-1>=a)if(l){for(;this._activeBuffer.x<a;)f.setCellFromCodePoint(this._activeBuffer.x++,0,1,u.fg,u.bg,u.extended);this._activeBuffer.x=0,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),f=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y)}else if(this._activeBuffer.x=a-1,2===s)continue;if(h&&(f.insertCells(this._activeBuffer.x,s,this._activeBuffer.getNullCell(u),u),2===f.getWidth(a-1)&&f.setCellFromCodePoint(a-1,d.NULL_CELL_CODE,d.NULL_CELL_WIDTH,u.fg,u.bg,u.extended)),f.setCellFromCodePoint(this._activeBuffer.x++,i,s,u.fg,u.bg,u.extended),s>0)for(;--s;)f.setCellFromCodePoint(this._activeBuffer.x++,0,0,u.fg,u.bg,u.extended)}else f.getWidth(this._activeBuffer.x-1)?f.addCodepointToCell(this._activeBuffer.x-1,i):f.addCodepointToCell(this._activeBuffer.x-2,i)}r-t>0&&(f.loadCell(this._activeBuffer.x-1,this._workCell),2===this._workCell.getWidth()||this._workCell.getCode()>65535?this._parser.precedingCodepoint=0:this._workCell.isCombined()?this._parser.precedingCodepoint=this._workCell.getChars().charCodeAt(0):this._parser.precedingCodepoint=this._workCell.content),this._activeBuffer.x<a&&r-t>0&&0===f.getWidth(this._activeBuffer.x)&&!f.hasContent(this._activeBuffer.x)&&f.setCellFromCodePoint(this._activeBuffer.x,0,1,u.fg,u.bg,u.extended),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(e,t){return"t"!==e.final||e.prefix||e.intermediates?this._parser.registerCsiHandler(e,t):this._parser.registerCsiHandler(e,e=>!S(e.params[0],this._optionsService.rawOptions.windowOptions)||t(e))}registerDcsHandler(e,t){return this._parser.registerDcsHandler(e,new g.DcsHandler(t))}registerEscHandler(e,t){return this._parser.registerEscHandler(e,t)}registerOscHandler(e,t){return this._parser.registerOscHandler(e,new v.OscHandler(t))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows?this._activeBuffer.y=this._bufferService.rows-1:this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){var e;if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(0===this._activeBuffer.x&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&(null===(e=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y))||void 0===e?void 0:e.isWrapped)){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;const e=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);e.hasWidth(this._activeBuffer.x)&&!e.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;const e=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-e),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(e=this._bufferService.cols-1){this._activeBuffer.x=Math.min(e,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(e,t){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=e,this._activeBuffer.y=this._activeBuffer.scrollTop+t):(this._activeBuffer.x=e,this._activeBuffer.y=t),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(e,t){this._restrictCursor(),this._setCursor(this._activeBuffer.x+e,this._activeBuffer.y+t)}cursorUp(e){const t=this._activeBuffer.y-this._activeBuffer.scrollTop;return t>=0?this._moveCursor(0,-Math.min(t,e.params[0]||1)):this._moveCursor(0,-(e.params[0]||1)),!0}cursorDown(e){const t=this._activeBuffer.scrollBottom-this._activeBuffer.y;return t>=0?this._moveCursor(0,Math.min(t,e.params[0]||1)):this._moveCursor(0,e.params[0]||1),!0}cursorForward(e){return this._moveCursor(e.params[0]||1,0),!0}cursorBackward(e){return this._moveCursor(-(e.params[0]||1),0),!0}cursorNextLine(e){return this.cursorDown(e),this._activeBuffer.x=0,!0}cursorPrecedingLine(e){return this.cursorUp(e),this._activeBuffer.x=0,!0}cursorCharAbsolute(e){return this._setCursor((e.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(e){return this._setCursor(e.length>=2?(e.params[1]||1)-1:0,(e.params[0]||1)-1),!0}charPosAbsolute(e){return this._setCursor((e.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(e){return this._moveCursor(e.params[0]||1,0),!0}linePosAbsolute(e){return this._setCursor(this._activeBuffer.x,(e.params[0]||1)-1),!0}vPositionRelative(e){return this._moveCursor(0,e.params[0]||1),!0}hVPosition(e){return this.cursorPosition(e),!0}tabClear(e){const t=e.params[0];return 0===t?delete this._activeBuffer.tabs[this._activeBuffer.x]:3===t&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(e){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let t=e.params[0]||1;for(;t--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(e){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let t=e.params[0]||1;for(;t--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(e){const t=e.params[0];return 1===t&&(this._curAttrData.bg|=536870912),2!==t&&0!==t||(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(e,t,r,i=!1,s=!1){const n=this._activeBuffer.lines.get(this._activeBuffer.ybase+e);n.replaceCells(t,r,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData(),s),i&&(n.isWrapped=!1)}_resetBufferLine(e,t=!1){const r=this._activeBuffer.lines.get(this._activeBuffer.ybase+e);r&&(r.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),t),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+e),r.isWrapped=!1)}eraseInDisplay(e,t=!1){let r;switch(this._restrictCursor(this._bufferService.cols),e.params[0]){case 0:for(r=this._activeBuffer.y,this._dirtyRowTracker.markDirty(r),this._eraseInBufferLine(r++,this._activeBuffer.x,this._bufferService.cols,0===this._activeBuffer.x,t);r<this._bufferService.rows;r++)this._resetBufferLine(r,t);this._dirtyRowTracker.markDirty(r);break;case 1:for(r=this._activeBuffer.y,this._dirtyRowTracker.markDirty(r),this._eraseInBufferLine(r,0,this._activeBuffer.x+1,!0,t),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(r+1).isWrapped=!1);r--;)this._resetBufferLine(r,t);this._dirtyRowTracker.markDirty(0);break;case 2:for(r=this._bufferService.rows,this._dirtyRowTracker.markDirty(r-1);r--;)this._resetBufferLine(r,t);this._dirtyRowTracker.markDirty(0);break;case 3:const e=this._activeBuffer.lines.length-this._bufferService.rows;e>0&&(this._activeBuffer.lines.trimStart(e),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-e,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-e,0),this._onScroll.fire(0))}return!0}eraseInLine(e,t=!1){switch(this._restrictCursor(this._bufferService.cols),e.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,0===this._activeBuffer.x,t);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,t);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,t)}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(e){this._restrictCursor();let t=e.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const r=this._activeBuffer.ybase+this._activeBuffer.y,i=this._bufferService.rows-1-this._activeBuffer.scrollBottom,s=this._bufferService.rows-1+this._activeBuffer.ybase-i+1;for(;t--;)this._activeBuffer.lines.splice(s-1,1),this._activeBuffer.lines.splice(r,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(e){this._restrictCursor();let t=e.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const r=this._activeBuffer.ybase+this._activeBuffer.y;let i;for(i=this._bufferService.rows-1-this._activeBuffer.scrollBottom,i=this._bufferService.rows-1+this._activeBuffer.ybase-i;t--;)this._activeBuffer.lines.splice(r,1),this._activeBuffer.lines.splice(i,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(e){this._restrictCursor();const t=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return t&&(t.insertCells(this._activeBuffer.x,e.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(e){this._restrictCursor();const t=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return t&&(t.deleteCells(this._activeBuffer.x,e.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(e){let t=e.params[0]||1;for(;t--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(e){let t=e.params[0]||1;for(;t--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(h.DEFAULT_ATTR_DATA));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(e){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const t=e.params[0]||1;for(let r=this._activeBuffer.scrollTop;r<=this._activeBuffer.scrollBottom;++r){const e=this._activeBuffer.lines.get(this._activeBuffer.ybase+r);e.deleteCells(0,t,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),e.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(e){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const t=e.params[0]||1;for(let r=this._activeBuffer.scrollTop;r<=this._activeBuffer.scrollBottom;++r){const e=this._activeBuffer.lines.get(this._activeBuffer.ybase+r);e.insertCells(0,t,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),e.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(e){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const t=e.params[0]||1;for(let r=this._activeBuffer.scrollTop;r<=this._activeBuffer.scrollBottom;++r){const e=this._activeBuffer.lines.get(this._activeBuffer.ybase+r);e.insertCells(this._activeBuffer.x,t,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),e.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(e){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const t=e.params[0]||1;for(let r=this._activeBuffer.scrollTop;r<=this._activeBuffer.scrollBottom;++r){const e=this._activeBuffer.lines.get(this._activeBuffer.ybase+r);e.deleteCells(this._activeBuffer.x,t,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),e.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(e){this._restrictCursor();const t=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return t&&(t.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(e.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(e){if(!this._parser.precedingCodepoint)return!0;const t=e.params[0]||1,r=new Uint32Array(t);for(let i=0;i<t;++i)r[i]=this._parser.precedingCodepoint;return this.print(r,0,r.length),!0}sendDeviceAttributesPrimary(e){return e.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(n.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(n.C0.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(e){return e.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(n.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(n.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(e.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(n.C0.ESC+"[>83;40003;0c")),!0}_is(e){return 0===(this._optionsService.rawOptions.termName+"").indexOf(e)}setMode(e){for(let t=0;t<e.length;t++)switch(e.params[t]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0}return!0}setModePrivate(e){for(let t=0;t<e.length;t++)switch(e.params[t]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,o.DEFAULT_CHARSET),this._charsetService.setgCharset(1,o.DEFAULT_CHARSET),this._charsetService.setgCharset(2,o.DEFAULT_CHARSET),this._charsetService.setgCharset(3,o.DEFAULT_CHARSET);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0}resetMode(e){for(let t=0;t<e.length;t++)switch(e.params[t]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1}return!0}resetModePrivate(e){for(let t=0;t<e.length;t++)switch(e.params[t]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),1049===e.params[t]&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0}requestMode(e,t){const r=this._coreService.decPrivateModes,{activeProtocol:i,activeEncoding:s}=this._coreMouseService,o=this._coreService,{buffers:a,cols:l}=this._bufferService,{active:c,alt:h}=a,u=this._optionsService.rawOptions,d=e=>e?1:2,f=e.params[0];return p=f,_=t?2===f?4:4===f?d(o.modes.insertMode):12===f?3:20===f?d(u.convertEol):0:1===f?d(r.applicationCursorKeys):3===f?u.windowOptions.setWinLines?80===l?2:132===l?1:0:0:6===f?d(r.origin):7===f?d(r.wraparound):8===f?3:9===f?d("X10"===i):12===f?d(u.cursorBlink):25===f?d(!o.isCursorHidden):45===f?d(r.reverseWraparound):66===f?d(r.applicationKeypad):67===f?4:1e3===f?d("VT200"===i):1002===f?d("DRAG"===i):1003===f?d("ANY"===i):1004===f?d(r.sendFocus):1005===f?4:1006===f?d("SGR"===s):1015===f?4:1016===f?d("SGR_PIXELS"===s):1048===f?1:47===f||1047===f||1049===f?d(c===h):2004===f?d(r.bracketedPasteMode):0,o.triggerDataEvent(`${n.C0.ESC}[${t?"":"?"}${p};${_}$y`),!0;var p,_}_updateAttrColor(e,t,r,i,s){return 2===t?(e|=50331648,e&=-16777216,e|=p.AttributeData.fromColorRGB([r,i,s])):5===t&&(e&=-50331904,e|=33554432|255&r),e}_extractColor(e,t,r){const i=[0,0,-1,0,0,0];let s=0,n=0;do{if(i[n+s]=e.params[t+n],e.hasSubParams(t+n)){const r=e.getSubParams(t+n);let o=0;do{5===i[1]&&(s=1),i[n+o+1+s]=r[o]}while(++o<r.length&&o+n+1+s<i.length);break}if(5===i[1]&&n+s>=2||2===i[1]&&n+s>=5)break;i[1]&&(s=1)}while(++n+t<e.length&&n+s<i.length);for(let o=2;o<i.length;++o)-1===i[o]&&(i[o]=0);switch(i[0]){case 38:r.fg=this._updateAttrColor(r.fg,i[1],i[3],i[4],i[5]);break;case 48:r.bg=this._updateAttrColor(r.bg,i[1],i[3],i[4],i[5]);break;case 58:r.extended=r.extended.clone(),r.extended.underlineColor=this._updateAttrColor(r.extended.underlineColor,i[1],i[3],i[4],i[5])}return n}_processUnderline(e,t){t.extended=t.extended.clone(),(!~e||e>5)&&(e=1),t.extended.underlineStyle=e,t.fg|=268435456,0===e&&(t.fg&=-268435457),t.updateExtended()}_processSGR0(e){e.fg=h.DEFAULT_ATTR_DATA.fg,e.bg=h.DEFAULT_ATTR_DATA.bg,e.extended=e.extended.clone(),e.extended.underlineStyle=0,e.extended.underlineColor&=-67108864,e.updateExtended()}charAttributes(e){if(1===e.length&&0===e.params[0])return this._processSGR0(this._curAttrData),!0;const t=e.length;let r;const i=this._curAttrData;for(let s=0;s<t;s++)r=e.params[s],r>=30&&r<=37?(i.fg&=-50331904,i.fg|=16777216|r-30):r>=40&&r<=47?(i.bg&=-50331904,i.bg|=16777216|r-40):r>=90&&r<=97?(i.fg&=-50331904,i.fg|=16777224|r-90):r>=100&&r<=107?(i.bg&=-50331904,i.bg|=16777224|r-100):0===r?this._processSGR0(i):1===r?i.fg|=134217728:3===r?i.bg|=67108864:4===r?(i.fg|=268435456,this._processUnderline(e.hasSubParams(s)?e.getSubParams(s)[0]:1,i)):5===r?i.fg|=536870912:7===r?i.fg|=67108864:8===r?i.fg|=1073741824:9===r?i.fg|=2147483648:2===r?i.bg|=134217728:21===r?this._processUnderline(2,i):22===r?(i.fg&=-134217729,i.bg&=-134217729):23===r?i.bg&=-67108865:24===r?(i.fg&=-268435457,this._processUnderline(0,i)):25===r?i.fg&=-536870913:27===r?i.fg&=-67108865:28===r?i.fg&=-1073741825:29===r?i.fg&=2147483647:39===r?(i.fg&=-67108864,i.fg|=16777215&h.DEFAULT_ATTR_DATA.fg):49===r?(i.bg&=-67108864,i.bg|=16777215&h.DEFAULT_ATTR_DATA.bg):38===r||48===r||58===r?s+=this._extractColor(e,s,i):53===r?i.bg|=1073741824:55===r?i.bg&=-1073741825:59===r?(i.extended=i.extended.clone(),i.extended.underlineColor=-1,i.updateExtended()):100===r?(i.fg&=-67108864,i.fg|=16777215&h.DEFAULT_ATTR_DATA.fg,i.bg&=-67108864,i.bg|=16777215&h.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",r);return!0}deviceStatus(e){switch(e.params[0]){case 5:this._coreService.triggerDataEvent(`${n.C0.ESC}[0n`);break;case 6:const e=this._activeBuffer.y+1,t=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${n.C0.ESC}[${e};${t}R`)}return!0}deviceStatusPrivate(e){if(6===e.params[0]){const e=this._activeBuffer.y+1,t=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${n.C0.ESC}[?${e};${t}R`)}return!0}softReset(e){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=h.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(e){const t=e.params[0]||1;switch(t){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}const r=t%2==1;return this._optionsService.options.cursorBlink=r,!0}setScrollRegion(e){const t=e.params[0]||1;let r;return(e.length<2||(r=e.params[1])>this._bufferService.rows||0===r)&&(r=this._bufferService.rows),r>t&&(this._activeBuffer.scrollTop=t-1,this._activeBuffer.scrollBottom=r-1,this._setCursor(0,0)),!0}windowOptions(e){if(!S(e.params[0],this._optionsService.rawOptions.windowOptions))return!0;const t=e.length>1?e.params[1]:0;switch(e.params[0]){case 14:2!==t&&this._onRequestWindowsOptionsReport.fire(w.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(w.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${n.C0.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:0!==t&&2!==t||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),0!==t&&1!==t||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:0!==t&&2!==t||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),0!==t&&1!==t||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0}saveCursor(e){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(e){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(e){return this._windowTitle=e,this._onTitleChange.fire(e),!0}setIconName(e){return this._iconName=e,!0}setOrReportIndexedColor(e){const t=[],r=e.split(";");for(;r.length>1;){const e=r.shift(),i=r.shift();if(/^\d+$/.exec(e)){const r=parseInt(e);if(E(r))if("?"===i)t.push({type:0,index:r});else{const e=(0,m.parseColor)(i);e&&t.push({type:1,index:r,color:e})}}}return t.length&&this._onColor.fire(t),!0}setHyperlink(e){const t=e.split(";");return!(t.length<2)&&(t[1]?this._createHyperlink(t[0],t[1]):!t[0]&&this._finishHyperlink())}_createHyperlink(e,t){this._getCurrentLinkId()&&this._finishHyperlink();const r=e.split(":");let i;const s=r.findIndex(e=>e.startsWith("id="));return-1!==s&&(i=r[s].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:i,uri:t}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(e,t){const r=e.split(";");for(let i=0;i<r.length&&!(t>=this._specialColors.length);++i,++t)if("?"===r[i])this._onColor.fire([{type:0,index:this._specialColors[t]}]);else{const e=(0,m.parseColor)(r[i]);e&&this._onColor.fire([{type:1,index:this._specialColors[t],color:e}])}return!0}setOrReportFgColor(e){return this._setOrReportSpecialColor(e,0)}setOrReportBgColor(e){return this._setOrReportSpecialColor(e,1)}setOrReportCursorColor(e){return this._setOrReportSpecialColor(e,2)}restoreIndexedColor(e){if(!e)return this._onColor.fire([{type:2}]),!0;const t=[],r=e.split(";");for(let i=0;i<r.length;++i)if(/^\d+$/.exec(r[i])){const e=parseInt(r[i]);E(e)&&t.push({type:2,index:e})}return t.length&&this._onColor.fire(t),!0}restoreFgColor(e){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(e){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(e){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,o.DEFAULT_CHARSET),!0}selectCharset(e){return 2!==e.length?(this.selectDefaultCharset(),!0):("/"===e[0]||this._charsetService.setgCharset(b[e[0]],o.CHARSETS[e[1]]||o.DEFAULT_CHARSET),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){const e=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,e,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=h.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=h.DEFAULT_ATTR_DATA.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal}setgLevel(e){return this._charsetService.setgLevel(e),!0}screenAlignmentPattern(){const e=new f.CellData;e.content=1<<22|"E".charCodeAt(0),e.fg=this._curAttrData.fg,e.bg=this._curAttrData.bg,this._setCursor(0,0);for(let t=0;t<this._bufferService.rows;++t){const r=this._activeBuffer.ybase+this._activeBuffer.y+t,i=this._activeBuffer.lines.get(r);i&&(i.fill(e),i.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(e,t){const r=this._bufferService.buffer,i=this._optionsService.rawOptions;return(e=>(this._coreService.triggerDataEvent(`${n.C0.ESC}${e}${n.C0.ESC}\\`),!0))('"q'===e?`P1$r${this._curAttrData.isProtected()?1:0}"q`:'"p'===e?'P1$r61;1"p':"r"===e?`P1$r${r.scrollTop+1};${r.scrollBottom+1}r`:"m"===e?"P1$r0m":" q"===e?`P1$r${{block:2,underline:4,bar:6}[i.cursorStyle]-(i.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty(e,t){this._dirtyRowTracker.markRangeDirty(e,t)}}t.InputHandler=x;let k=class{constructor(e){this._bufferService=e,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty(e){e<this.start?this.start=e:e>this.end&&(this.end=e)}markRangeDirty(e,t){e>t&&(C=e,e=t,t=C),e<this.start&&(this.start=e),t>this.end&&(this.end=t)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};function E(e){return 0<=e&&e<256}k=i([s(0,_.IBufferService)],k)},844:(e,t)=>{function r(e){for(const t of e)t.dispose();e.length=0}Object.defineProperty(t,"__esModule",{value:!0}),t.getDisposeArrayDisposable=t.disposeArray=t.toDisposable=t.MutableDisposable=t.Disposable=void 0,t.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const e of this._disposables)e.dispose();this._disposables.length=0}register(e){return this._disposables.push(e),e}unregister(e){const t=this._disposables.indexOf(e);-1!==t&&this._disposables.splice(t,1)}},t.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(e){var t;this._isDisposed||e===this._value||(null===(t=this._value)||void 0===t||t.dispose(),this._value=e)}clear(){this.value=void 0}dispose(){var e;this._isDisposed=!0,null===(e=this._value)||void 0===e||e.dispose(),this._value=void 0}},t.toDisposable=function(e){return{dispose:e}},t.disposeArray=r,t.getDisposeArrayDisposable=function(e){return{dispose:()=>r(e)}}},1505:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FourKeyMap=t.TwoKeyMap=void 0;class r{constructor(){this._data={}}set(e,t,r){this._data[e]||(this._data[e]={}),this._data[e][t]=r}get(e,t){return this._data[e]?this._data[e][t]:void 0}clear(){this._data={}}}t.TwoKeyMap=r,t.FourKeyMap=class{constructor(){this._data=new r}set(e,t,i,s,n){this._data.get(e,t)||this._data.set(e,t,new r),this._data.get(e,t).set(i,s,n)}get(e,t,r,i){var s;return null===(s=this._data.get(e,t))||void 0===s?void 0:s.get(r,i)}clear(){this._data.clear()}}},6114:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isChromeOS=t.isLinux=t.isWindows=t.isIphone=t.isIpad=t.isMac=t.getSafariVersion=t.isSafari=t.isLegacyEdge=t.isFirefox=t.isNode=void 0,t.isNode="undefined"==typeof navigator;const r=t.isNode?"node":navigator.userAgent,i=t.isNode?"node":navigator.platform;t.isFirefox=r.includes("Firefox"),t.isLegacyEdge=r.includes("Edge"),t.isSafari=/^((?!chrome|android).)*safari/i.test(r),t.getSafariVersion=function(){if(!t.isSafari)return 0;const e=r.match(/Version\/(\d+)/);return null===e||e.length<2?0:parseInt(e[1])},t.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(i),t.isIpad="iPad"===i,t.isIphone="iPhone"===i,t.isWindows=["Windows","Win16","Win32","WinCE"].includes(i),t.isLinux=i.indexOf("Linux")>=0,t.isChromeOS=/\bCrOS\b/.test(r)},6106:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SortedList=void 0;let r=0;t.SortedList=class{constructor(e){this._getKey=e,this._array=[]}clear(){this._array.length=0}insert(e){0!==this._array.length?(r=this._search(this._getKey(e)),this._array.splice(r,0,e)):this._array.push(e)}delete(e){if(0===this._array.length)return!1;const t=this._getKey(e);if(void 0===t)return!1;if(r=this._search(t),-1===r)return!1;if(this._getKey(this._array[r])!==t)return!1;do{if(this._array[r]===e)return this._array.splice(r,1),!0}while(++r<this._array.length&&this._getKey(this._array[r])===t);return!1}*getKeyIterator(e){if(0!==this._array.length&&(r=this._search(e),!(r<0||r>=this._array.length)&&this._getKey(this._array[r])===e))do{yield this._array[r]}while(++r<this._array.length&&this._getKey(this._array[r])===e)}forEachByKey(e,t){if(0!==this._array.length&&(r=this._search(e),!(r<0||r>=this._array.length)&&this._getKey(this._array[r])===e))do{t(this._array[r])}while(++r<this._array.length&&this._getKey(this._array[r])===e)}values(){return[...this._array].values()}_search(e){let t=0,r=this._array.length-1;for(;r>=t;){let i=t+r>>1;const s=this._getKey(this._array[i]);if(s>e)r=i-1;else{if(!(s<e)){for(;i>0&&this._getKey(this._array[i-1])===e;)i--;return i}t=i+1}}return t}}},7226:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DebouncedIdleTask=t.IdleTaskQueue=t.PriorityTaskQueue=void 0;const i=r(6114);class s{constructor(){this._tasks=[],this._i=0}enqueue(e){this._tasks.push(e),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(e){this._idleCallback=void 0;let t=0,r=0,i=e.timeRemaining(),s=0;for(;this._i<this._tasks.length;){if(t=Date.now(),this._tasks[this._i]()||this._i++,t=Math.max(1,Date.now()-t),r=Math.max(t,r),s=e.timeRemaining(),1.5*r>s)return i-t<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(i-t))}ms`),void this._start();i=s}this.clear()}}class n extends s{_requestCallback(e){return setTimeout(()=>e(this._createDeadline(16)))}_cancelCallback(e){clearTimeout(e)}_createDeadline(e){const t=Date.now()+e;return{timeRemaining:()=>Math.max(0,t-Date.now())}}}t.PriorityTaskQueue=n,t.IdleTaskQueue=!i.isNode&&"requestIdleCallback"in window?class extends s{_requestCallback(e){return requestIdleCallback(e)}_cancelCallback(e){cancelIdleCallback(e)}}:n,t.DebouncedIdleTask=class{constructor(){this._queue=new t.IdleTaskQueue}set(e){this._queue.clear(),this._queue.enqueue(e)}flush(){this._queue.flush()}}},9282:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.updateWindowsModeWrappedState=void 0;const i=r(643);t.updateWindowsModeWrappedState=function(e){const t=e.buffer.lines.get(e.buffer.ybase+e.buffer.y-1),r=null==t?void 0:t.get(e.cols-1),s=e.buffer.lines.get(e.buffer.ybase+e.buffer.y);s&&r&&(s.isWrapped=r[i.CHAR_DATA_CODE_INDEX]!==i.NULL_CELL_CODE&&r[i.CHAR_DATA_CODE_INDEX]!==i.WHITESPACE_CELL_CODE)}},3734:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ExtendedAttrs=t.AttributeData=void 0;class r{constructor(){this.fg=0,this.bg=0,this.extended=new i}static toColorRGB(e){return[e>>>16&255,e>>>8&255,255&e]}static fromColorRGB(e){return(255&e[0])<<16|(255&e[1])<<8|255&e[2]}clone(){const e=new r;return e.fg=this.fg,e.bg=this.bg,e.extended=this.extended.clone(),e}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&0!==this.extended.underlineStyle?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return!(50331648&~this.fg)}isBgRGB(){return!(50331648&~this.bg)}isFgPalette(){return 16777216==(50331648&this.fg)||33554432==(50331648&this.fg)}isBgPalette(){return 16777216==(50331648&this.bg)||33554432==(50331648&this.bg)}isFgDefault(){return!(50331648&this.fg)}isBgDefault(){return!(50331648&this.bg)}isAttributeDefault(){return 0===this.fg&&0===this.bg}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?!(50331648&~this.extended.underlineColor):this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?16777216==(50331648&this.extended.underlineColor)||33554432==(50331648&this.extended.underlineColor):this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?!(50331648&this.extended.underlineColor):this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}}t.AttributeData=r;class i{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(e){this._ext=e}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(e){this._ext&=-469762049,this._ext|=e<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(e){this._ext&=-67108864,this._ext|=67108863&e}get urlId(){return this._urlId}set urlId(e){this._urlId=e}constructor(e=0,t=0){this._ext=0,this._urlId=0,this._ext=e,this._urlId=t}clone(){return new i(this._ext,this._urlId)}isEmpty(){return 0===this.underlineStyle&&0===this._urlId}}t.ExtendedAttrs=i},9092:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Buffer=t.MAX_BUFFER_SIZE=void 0;const i=r(6349),s=r(7226),n=r(3734),o=r(8437),a=r(4634),l=r(511),c=r(643),h=r(4863),u=r(7116);t.MAX_BUFFER_SIZE=4294967295,t.Buffer=class{constructor(e,t,r){this._hasScrollback=e,this._optionsService=t,this._bufferService=r,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=o.DEFAULT_ATTR_DATA.clone(),this.savedCharset=u.DEFAULT_CHARSET,this.markers=[],this._nullCell=l.CellData.fromCharData([0,c.NULL_CELL_CHAR,c.NULL_CELL_WIDTH,c.NULL_CELL_CODE]),this._whitespaceCell=l.CellData.fromCharData([0,c.WHITESPACE_CELL_CHAR,c.WHITESPACE_CELL_WIDTH,c.WHITESPACE_CELL_CODE]),this._isClearing=!1,this._memoryCleanupQueue=new s.IdleTaskQueue,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new i.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(e){return e?(this._nullCell.fg=e.fg,this._nullCell.bg=e.bg,this._nullCell.extended=e.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new n.ExtendedAttrs),this._nullCell}getWhitespaceCell(e){return e?(this._whitespaceCell.fg=e.fg,this._whitespaceCell.bg=e.bg,this._whitespaceCell.extended=e.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new n.ExtendedAttrs),this._whitespaceCell}getBlankLine(e,t){return new o.BufferLine(this._bufferService.cols,this.getNullCell(e),t)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){const e=this.ybase+this.y-this.ydisp;return e>=0&&e<this._rows}_getCorrectBufferLength(e){if(!this._hasScrollback)return e;const r=e+this._optionsService.rawOptions.scrollback;return r>t.MAX_BUFFER_SIZE?t.MAX_BUFFER_SIZE:r}fillViewportRows(e){if(0===this.lines.length){void 0===e&&(e=o.DEFAULT_ATTR_DATA);let t=this._rows;for(;t--;)this.lines.push(this.getBlankLine(e))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new i.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(e,t){const r=this.getNullCell(o.DEFAULT_ATTR_DATA);let i=0;const s=this._getCorrectBufferLength(t);if(s>this.lines.maxLength&&(this.lines.maxLength=s),this.lines.length>0){if(this._cols<e)for(let t=0;t<this.lines.length;t++)i+=+this.lines.get(t).resize(e,r);let n=0;if(this._rows<t)for(let i=this._rows;i<t;i++)this.lines.length<t+this.ybase&&(this._optionsService.rawOptions.windowsMode||void 0!==this._optionsService.rawOptions.windowsPty.backend||void 0!==this._optionsService.rawOptions.windowsPty.buildNumber?this.lines.push(new o.BufferLine(e,r)):this.ybase>0&&this.lines.length<=this.ybase+this.y+n+1?(this.ybase--,n++,this.ydisp>0&&this.ydisp--):this.lines.push(new o.BufferLine(e,r)));else for(let e=this._rows;e>t;e--)this.lines.length>t+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(s<this.lines.maxLength){const e=this.lines.length-s;e>0&&(this.lines.trimStart(e),this.ybase=Math.max(this.ybase-e,0),this.ydisp=Math.max(this.ydisp-e,0),this.savedY=Math.max(this.savedY-e,0)),this.lines.maxLength=s}this.x=Math.min(this.x,e-1),this.y=Math.min(this.y,t-1),n&&(this.y+=n),this.savedX=Math.min(this.savedX,e-1),this.scrollTop=0}if(this.scrollBottom=t-1,this._isReflowEnabled&&(this._reflow(e,t),this._cols>e))for(let n=0;n<this.lines.length;n++)i+=+this.lines.get(n).resize(e,r);this._cols=e,this._rows=t,this._memoryCleanupQueue.clear(),i>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue(()=>this._batchedMemoryCleanup()))}_batchedMemoryCleanup(){let e=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,e=!1);let t=0;for(;this._memoryCleanupPosition<this.lines.length;)if(t+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),t>100)return!0;return e}get _isReflowEnabled(){const e=this._optionsService.rawOptions.windowsPty;return e&&e.buildNumber?this._hasScrollback&&"conpty"===e.backend&&e.buildNumber>=21376:this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(e,t){this._cols!==e&&(e>this._cols?this._reflowLarger(e,t):this._reflowSmaller(e,t))}_reflowLarger(e,t){const r=(0,a.reflowLargerGetLinesToRemove)(this.lines,this._cols,e,this.ybase+this.y,this.getNullCell(o.DEFAULT_ATTR_DATA));if(r.length>0){const i=(0,a.reflowLargerCreateNewLayout)(this.lines,r);(0,a.reflowLargerApplyNewLayout)(this.lines,i.layout),this._reflowLargerAdjustViewport(e,t,i.countRemoved)}}_reflowLargerAdjustViewport(e,t,r){const i=this.getNullCell(o.DEFAULT_ATTR_DATA);let s=r;for(;s-- >0;)0===this.ybase?(this.y>0&&this.y--,this.lines.length<t&&this.lines.push(new o.BufferLine(e,i))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-r,0)}_reflowSmaller(e,t){const r=this.getNullCell(o.DEFAULT_ATTR_DATA),i=[];let s=0;for(let n=this.lines.length-1;n>=0;n--){let l=this.lines.get(n);if(!l||!l.isWrapped&&l.getTrimmedLength()<=e)continue;const c=[l];for(;l.isWrapped&&n>0;)l=this.lines.get(--n),c.unshift(l);const h=this.ybase+this.y;if(h>=n&&h<n+c.length)continue;const u=c[c.length-1].getTrimmedLength(),d=(0,a.reflowSmallerGetNewLineLengths)(c,this._cols,e),f=d.length-c.length;let p;p=0===this.ybase&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+f):Math.max(0,this.lines.length-this.lines.maxLength+f);const _=[];for(let e=0;e<f;e++){const e=this.getBlankLine(o.DEFAULT_ATTR_DATA,!0);_.push(e)}_.length>0&&(i.push({start:n+c.length+s,newLines:_}),s+=_.length),c.push(..._);let v=d.length-1,g=d[v];0===g&&(v--,g=d[v]);let m=c.length-f-1,b=u;for(;m>=0;){const e=Math.min(b,g);if(void 0===c[v])break;if(c[v].copyCellsFrom(c[m],b-e,g-e,e,!0),g-=e,0===g&&(v--,g=d[v]),b-=e,0===b){m--;const e=Math.max(m,0);b=(0,a.getWrappedLineTrimmedLength)(c,e,this._cols)}}for(let t=0;t<c.length;t++)d[t]<e&&c[t].setCell(d[t],r);let y=f-p;for(;y-- >0;)0===this.ybase?this.y<t-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+s)-t&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+f,this.ybase+t-1)}if(i.length>0){const e=[],t=[];for(let i=0;i<this.lines.length;i++)t.push(this.lines.get(i));const r=this.lines.length;let n=r-1,o=0,a=i[o];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+s);let l=0;for(let u=Math.min(this.lines.maxLength-1,r+s-1);u>=0;u--)if(a&&a.start>n+l){for(let e=a.newLines.length-1;e>=0;e--)this.lines.set(u--,a.newLines[e]);u++,e.push({index:n+1,amount:a.newLines.length}),l+=a.newLines.length,a=i[++o]}else this.lines.set(u,t[n--]);let c=0;for(let i=e.length-1;i>=0;i--)e[i].index+=c,this.lines.onInsertEmitter.fire(e[i]),c+=e[i].amount;const h=Math.max(0,r+s-this.lines.maxLength);h>0&&this.lines.onTrimEmitter.fire(h)}}translateBufferLineToString(e,t,r=0,i){const s=this.lines.get(e);return s?s.translateToString(t,r,i):""}getWrappedRangeForLine(e){let t=e,r=e;for(;t>0&&this.lines.get(t).isWrapped;)t--;for(;r+1<this.lines.length&&this.lines.get(r+1).isWrapped;)r++;return{first:t,last:r}}setupTabStops(e){for(null!=e?this.tabs[e]||(e=this.prevStop(e)):(this.tabs={},e=0);e<this._cols;e+=this._optionsService.rawOptions.tabStopWidth)this.tabs[e]=!0}prevStop(e){for(null==e&&(e=this.x);!this.tabs[--e]&&e>0;);return e>=this._cols?this._cols-1:e<0?0:e}nextStop(e){for(null==e&&(e=this.x);!this.tabs[++e]&&e<this._cols;);return e>=this._cols?this._cols-1:e<0?0:e}clearMarkers(e){this._isClearing=!0;for(let t=0;t<this.markers.length;t++)this.markers[t].line===e&&(this.markers[t].dispose(),this.markers.splice(t--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let e=0;e<this.markers.length;e++)this.markers[e].dispose(),this.markers.splice(e--,1);this._isClearing=!1}addMarker(e){const t=new h.Marker(e);return this.markers.push(t),t.register(this.lines.onTrim(e=>{t.line-=e,t.line<0&&t.dispose()})),t.register(this.lines.onInsert(e=>{t.line>=e.index&&(t.line+=e.amount)})),t.register(this.lines.onDelete(e=>{t.line>=e.index&&t.line<e.index+e.amount&&t.dispose(),t.line>e.index&&(t.line-=e.amount)})),t.register(t.onDispose(()=>this._removeMarker(t))),t}_removeMarker(e){this._isClearing||this.markers.splice(this.markers.indexOf(e),1)}}},8437:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BufferLine=t.DEFAULT_ATTR_DATA=void 0;const i=r(3734),s=r(511),n=r(643),o=r(482);t.DEFAULT_ATTR_DATA=Object.freeze(new i.AttributeData);let a=0;class l{constructor(e,t,r=!1){this.isWrapped=r,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*e);const i=t||s.CellData.fromCharData([0,n.NULL_CELL_CHAR,n.NULL_CELL_WIDTH,n.NULL_CELL_CODE]);for(let s=0;s<e;++s)this.setCell(s,i);this.length=e}get(e){const t=this._data[3*e+0],r=2097151&t;return[this._data[3*e+1],2097152&t?this._combined[e]:r?(0,o.stringFromCodePoint)(r):"",t>>22,2097152&t?this._combined[e].charCodeAt(this._combined[e].length-1):r]}set(e,t){this._data[3*e+1]=t[n.CHAR_DATA_ATTR_INDEX],t[n.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[e]=t[1],this._data[3*e+0]=2097152|e|t[n.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*e+0]=t[n.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|t[n.CHAR_DATA_WIDTH_INDEX]<<22}getWidth(e){return this._data[3*e+0]>>22}hasWidth(e){return 12582912&this._data[3*e+0]}getFg(e){return this._data[3*e+1]}getBg(e){return this._data[3*e+2]}hasContent(e){return 4194303&this._data[3*e+0]}getCodePoint(e){const t=this._data[3*e+0];return 2097152&t?this._combined[e].charCodeAt(this._combined[e].length-1):2097151&t}isCombined(e){return 2097152&this._data[3*e+0]}getString(e){const t=this._data[3*e+0];return 2097152&t?this._combined[e]:2097151&t?(0,o.stringFromCodePoint)(2097151&t):""}isProtected(e){return 536870912&this._data[3*e+2]}loadCell(e,t){return a=3*e,t.content=this._data[a+0],t.fg=this._data[a+1],t.bg=this._data[a+2],2097152&t.content&&(t.combinedData=this._combined[e]),268435456&t.bg&&(t.extended=this._extendedAttrs[e]),t}setCell(e,t){2097152&t.content&&(this._combined[e]=t.combinedData),268435456&t.bg&&(this._extendedAttrs[e]=t.extended),this._data[3*e+0]=t.content,this._data[3*e+1]=t.fg,this._data[3*e+2]=t.bg}setCellFromCodePoint(e,t,r,i,s,n){268435456&s&&(this._extendedAttrs[e]=n),this._data[3*e+0]=t|r<<22,this._data[3*e+1]=i,this._data[3*e+2]=s}addCodepointToCell(e,t){let r=this._data[3*e+0];2097152&r?this._combined[e]+=(0,o.stringFromCodePoint)(t):(2097151&r?(this._combined[e]=(0,o.stringFromCodePoint)(2097151&r)+(0,o.stringFromCodePoint)(t),r&=-2097152,r|=2097152):r=t|1<<22,this._data[3*e+0]=r)}insertCells(e,t,r,n){if((e%=this.length)&&2===this.getWidth(e-1)&&this.setCellFromCodePoint(e-1,0,1,(null==n?void 0:n.fg)||0,(null==n?void 0:n.bg)||0,(null==n?void 0:n.extended)||new i.ExtendedAttrs),t<this.length-e){const i=new s.CellData;for(let r=this.length-e-t-1;r>=0;--r)this.setCell(e+t+r,this.loadCell(e+r,i));for(let s=0;s<t;++s)this.setCell(e+s,r)}else for(let i=e;i<this.length;++i)this.setCell(i,r);2===this.getWidth(this.length-1)&&this.setCellFromCodePoint(this.length-1,0,1,(null==n?void 0:n.fg)||0,(null==n?void 0:n.bg)||0,(null==n?void 0:n.extended)||new i.ExtendedAttrs)}deleteCells(e,t,r,n){if(e%=this.length,t<this.length-e){const i=new s.CellData;for(let r=0;r<this.length-e-t;++r)this.setCell(e+r,this.loadCell(e+t+r,i));for(let e=this.length-t;e<this.length;++e)this.setCell(e,r)}else for(let i=e;i<this.length;++i)this.setCell(i,r);e&&2===this.getWidth(e-1)&&this.setCellFromCodePoint(e-1,0,1,(null==n?void 0:n.fg)||0,(null==n?void 0:n.bg)||0,(null==n?void 0:n.extended)||new i.ExtendedAttrs),0!==this.getWidth(e)||this.hasContent(e)||this.setCellFromCodePoint(e,0,1,(null==n?void 0:n.fg)||0,(null==n?void 0:n.bg)||0,(null==n?void 0:n.extended)||new i.ExtendedAttrs)}replaceCells(e,t,r,s,n=!1){if(n)for(e&&2===this.getWidth(e-1)&&!this.isProtected(e-1)&&this.setCellFromCodePoint(e-1,0,1,(null==s?void 0:s.fg)||0,(null==s?void 0:s.bg)||0,(null==s?void 0:s.extended)||new i.ExtendedAttrs),t<this.length&&2===this.getWidth(t-1)&&!this.isProtected(t)&&this.setCellFromCodePoint(t,0,1,(null==s?void 0:s.fg)||0,(null==s?void 0:s.bg)||0,(null==s?void 0:s.extended)||new i.ExtendedAttrs);e<t&&e<this.length;)this.isProtected(e)||this.setCell(e,r),e++;else for(e&&2===this.getWidth(e-1)&&this.setCellFromCodePoint(e-1,0,1,(null==s?void 0:s.fg)||0,(null==s?void 0:s.bg)||0,(null==s?void 0:s.extended)||new i.ExtendedAttrs),t<this.length&&2===this.getWidth(t-1)&&this.setCellFromCodePoint(t,0,1,(null==s?void 0:s.fg)||0,(null==s?void 0:s.bg)||0,(null==s?void 0:s.extended)||new i.ExtendedAttrs);e<t&&e<this.length;)this.setCell(e++,r)}resize(e,t){if(e===this.length)return 4*this._data.length*2<this._data.buffer.byteLength;const r=3*e;if(e>this.length){if(this._data.buffer.byteLength>=4*r)this._data=new Uint32Array(this._data.buffer,0,r);else{const e=new Uint32Array(r);e.set(this._data),this._data=e}for(let r=this.length;r<e;++r)this.setCell(r,t)}else{this._data=this._data.subarray(0,r);const t=Object.keys(this._combined);for(let r=0;r<t.length;r++){const i=parseInt(t[r],10);i>=e&&delete this._combined[i]}const i=Object.keys(this._extendedAttrs);for(let r=0;r<i.length;r++){const t=parseInt(i[r],10);t>=e&&delete this._extendedAttrs[t]}}return this.length=e,4*r*2<this._data.buffer.byteLength}cleanupMemory(){if(4*this._data.length*2<this._data.buffer.byteLength){const e=new Uint32Array(this._data.length);return e.set(this._data),this._data=e,1}return 0}fill(e,t=!1){if(t)for(let r=0;r<this.length;++r)this.isProtected(r)||this.setCell(r,e);else{this._combined={},this._extendedAttrs={};for(let t=0;t<this.length;++t)this.setCell(t,e)}}copyFrom(e){this.length!==e.length?this._data=new Uint32Array(e._data):this._data.set(e._data),this.length=e.length,this._combined={};for(const t in e._combined)this._combined[t]=e._combined[t];this._extendedAttrs={};for(const t in e._extendedAttrs)this._extendedAttrs[t]=e._extendedAttrs[t];this.isWrapped=e.isWrapped}clone(){const e=new l(0);e._data=new Uint32Array(this._data),e.length=this.length;for(const t in this._combined)e._combined[t]=this._combined[t];for(const t in this._extendedAttrs)e._extendedAttrs[t]=this._extendedAttrs[t];return e.isWrapped=this.isWrapped,e}getTrimmedLength(){for(let e=this.length-1;e>=0;--e)if(4194303&this._data[3*e+0])return e+(this._data[3*e+0]>>22);return 0}getNoBgTrimmedLength(){for(let e=this.length-1;e>=0;--e)if(4194303&this._data[3*e+0]||50331648&this._data[3*e+2])return e+(this._data[3*e+0]>>22);return 0}copyCellsFrom(e,t,r,i,s){const n=e._data;if(s)for(let a=i-1;a>=0;a--){for(let e=0;e<3;e++)this._data[3*(r+a)+e]=n[3*(t+a)+e];268435456&n[3*(t+a)+2]&&(this._extendedAttrs[r+a]=e._extendedAttrs[t+a])}else for(let a=0;a<i;a++){for(let e=0;e<3;e++)this._data[3*(r+a)+e]=n[3*(t+a)+e];268435456&n[3*(t+a)+2]&&(this._extendedAttrs[r+a]=e._extendedAttrs[t+a])}const o=Object.keys(e._combined);for(let a=0;a<o.length;a++){const i=parseInt(o[a],10);i>=t&&(this._combined[i-t+r]=e._combined[i])}}translateToString(e=!1,t=0,r=this.length){e&&(r=Math.min(r,this.getTrimmedLength()));let i="";for(;t<r;){const e=this._data[3*t+0],r=2097151&e;i+=2097152&e?this._combined[t]:r?(0,o.stringFromCodePoint)(r):n.WHITESPACE_CELL_CHAR,t+=e>>22||1}return i}}t.BufferLine=l},4841:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getRangeLength=void 0,t.getRangeLength=function(e,t){if(e.start.y>e.end.y)throw new Error(`Buffer range end (${e.end.x}, ${e.end.y}) cannot be before start (${e.start.x}, ${e.start.y})`);return t*(e.end.y-e.start.y)+(e.end.x-e.start.x+1)}},4634:(e,t)=>{function r(e,t,r){if(t===e.length-1)return e[t].getTrimmedLength();const i=!e[t].hasContent(r-1)&&1===e[t].getWidth(r-1),s=2===e[t+1].getWidth(0);return i&&s?r-1:r}Object.defineProperty(t,"__esModule",{value:!0}),t.getWrappedLineTrimmedLength=t.reflowSmallerGetNewLineLengths=t.reflowLargerApplyNewLayout=t.reflowLargerCreateNewLayout=t.reflowLargerGetLinesToRemove=void 0,t.reflowLargerGetLinesToRemove=function(e,t,i,s,n){const o=[];for(let a=0;a<e.length-1;a++){let l=a,c=e.get(++l);if(!c.isWrapped)continue;const h=[e.get(a)];for(;l<e.length&&c.isWrapped;)h.push(c),c=e.get(++l);if(s>=a&&s<l){a+=h.length-1;continue}let u=0,d=r(h,u,t),f=1,p=0;for(;f<h.length;){const e=r(h,f,t),s=e-p,o=i-d,a=Math.min(s,o);h[u].copyCellsFrom(h[f],p,d,a,!1),d+=a,d===i&&(u++,d=0),p+=a,p===e&&(f++,p=0),0===d&&0!==u&&2===h[u-1].getWidth(i-1)&&(h[u].copyCellsFrom(h[u-1],i-1,d++,1,!1),h[u-1].setCell(i-1,n))}h[u].replaceCells(d,i,n);let _=0;for(let e=h.length-1;e>0&&(e>u||0===h[e].getTrimmedLength());e--)_++;_>0&&(o.push(a+h.length-_),o.push(_)),a+=h.length-1}return o},t.reflowLargerCreateNewLayout=function(e,t){const r=[];let i=0,s=t[i],n=0;for(let o=0;o<e.length;o++)if(s===o){const r=t[++i];e.onDeleteEmitter.fire({index:o-n,amount:r}),o+=r-1,n+=r,s=t[++i]}else r.push(o);return{layout:r,countRemoved:n}},t.reflowLargerApplyNewLayout=function(e,t){const r=[];for(let i=0;i<t.length;i++)r.push(e.get(t[i]));for(let i=0;i<r.length;i++)e.set(i,r[i]);e.length=t.length},t.reflowSmallerGetNewLineLengths=function(e,t,i){const s=[],n=e.map((i,s)=>r(e,s,t)).reduce((e,t)=>e+t);let o=0,a=0,l=0;for(;l<n;){if(n-l<i){s.push(n-l);break}o+=i;const c=r(e,a,t);o>c&&(o-=c,a++);const h=2===e[a].getWidth(o-1);h&&o--;const u=h?i-1:i;s.push(u),l+=u}return s},t.getWrappedLineTrimmedLength=r},5295:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BufferSet=void 0;const i=r(8460),s=r(844),n=r(9092);class o extends s.Disposable{constructor(e,t){super(),this._optionsService=e,this._bufferService=t,this._onBufferActivate=this.register(new i.EventEmitter),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.resize(this._bufferService.cols,this._bufferService.rows))),this.register(this._optionsService.onSpecificOptionChange("tabStopWidth",()=>this.setupTabStops()))}reset(){this._normal=new n.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new n.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(e){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(e),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(e,t){this._normal.resize(e,t),this._alt.resize(e,t),this.setupTabStops(e)}setupTabStops(e){this._normal.setupTabStops(e),this._alt.setupTabStops(e)}}t.BufferSet=o},511:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CellData=void 0;const i=r(482),s=r(643),n=r(3734);class o extends n.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new n.ExtendedAttrs,this.combinedData=""}static fromCharData(e){const t=new o;return t.setFromCharData(e),t}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,i.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(e){this.fg=e[s.CHAR_DATA_ATTR_INDEX],this.bg=0;let t=!1;if(e[s.CHAR_DATA_CHAR_INDEX].length>2)t=!0;else if(2===e[s.CHAR_DATA_CHAR_INDEX].length){const r=e[s.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=r&&r<=56319){const i=e[s.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=i&&i<=57343?this.content=1024*(r-55296)+i-56320+65536|e[s.CHAR_DATA_WIDTH_INDEX]<<22:t=!0}else t=!0}else this.content=e[s.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|e[s.CHAR_DATA_WIDTH_INDEX]<<22;t&&(this.combinedData=e[s.CHAR_DATA_CHAR_INDEX],this.content=2097152|e[s.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}t.CellData=o},643:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.WHITESPACE_CELL_CODE=t.WHITESPACE_CELL_WIDTH=t.WHITESPACE_CELL_CHAR=t.NULL_CELL_CODE=t.NULL_CELL_WIDTH=t.NULL_CELL_CHAR=t.CHAR_DATA_CODE_INDEX=t.CHAR_DATA_WIDTH_INDEX=t.CHAR_DATA_CHAR_INDEX=t.CHAR_DATA_ATTR_INDEX=t.DEFAULT_EXT=t.DEFAULT_ATTR=t.DEFAULT_COLOR=void 0,t.DEFAULT_COLOR=0,t.DEFAULT_ATTR=256|t.DEFAULT_COLOR<<9,t.DEFAULT_EXT=0,t.CHAR_DATA_ATTR_INDEX=0,t.CHAR_DATA_CHAR_INDEX=1,t.CHAR_DATA_WIDTH_INDEX=2,t.CHAR_DATA_CODE_INDEX=3,t.NULL_CELL_CHAR="",t.NULL_CELL_WIDTH=1,t.NULL_CELL_CODE=0,t.WHITESPACE_CELL_CHAR=" ",t.WHITESPACE_CELL_WIDTH=1,t.WHITESPACE_CELL_CODE=32},4863:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Marker=void 0;const i=r(8460),s=r(844);class n{get id(){return this._id}constructor(e){this.line=e,this.isDisposed=!1,this._disposables=[],this._id=n._nextId++,this._onDispose=this.register(new i.EventEmitter),this.onDispose=this._onDispose.event}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),(0,s.disposeArray)(this._disposables),this._disposables.length=0)}register(e){return this._disposables.push(e),e}}t.Marker=n,n._nextId=1},7116:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_CHARSET=t.CHARSETS=void 0,t.CHARSETS={},t.DEFAULT_CHARSET=t.CHARSETS.B,t.CHARSETS[0]={"`":"",a:"",b:"",c:"",d:"",e:"",f:"",g:"",h:"",i:"",j:"",k:"",l:"",m:"",n:"",o:"",p:"",q:"",r:"",s:"",t:"",u:"",v:"",w:"",x:"",y:"",z:"","{":"","|":"","}":"","~":""},t.CHARSETS.A={"#":""},t.CHARSETS.B=void 0,t.CHARSETS[4]={"#":"","@":"","[":"ij","\\":"","]":"|","{":"","|":"f","}":"","~":""},t.CHARSETS.C=t.CHARSETS[5]={"[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},t.CHARSETS.R={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""},t.CHARSETS.Q={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},t.CHARSETS.K={"@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""},t.CHARSETS.Y={"#":"","@":"","[":"","\\":"","]":"","`":"","{":"","|":"","}":"","~":""},t.CHARSETS.E=t.CHARSETS[6]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},t.CHARSETS.Z={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":""},t.CHARSETS.H=t.CHARSETS[7]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},t.CHARSETS["="]={"#":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":""}},2584:(e,t)=>{var r,i,s;Object.defineProperty(t,"__esModule",{value:!0}),t.C1_ESCAPED=t.C1=t.C0=void 0,function(e){e.NUL="\0",e.SOH="",e.STX="",e.ETX="",e.EOT="",e.ENQ="",e.ACK="",e.BEL="",e.BS="\b",e.HT="\t",e.LF="\n",e.VT="\v",e.FF="\f",e.CR="\r",e.SO="",e.SI="",e.DLE="",e.DC1="",e.DC2="",e.DC3="",e.DC4="",e.NAK="",e.SYN="",e.ETB="",e.CAN="",e.EM="",e.SUB="",e.ESC="",e.FS="",e.GS="",e.RS="",e.US="",e.SP=" ",e.DEL=""}(r||(t.C0=r={})),function(e){e.PAD="",e.HOP="",e.BPH="",e.NBH="",e.IND="",e.NEL="",e.SSA="",e.ESA="",e.HTS="",e.HTJ="",e.VTS="",e.PLD="",e.PLU="",e.RI="",e.SS2="",e.SS3="",e.DCS="",e.PU1="",e.PU2="",e.STS="",e.CCH="",e.MW="",e.SPA="",e.EPA="",e.SOS="",e.SGCI="",e.SCI="",e.CSI="",e.ST="",e.OSC="",e.PM="",e.APC=""}(i||(t.C1=i={})),function(e){e.ST=`${r.ESC}\\`}(s||(t.C1_ESCAPED=s={}))},7399:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.evaluateKeyboardEvent=void 0;const i=r(2584),s={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};t.evaluateKeyboardEvent=function(e,t,r,n){const o={type:0,cancel:!1,key:void 0},a=(e.shiftKey?1:0)|(e.altKey?2:0)|(e.ctrlKey?4:0)|(e.metaKey?8:0);switch(e.keyCode){case 0:"UIKeyInputUpArrow"===e.key?o.key=t?i.C0.ESC+"OA":i.C0.ESC+"[A":"UIKeyInputLeftArrow"===e.key?o.key=t?i.C0.ESC+"OD":i.C0.ESC+"[D":"UIKeyInputRightArrow"===e.key?o.key=t?i.C0.ESC+"OC":i.C0.ESC+"[C":"UIKeyInputDownArrow"===e.key&&(o.key=t?i.C0.ESC+"OB":i.C0.ESC+"[B");break;case 8:if(e.altKey){o.key=i.C0.ESC+i.C0.DEL;break}o.key=i.C0.DEL;break;case 9:if(e.shiftKey){o.key=i.C0.ESC+"[Z";break}o.key=i.C0.HT,o.cancel=!0;break;case 13:o.key=e.altKey?i.C0.ESC+i.C0.CR:i.C0.CR,o.cancel=!0;break;case 27:o.key=i.C0.ESC,e.altKey&&(o.key=i.C0.ESC+i.C0.ESC),o.cancel=!0;break;case 37:if(e.metaKey)break;a?(o.key=i.C0.ESC+"[1;"+(a+1)+"D",o.key===i.C0.ESC+"[1;3D"&&(o.key=i.C0.ESC+(r?"b":"[1;5D"))):o.key=t?i.C0.ESC+"OD":i.C0.ESC+"[D";break;case 39:if(e.metaKey)break;a?(o.key=i.C0.ESC+"[1;"+(a+1)+"C",o.key===i.C0.ESC+"[1;3C"&&(o.key=i.C0.ESC+(r?"f":"[1;5C"))):o.key=t?i.C0.ESC+"OC":i.C0.ESC+"[C";break;case 38:if(e.metaKey)break;a?(o.key=i.C0.ESC+"[1;"+(a+1)+"A",r||o.key!==i.C0.ESC+"[1;3A"||(o.key=i.C0.ESC+"[1;5A")):o.key=t?i.C0.ESC+"OA":i.C0.ESC+"[A";break;case 40:if(e.metaKey)break;a?(o.key=i.C0.ESC+"[1;"+(a+1)+"B",r||o.key!==i.C0.ESC+"[1;3B"||(o.key=i.C0.ESC+"[1;5B")):o.key=t?i.C0.ESC+"OB":i.C0.ESC+"[B";break;case 45:e.shiftKey||e.ctrlKey||(o.key=i.C0.ESC+"[2~");break;case 46:o.key=a?i.C0.ESC+"[3;"+(a+1)+"~":i.C0.ESC+"[3~";break;case 36:o.key=a?i.C0.ESC+"[1;"+(a+1)+"H":t?i.C0.ESC+"OH":i.C0.ESC+"[H";break;case 35:o.key=a?i.C0.ESC+"[1;"+(a+1)+"F":t?i.C0.ESC+"OF":i.C0.ESC+"[F";break;case 33:e.shiftKey?o.type=2:e.ctrlKey?o.key=i.C0.ESC+"[5;"+(a+1)+"~":o.key=i.C0.ESC+"[5~";break;case 34:e.shiftKey?o.type=3:e.ctrlKey?o.key=i.C0.ESC+"[6;"+(a+1)+"~":o.key=i.C0.ESC+"[6~";break;case 112:o.key=a?i.C0.ESC+"[1;"+(a+1)+"P":i.C0.ESC+"OP";break;case 113:o.key=a?i.C0.ESC+"[1;"+(a+1)+"Q":i.C0.ESC+"OQ";break;case 114:o.key=a?i.C0.ESC+"[1;"+(a+1)+"R":i.C0.ESC+"OR";break;case 115:o.key=a?i.C0.ESC+"[1;"+(a+1)+"S":i.C0.ESC+"OS";break;case 116:o.key=a?i.C0.ESC+"[15;"+(a+1)+"~":i.C0.ESC+"[15~";break;case 117:o.key=a?i.C0.ESC+"[17;"+(a+1)+"~":i.C0.ESC+"[17~";break;case 118:o.key=a?i.C0.ESC+"[18;"+(a+1)+"~":i.C0.ESC+"[18~";break;case 119:o.key=a?i.C0.ESC+"[19;"+(a+1)+"~":i.C0.ESC+"[19~";break;case 120:o.key=a?i.C0.ESC+"[20;"+(a+1)+"~":i.C0.ESC+"[20~";break;case 121:o.key=a?i.C0.ESC+"[21;"+(a+1)+"~":i.C0.ESC+"[21~";break;case 122:o.key=a?i.C0.ESC+"[23;"+(a+1)+"~":i.C0.ESC+"[23~";break;case 123:o.key=a?i.C0.ESC+"[24;"+(a+1)+"~":i.C0.ESC+"[24~";break;default:if(!e.ctrlKey||e.shiftKey||e.altKey||e.metaKey)if(r&&!n||!e.altKey||e.metaKey)!r||e.altKey||e.ctrlKey||e.shiftKey||!e.metaKey?e.key&&!e.ctrlKey&&!e.altKey&&!e.metaKey&&e.keyCode>=48&&1===e.key.length?o.key=e.key:e.key&&e.ctrlKey&&("_"===e.key&&(o.key=i.C0.US),"@"===e.key&&(o.key=i.C0.NUL)):65===e.keyCode&&(o.type=1);else{const t=s[e.keyCode],r=null==t?void 0:t[e.shiftKey?1:0];if(r)o.key=i.C0.ESC+r;else if(e.keyCode>=65&&e.keyCode<=90){const t=e.ctrlKey?e.keyCode-64:e.keyCode+32;let r=String.fromCharCode(t);e.shiftKey&&(r=r.toUpperCase()),o.key=i.C0.ESC+r}else if(32===e.keyCode)o.key=i.C0.ESC+(e.ctrlKey?i.C0.NUL:" ");else if("Dead"===e.key&&e.code.startsWith("Key")){let t=e.code.slice(3,4);e.shiftKey||(t=t.toLowerCase()),o.key=i.C0.ESC+t,o.cancel=!0}}else e.keyCode>=65&&e.keyCode<=90?o.key=String.fromCharCode(e.keyCode-64):32===e.keyCode?o.key=i.C0.NUL:e.keyCode>=51&&e.keyCode<=55?o.key=String.fromCharCode(e.keyCode-51+27):56===e.keyCode?o.key=i.C0.DEL:219===e.keyCode?o.key=i.C0.ESC:220===e.keyCode?o.key=i.C0.FS:221===e.keyCode&&(o.key=i.C0.GS)}return o}},482:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Utf8ToUtf32=t.StringToUtf32=t.utf32ToString=t.stringFromCodePoint=void 0,t.stringFromCodePoint=function(e){return e>65535?(e-=65536,String.fromCharCode(55296+(e>>10))+String.fromCharCode(e%1024+56320)):String.fromCharCode(e)},t.utf32ToString=function(e,t=0,r=e.length){let i="";for(let s=t;s<r;++s){let t=e[s];t>65535?(t-=65536,i+=String.fromCharCode(55296+(t>>10))+String.fromCharCode(t%1024+56320)):i+=String.fromCharCode(t)}return i},t.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(e,t){const r=e.length;if(!r)return 0;let i=0,s=0;if(this._interim){const r=e.charCodeAt(s++);56320<=r&&r<=57343?t[i++]=1024*(this._interim-55296)+r-56320+65536:(t[i++]=this._interim,t[i++]=r),this._interim=0}for(let n=s;n<r;++n){const s=e.charCodeAt(n);if(55296<=s&&s<=56319){if(++n>=r)return this._interim=s,i;const o=e.charCodeAt(n);56320<=o&&o<=57343?t[i++]=1024*(s-55296)+o-56320+65536:(t[i++]=s,t[i++]=o)}else 65279!==s&&(t[i++]=s)}return i}},t.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(e,t){const r=e.length;if(!r)return 0;let i,s,n,o,a=0,l=0,c=0;if(this.interim[0]){let i=!1,s=this.interim[0];s&=192==(224&s)?31:224==(240&s)?15:7;let n,o=0;for(;(n=63&this.interim[++o])&&o<4;)s<<=6,s|=n;const l=192==(224&this.interim[0])?2:224==(240&this.interim[0])?3:4,h=l-o;for(;c<h;){if(c>=r)return 0;if(n=e[c++],128!=(192&n)){c--,i=!0;break}this.interim[o++]=n,s<<=6,s|=63&n}i||(2===l?s<128?c--:t[a++]=s:3===l?s<2048||s>=55296&&s<=57343||65279===s||(t[a++]=s):s<65536||s>1114111||(t[a++]=s)),this.interim.fill(0)}const h=r-4;let u=c;for(;u<r;){for(;!(!(u<h)||128&(i=e[u])||128&(s=e[u+1])||128&(n=e[u+2])||128&(o=e[u+3]));)t[a++]=i,t[a++]=s,t[a++]=n,t[a++]=o,u+=4;if(i=e[u++],i<128)t[a++]=i;else if(192==(224&i)){if(u>=r)return this.interim[0]=i,a;if(s=e[u++],128!=(192&s)){u--;continue}if(l=(31&i)<<6|63&s,l<128){u--;continue}t[a++]=l}else if(224==(240&i)){if(u>=r)return this.interim[0]=i,a;if(s=e[u++],128!=(192&s)){u--;continue}if(u>=r)return this.interim[0]=i,this.interim[1]=s,a;if(n=e[u++],128!=(192&n)){u--;continue}if(l=(15&i)<<12|(63&s)<<6|63&n,l<2048||l>=55296&&l<=57343||65279===l)continue;t[a++]=l}else if(240==(248&i)){if(u>=r)return this.interim[0]=i,a;if(s=e[u++],128!=(192&s)){u--;continue}if(u>=r)return this.interim[0]=i,this.interim[1]=s,a;if(n=e[u++],128!=(192&n)){u--;continue}if(u>=r)return this.interim[0]=i,this.interim[1]=s,this.interim[2]=n,a;if(o=e[u++],128!=(192&o)){u--;continue}if(l=(7&i)<<18|(63&s)<<12|(63&n)<<6|63&o,l<65536||l>1114111)continue;t[a++]=l}}return a}}},225:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.UnicodeV6=void 0;const r=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],i=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]];let s;t.UnicodeV6=class{constructor(){if(this.version="6",!s){s=new Uint8Array(65536),s.fill(1),s[0]=0,s.fill(0,1,32),s.fill(0,127,160),s.fill(2,4352,4448),s[9001]=2,s[9002]=2,s.fill(2,11904,42192),s[12351]=1,s.fill(2,44032,55204),s.fill(2,63744,64256),s.fill(2,65040,65050),s.fill(2,65072,65136),s.fill(2,65280,65377),s.fill(2,65504,65511);for(let e=0;e<r.length;++e)s.fill(0,r[e][0],r[e][1]+1)}}wcwidth(e){return e<32?0:e<127?1:e<65536?s[e]:function(e,t){let r,i=0,s=t.length-1;if(e<t[0][0]||e>t[s][1])return!1;for(;s>=i;)if(r=i+s>>1,e>t[r][1])i=r+1;else{if(!(e<t[r][0]))return!0;s=r-1}return!1}(e,i)?0:e>=131072&&e<=196605||e>=196608&&e<=262141?2:1}}},5981:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.WriteBuffer=void 0;const i=r(8460),s=r(844);class n extends s.Disposable{constructor(e){super(),this._action=e,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this.register(new i.EventEmitter),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(e,t){if(void 0!==t&&this._syncCalls>t)return void(this._syncCalls=0);if(this._pendingData+=e.length,this._writeBuffer.push(e),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;let r;for(this._isSyncWriting=!0;r=this._writeBuffer.shift();){this._action(r);const e=this._callbacks.shift();e&&e()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(e,t){if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput)return this._didUserInput=!1,this._pendingData+=e.length,this._writeBuffer.push(e),this._callbacks.push(t),void this._innerWrite();setTimeout(()=>this._innerWrite())}this._pendingData+=e.length,this._writeBuffer.push(e),this._callbacks.push(t)}_innerWrite(e=0,t=!0){const r=e||Date.now();for(;this._writeBuffer.length>this._bufferOffset;){const e=this._writeBuffer[this._bufferOffset],i=this._action(e,t);if(i){const e=e=>Date.now()-r>=12?setTimeout(()=>this._innerWrite(0,e)):this._innerWrite(r,e);return void i.catch(e=>(queueMicrotask(()=>{throw e}),Promise.resolve(!1))).then(e)}const s=this._callbacks[this._bufferOffset];if(s&&s(),this._bufferOffset++,this._pendingData-=e.length,Date.now()-r>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(()=>this._innerWrite())):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}}t.WriteBuffer=n},5941:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.toRgbString=t.parseColor=void 0;const r=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,i=/^[\da-f]+$/;function s(e,t){const r=e.toString(16),i=r.length<2?"0"+r:r;switch(t){case 4:return r[0];case 8:return i;case 12:return(i+i).slice(0,3);default:return i+i}}t.parseColor=function(e){if(!e)return;let t=e.toLowerCase();if(0===t.indexOf("rgb:")){t=t.slice(4);const e=r.exec(t);if(e){const t=e[1]?15:e[4]?255:e[7]?4095:65535;return[Math.round(parseInt(e[1]||e[4]||e[7]||e[10],16)/t*255),Math.round(parseInt(e[2]||e[5]||e[8]||e[11],16)/t*255),Math.round(parseInt(e[3]||e[6]||e[9]||e[12],16)/t*255)]}}else if(0===t.indexOf("#")&&(t=t.slice(1),i.exec(t)&&[3,6,9,12].includes(t.length))){const e=t.length/3,r=[0,0,0];for(let i=0;i<3;++i){const s=parseInt(t.slice(e*i,e*i+e),16);r[i]=1===e?s<<4:2===e?s:3===e?s>>4:s>>8}return r}},t.toRgbString=function(e,t=16){const[r,i,n]=e;return`rgb:${s(r,t)}/${s(i,t)}/${s(n,t)}`}},5770:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PAYLOAD_LIMIT=void 0,t.PAYLOAD_LIMIT=1e7},6351:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DcsHandler=t.DcsParser=void 0;const i=r(482),s=r(8742),n=r(5770),o=[];t.DcsParser=class{constructor(){this._handlers=Object.create(null),this._active=o,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=o}registerHandler(e,t){void 0===this._handlers[e]&&(this._handlers[e]=[]);const r=this._handlers[e];return r.push(t),{dispose:()=>{const e=r.indexOf(t);-1!==e&&r.splice(e,1)}}}clearHandler(e){this._handlers[e]&&delete this._handlers[e]}setHandlerFallback(e){this._handlerFb=e}reset(){if(this._active.length)for(let e=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;e>=0;--e)this._active[e].unhook(!1);this._stack.paused=!1,this._active=o,this._ident=0}hook(e,t){if(this.reset(),this._ident=e,this._active=this._handlers[e]||o,this._active.length)for(let r=this._active.length-1;r>=0;r--)this._active[r].hook(t);else this._handlerFb(this._ident,"HOOK",t)}put(e,t,r){if(this._active.length)for(let i=this._active.length-1;i>=0;i--)this._active[i].put(e,t,r);else this._handlerFb(this._ident,"PUT",(0,i.utf32ToString)(e,t,r))}unhook(e,t=!0){if(this._active.length){let r=!1,i=this._active.length-1,s=!1;if(this._stack.paused&&(i=this._stack.loopPosition-1,r=t,s=this._stack.fallThrough,this._stack.paused=!1),!s&&!1===r){for(;i>=0&&(r=this._active[i].unhook(e),!0!==r);i--)if(r instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=i,this._stack.fallThrough=!1,r;i--}for(;i>=0;i--)if(r=this._active[i].unhook(!1),r instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=i,this._stack.fallThrough=!0,r}else this._handlerFb(this._ident,"UNHOOK",e);this._active=o,this._ident=0}};const a=new s.Params;a.addParam(0),t.DcsHandler=class{constructor(e){this._handler=e,this._data="",this._params=a,this._hitLimit=!1}hook(e){this._params=e.length>1||e.params[0]?e.clone():a,this._data="",this._hitLimit=!1}put(e,t,r){this._hitLimit||(this._data+=(0,i.utf32ToString)(e,t,r),this._data.length>n.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}unhook(e){let t=!1;if(this._hitLimit)t=!1;else if(e&&(t=this._handler(this._data,this._params),t instanceof Promise))return t.then(e=>(this._params=a,this._data="",this._hitLimit=!1,e));return this._params=a,this._data="",this._hitLimit=!1,t}}},2015:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.EscapeSequenceParser=t.VT500_TRANSITION_TABLE=t.TransitionTable=void 0;const i=r(844),s=r(8742),n=r(6242),o=r(6351);class a{constructor(e){this.table=new Uint8Array(e)}setDefault(e,t){this.table.fill(e<<4|t)}add(e,t,r,i){this.table[t<<8|e]=r<<4|i}addMany(e,t,r,i){for(let s=0;s<e.length;s++)this.table[t<<8|e[s]]=r<<4|i}}t.TransitionTable=a;const l=160;t.VT500_TRANSITION_TABLE=function(){const e=new a(4095),t=Array.apply(null,Array(256)).map((e,t)=>t),r=(e,r)=>t.slice(e,r),i=r(32,127),s=r(0,24);s.push(25),s.push.apply(s,r(28,32));const n=r(0,14);let o;for(o in e.setDefault(1,0),e.addMany(i,0,2,0),n)e.addMany([24,26,153,154],o,3,0),e.addMany(r(128,144),o,3,0),e.addMany(r(144,152),o,3,0),e.add(156,o,0,0),e.add(27,o,11,1),e.add(157,o,4,8),e.addMany([152,158,159],o,0,7),e.add(155,o,11,3),e.add(144,o,11,9);return e.addMany(s,0,3,0),e.addMany(s,1,3,1),e.add(127,1,0,1),e.addMany(s,8,0,8),e.addMany(s,3,3,3),e.add(127,3,0,3),e.addMany(s,4,3,4),e.add(127,4,0,4),e.addMany(s,6,3,6),e.addMany(s,5,3,5),e.add(127,5,0,5),e.addMany(s,2,3,2),e.add(127,2,0,2),e.add(93,1,4,8),e.addMany(i,8,5,8),e.add(127,8,5,8),e.addMany([156,27,24,26,7],8,6,0),e.addMany(r(28,32),8,0,8),e.addMany([88,94,95],1,0,7),e.addMany(i,7,0,7),e.addMany(s,7,0,7),e.add(156,7,0,0),e.add(127,7,0,7),e.add(91,1,11,3),e.addMany(r(64,127),3,7,0),e.addMany(r(48,60),3,8,4),e.addMany([60,61,62,63],3,9,4),e.addMany(r(48,60),4,8,4),e.addMany(r(64,127),4,7,0),e.addMany([60,61,62,63],4,0,6),e.addMany(r(32,64),6,0,6),e.add(127,6,0,6),e.addMany(r(64,127),6,0,0),e.addMany(r(32,48),3,9,5),e.addMany(r(32,48),5,9,5),e.addMany(r(48,64),5,0,6),e.addMany(r(64,127),5,7,0),e.addMany(r(32,48),4,9,5),e.addMany(r(32,48),1,9,2),e.addMany(r(32,48),2,9,2),e.addMany(r(48,127),2,10,0),e.addMany(r(48,80),1,10,0),e.addMany(r(81,88),1,10,0),e.addMany([89,90,92],1,10,0),e.addMany(r(96,127),1,10,0),e.add(80,1,11,9),e.addMany(s,9,0,9),e.add(127,9,0,9),e.addMany(r(28,32),9,0,9),e.addMany(r(32,48),9,9,12),e.addMany(r(48,60),9,8,10),e.addMany([60,61,62,63],9,9,10),e.addMany(s,11,0,11),e.addMany(r(32,128),11,0,11),e.addMany(r(28,32),11,0,11),e.addMany(s,10,0,10),e.add(127,10,0,10),e.addMany(r(28,32),10,0,10),e.addMany(r(48,60),10,8,10),e.addMany([60,61,62,63],10,0,11),e.addMany(r(32,48),10,9,12),e.addMany(s,12,0,12),e.add(127,12,0,12),e.addMany(r(28,32),12,0,12),e.addMany(r(32,48),12,9,12),e.addMany(r(48,64),12,0,11),e.addMany(r(64,127),12,12,13),e.addMany(r(64,127),10,12,13),e.addMany(r(64,127),9,12,13),e.addMany(s,13,13,13),e.addMany(i,13,13,13),e.add(127,13,0,13),e.addMany([27,156,24,26],13,14,0),e.add(l,0,2,0),e.add(l,8,5,8),e.add(l,6,0,6),e.add(l,11,0,11),e.add(l,13,13,13),e}();class c extends i.Disposable{constructor(e=t.VT500_TRANSITION_TABLE){super(),this._transitions=e,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new s.Params,this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._printHandlerFb=(e,t,r)=>{},this._executeHandlerFb=e=>{},this._csiHandlerFb=(e,t)=>{},this._escHandlerFb=e=>{},this._errorHandlerFb=e=>e,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this.register((0,i.toDisposable)(()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)})),this._oscParser=this.register(new n.OscParser),this._dcsParser=this.register(new o.DcsParser),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},()=>!0)}_identifier(e,t=[64,126]){let r=0;if(e.prefix){if(e.prefix.length>1)throw new Error("only one byte as prefix supported");if(r=e.prefix.charCodeAt(0),r&&60>r||r>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(e.intermediates){if(e.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let t=0;t<e.intermediates.length;++t){const i=e.intermediates.charCodeAt(t);if(32>i||i>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");r<<=8,r|=i}}if(1!==e.final.length)throw new Error("final must be a single byte");const i=e.final.charCodeAt(0);if(t[0]>i||i>t[1])throw new Error(`final must be in range ${t[0]} .. ${t[1]}`);return r<<=8,r|=i,r}identToString(e){const t=[];for(;e;)t.push(String.fromCharCode(255&e)),e>>=8;return t.reverse().join("")}setPrintHandler(e){this._printHandler=e}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(e,t){const r=this._identifier(e,[48,126]);void 0===this._escHandlers[r]&&(this._escHandlers[r]=[]);const i=this._escHandlers[r];return i.push(t),{dispose:()=>{const e=i.indexOf(t);-1!==e&&i.splice(e,1)}}}clearEscHandler(e){this._escHandlers[this._identifier(e,[48,126])]&&delete this._escHandlers[this._identifier(e,[48,126])]}setEscHandlerFallback(e){this._escHandlerFb=e}setExecuteHandler(e,t){this._executeHandlers[e.charCodeAt(0)]=t}clearExecuteHandler(e){this._executeHandlers[e.charCodeAt(0)]&&delete this._executeHandlers[e.charCodeAt(0)]}setExecuteHandlerFallback(e){this._executeHandlerFb=e}registerCsiHandler(e,t){const r=this._identifier(e);void 0===this._csiHandlers[r]&&(this._csiHandlers[r]=[]);const i=this._csiHandlers[r];return i.push(t),{dispose:()=>{const e=i.indexOf(t);-1!==e&&i.splice(e,1)}}}clearCsiHandler(e){this._csiHandlers[this._identifier(e)]&&delete this._csiHandlers[this._identifier(e)]}setCsiHandlerFallback(e){this._csiHandlerFb=e}registerDcsHandler(e,t){return this._dcsParser.registerHandler(this._identifier(e),t)}clearDcsHandler(e){this._dcsParser.clearHandler(this._identifier(e))}setDcsHandlerFallback(e){this._dcsParser.setHandlerFallback(e)}registerOscHandler(e,t){return this._oscParser.registerHandler(e,t)}clearOscHandler(e){this._oscParser.clearHandler(e)}setOscHandlerFallback(e){this._oscParser.setHandlerFallback(e)}setErrorHandler(e){this._errorHandler=e}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,0!==this._parseStack.state&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(e,t,r,i,s){this._parseStack.state=e,this._parseStack.handlers=t,this._parseStack.handlerPos=r,this._parseStack.transition=i,this._parseStack.chunkPos=s}parse(e,t,r){let i,s=0,n=0,o=0;if(this._parseStack.state)if(2===this._parseStack.state)this._parseStack.state=0,o=this._parseStack.chunkPos+1;else{if(void 0===r||1===this._parseStack.state)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");const t=this._parseStack.handlers;let n=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(!1===r&&n>-1)for(;n>=0&&(i=t[n](this._params),!0!==i);n--)if(i instanceof Promise)return this._parseStack.handlerPos=n,i;this._parseStack.handlers=[];break;case 4:if(!1===r&&n>-1)for(;n>=0&&(i=t[n](),!0!==i);n--)if(i instanceof Promise)return this._parseStack.handlerPos=n,i;this._parseStack.handlers=[];break;case 6:if(s=e[this._parseStack.chunkPos],i=this._dcsParser.unhook(24!==s&&26!==s,r),i)return i;27===s&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(s=e[this._parseStack.chunkPos],i=this._oscParser.end(24!==s&&26!==s,r),i)return i;27===s&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,o=this._parseStack.chunkPos+1,this.precedingCodepoint=0,this.currentState=15&this._parseStack.transition}for(let a=o;a<t;++a){switch(s=e[a],n=this._transitions.table[this.currentState<<8|(s<160?s:l)],n>>4){case 2:for(let i=a+1;;++i){if(i>=t||(s=e[i])<32||s>126&&s<l){this._printHandler(e,a,i),a=i-1;break}if(++i>=t||(s=e[i])<32||s>126&&s<l){this._printHandler(e,a,i),a=i-1;break}if(++i>=t||(s=e[i])<32||s>126&&s<l){this._printHandler(e,a,i),a=i-1;break}if(++i>=t||(s=e[i])<32||s>126&&s<l){this._printHandler(e,a,i),a=i-1;break}}break;case 3:this._executeHandlers[s]?this._executeHandlers[s]():this._executeHandlerFb(s),this.precedingCodepoint=0;break;case 0:break;case 1:if(this._errorHandler({position:a,code:s,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:const r=this._csiHandlers[this._collect<<8|s];let o=r?r.length-1:-1;for(;o>=0&&(i=r[o](this._params),!0!==i);o--)if(i instanceof Promise)return this._preserveStack(3,r,o,n,a),i;o<0&&this._csiHandlerFb(this._collect<<8|s,this._params),this.precedingCodepoint=0;break;case 8:do{switch(s){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(s-48)}}while(++a<t&&(s=e[a])>47&&s<60);a--;break;case 9:this._collect<<=8,this._collect|=s;break;case 10:const c=this._escHandlers[this._collect<<8|s];let h=c?c.length-1:-1;for(;h>=0&&(i=c[h](),!0!==i);h--)if(i instanceof Promise)return this._preserveStack(4,c,h,n,a),i;h<0&&this._escHandlerFb(this._collect<<8|s),this.precedingCodepoint=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|s,this._params);break;case 13:for(let i=a+1;;++i)if(i>=t||24===(s=e[i])||26===s||27===s||s>127&&s<l){this._dcsParser.put(e,a,i),a=i-1;break}break;case 14:if(i=this._dcsParser.unhook(24!==s&&26!==s),i)return this._preserveStack(6,[],0,n,a),i;27===s&&(n|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0;break;case 4:this._oscParser.start();break;case 5:for(let i=a+1;;i++)if(i>=t||(s=e[i])<32||s>127&&s<l){this._oscParser.put(e,a,i),a=i-1;break}break;case 6:if(i=this._oscParser.end(24!==s&&26!==s),i)return this._preserveStack(5,[],0,n,a),i;27===s&&(n|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0}this.currentState=15&n}}}t.EscapeSequenceParser=c},6242:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.OscHandler=t.OscParser=void 0;const i=r(5770),s=r(482),n=[];t.OscParser=class{constructor(){this._state=0,this._active=n,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(e,t){void 0===this._handlers[e]&&(this._handlers[e]=[]);const r=this._handlers[e];return r.push(t),{dispose:()=>{const e=r.indexOf(t);-1!==e&&r.splice(e,1)}}}clearHandler(e){this._handlers[e]&&delete this._handlers[e]}setHandlerFallback(e){this._handlerFb=e}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=n}reset(){if(2===this._state)for(let e=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;e>=0;--e)this._active[e].end(!1);this._stack.paused=!1,this._active=n,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||n,this._active.length)for(let e=this._active.length-1;e>=0;e--)this._active[e].start();else this._handlerFb(this._id,"START")}_put(e,t,r){if(this._active.length)for(let i=this._active.length-1;i>=0;i--)this._active[i].put(e,t,r);else this._handlerFb(this._id,"PUT",(0,s.utf32ToString)(e,t,r))}start(){this.reset(),this._state=1}put(e,t,r){if(3!==this._state){if(1===this._state)for(;t<r;){const r=e[t++];if(59===r){this._state=2,this._start();break}if(r<48||57<r)return void(this._state=3);-1===this._id&&(this._id=0),this._id=10*this._id+r-48}2===this._state&&r-t>0&&this._put(e,t,r)}}end(e,t=!0){if(0!==this._state){if(3!==this._state)if(1===this._state&&this._start(),this._active.length){let r=!1,i=this._active.length-1,s=!1;if(this._stack.paused&&(i=this._stack.loopPosition-1,r=t,s=this._stack.fallThrough,this._stack.paused=!1),!s&&!1===r){for(;i>=0&&(r=this._active[i].end(e),!0!==r);i--)if(r instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=i,this._stack.fallThrough=!1,r;i--}for(;i>=0;i--)if(r=this._active[i].end(!1),r instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=i,this._stack.fallThrough=!0,r}else this._handlerFb(this._id,"END",e);this._active=n,this._id=-1,this._state=0}}},t.OscHandler=class{constructor(e){this._handler=e,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(e,t,r){this._hitLimit||(this._data+=(0,s.utf32ToString)(e,t,r),this._data.length>i.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}end(e){let t=!1;if(this._hitLimit)t=!1;else if(e&&(t=this._handler(this._data),t instanceof Promise))return t.then(e=>(this._data="",this._hitLimit=!1,e));return this._data="",this._hitLimit=!1,t}}},8742:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Params=void 0;const r=2147483647;class i{static fromArray(e){const t=new i;if(!e.length)return t;for(let r=Array.isArray(e[0])?1:0;r<e.length;++r){const i=e[r];if(Array.isArray(i))for(let e=0;e<i.length;++e)t.addSubParam(i[e]);else t.addParam(i)}return t}constructor(e=32,t=32){if(this.maxLength=e,this.maxSubParamsLength=t,t>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(e),this.length=0,this._subParams=new Int32Array(t),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(e),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}clone(){const e=new i(this.maxLength,this.maxSubParamsLength);return e.params.set(this.params),e.length=this.length,e._subParams.set(this._subParams),e._subParamsLength=this._subParamsLength,e._subParamsIdx.set(this._subParamsIdx),e._rejectDigits=this._rejectDigits,e._rejectSubDigits=this._rejectSubDigits,e._digitIsSub=this._digitIsSub,e}toArray(){const e=[];for(let t=0;t<this.length;++t){e.push(this.params[t]);const r=this._subParamsIdx[t]>>8,i=255&this._subParamsIdx[t];i-r>0&&e.push(Array.prototype.slice.call(this._subParams,r,i))}return e}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(e){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(e<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=e>r?r:e}}addSubParam(e){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(e<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=e>r?r:e,this._subParamsIdx[this.length-1]++}}hasSubParams(e){return(255&this._subParamsIdx[e])-(this._subParamsIdx[e]>>8)>0}getSubParams(e){const t=this._subParamsIdx[e]>>8,r=255&this._subParamsIdx[e];return r-t>0?this._subParams.subarray(t,r):null}getSubParamsAll(){const e={};for(let t=0;t<this.length;++t){const r=this._subParamsIdx[t]>>8,i=255&this._subParamsIdx[t];i-r>0&&(e[t]=this._subParams.slice(r,i))}return e}addDigit(e){let t;if(this._rejectDigits||!(t=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;const i=this._digitIsSub?this._subParams:this.params,s=i[t-1];i[t-1]=~s?Math.min(10*s+e,r):e}}t.Params=i},5741:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AddonManager=void 0,t.AddonManager=class{constructor(){this._addons=[]}dispose(){for(let e=this._addons.length-1;e>=0;e--)this._addons[e].instance.dispose()}loadAddon(e,t){const r={instance:t,dispose:t.dispose,isDisposed:!1};this._addons.push(r),t.dispose=()=>this._wrappedAddonDispose(r),t.activate(e)}_wrappedAddonDispose(e){if(e.isDisposed)return;let t=-1;for(let r=0;r<this._addons.length;r++)if(this._addons[r]===e){t=r;break}if(-1===t)throw new Error("Could not dispose an addon that has not been loaded");e.isDisposed=!0,e.dispose.apply(e.instance),this._addons.splice(t,1)}}},8771:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BufferApiView=void 0;const i=r(3785),s=r(511);t.BufferApiView=class{constructor(e,t){this._buffer=e,this.type=t}init(e){return this._buffer=e,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(e){const t=this._buffer.lines.get(e);if(t)return new i.BufferLineApiView(t)}getNullCell(){return new s.CellData}}},3785:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BufferLineApiView=void 0;const i=r(511);t.BufferLineApiView=class{constructor(e){this._line=e}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(e,t){if(!(e<0||e>=this._line.length))return t?(this._line.loadCell(e,t),t):this._line.loadCell(e,new i.CellData)}translateToString(e,t,r){return this._line.translateToString(e,t,r)}}},8285:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BufferNamespaceApi=void 0;const i=r(8771),s=r(8460),n=r(844);class o extends n.Disposable{constructor(e){super(),this._core=e,this._onBufferChange=this.register(new s.EventEmitter),this.onBufferChange=this._onBufferChange.event,this._normal=new i.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new i.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(()=>this._onBufferChange.fire(this.active))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}}t.BufferNamespaceApi=o},7975:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ParserApi=void 0,t.ParserApi=class{constructor(e){this._core=e}registerCsiHandler(e,t){return this._core.registerCsiHandler(e,e=>t(e.toArray()))}addCsiHandler(e,t){return this.registerCsiHandler(e,t)}registerDcsHandler(e,t){return this._core.registerDcsHandler(e,(e,r)=>t(e,r.toArray()))}addDcsHandler(e,t){return this.registerDcsHandler(e,t)}registerEscHandler(e,t){return this._core.registerEscHandler(e,t)}addEscHandler(e,t){return this.registerEscHandler(e,t)}registerOscHandler(e,t){return this._core.registerOscHandler(e,t)}addOscHandler(e,t){return this.registerOscHandler(e,t)}}},7090:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.UnicodeApi=void 0,t.UnicodeApi=class{constructor(e){this._core=e}register(e){this._core.unicodeService.register(e)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(e){this._core.unicodeService.activeVersion=e}}},744:function(e,t,r){var i=this&&this.__decorate||function(e,t,r,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n<3?s(o):n>3?s(t,r,o):s(t,r))||o);return n>3&&o&&Object.defineProperty(t,r,o),o},s=this&&this.__param||function(e,t){return function(r,i){t(r,i,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.BufferService=t.MINIMUM_ROWS=t.MINIMUM_COLS=void 0;const n=r(8460),o=r(844),a=r(5295),l=r(2585);t.MINIMUM_COLS=2,t.MINIMUM_ROWS=1;let c=t.BufferService=class extends o.Disposable{get buffer(){return this.buffers.active}constructor(e){super(),this.isUserScrolling=!1,this._onResize=this.register(new n.EventEmitter),this.onResize=this._onResize.event,this._onScroll=this.register(new n.EventEmitter),this.onScroll=this._onScroll.event,this.cols=Math.max(e.rawOptions.cols||0,t.MINIMUM_COLS),this.rows=Math.max(e.rawOptions.rows||0,t.MINIMUM_ROWS),this.buffers=this.register(new a.BufferSet(e,this))}resize(e,t){this.cols=e,this.rows=t,this.buffers.resize(e,t),this._onResize.fire({cols:e,rows:t})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(e,t=!1){const r=this.buffer;let i;i=this._cachedBlankLine,i&&i.length===this.cols&&i.getFg(0)===e.fg&&i.getBg(0)===e.bg||(i=r.getBlankLine(e,t),this._cachedBlankLine=i),i.isWrapped=t;const s=r.ybase+r.scrollTop,n=r.ybase+r.scrollBottom;if(0===r.scrollTop){const e=r.lines.isFull;n===r.lines.length-1?e?r.lines.recycle().copyFrom(i):r.lines.push(i.clone()):r.lines.splice(n+1,0,i.clone()),e?this.isUserScrolling&&(r.ydisp=Math.max(r.ydisp-1,0)):(r.ybase++,this.isUserScrolling||r.ydisp++)}else{const e=n-s+1;r.lines.shiftElements(s+1,e-1,-1),r.lines.set(n,i.clone())}this.isUserScrolling||(r.ydisp=r.ybase),this._onScroll.fire(r.ydisp)}scrollLines(e,t,r){const i=this.buffer;if(e<0){if(0===i.ydisp)return;this.isUserScrolling=!0}else e+i.ydisp>=i.ybase&&(this.isUserScrolling=!1);const s=i.ydisp;i.ydisp=Math.max(Math.min(i.ydisp+e,i.ybase),0),s!==i.ydisp&&(t||this._onScroll.fire(i.ydisp))}};t.BufferService=c=i([s(0,l.IOptionsService)],c)},7994:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CharsetService=void 0,t.CharsetService=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(e){this.glevel=e,this.charset=this._charsets[e]}setgCharset(e,t){this._charsets[e]=t,this.glevel===e&&(this.charset=t)}}},1753:function(e,t,r){var i=this&&this.__decorate||function(e,t,r,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n<3?s(o):n>3?s(t,r,o):s(t,r))||o);return n>3&&o&&Object.defineProperty(t,r,o),o},s=this&&this.__param||function(e,t){return function(r,i){t(r,i,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.CoreMouseService=void 0;const n=r(2585),o=r(8460),a=r(844),l={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:e=>4!==e.button&&1===e.action&&(e.ctrl=!1,e.alt=!1,e.shift=!1,!0)},VT200:{events:19,restrict:e=>32!==e.action},DRAG:{events:23,restrict:e=>32!==e.action||3!==e.button},ANY:{events:31,restrict:e=>!0}};function c(e,t){let r=(e.ctrl?16:0)|(e.shift?4:0)|(e.alt?8:0);return 4===e.button?(r|=64,r|=e.action):(r|=3&e.button,4&e.button&&(r|=64),8&e.button&&(r|=128),32===e.action?r|=32:0!==e.action||t||(r|=3)),r}const h=String.fromCharCode,u={DEFAULT:e=>{const t=[c(e,!1)+32,e.col+32,e.row+32];return t[0]>255||t[1]>255||t[2]>255?"":`[M${h(t[0])}${h(t[1])}${h(t[2])}`},SGR:e=>{const t=0===e.action&&4!==e.button?"m":"M";return`[<${c(e,!0)};${e.col};${e.row}${t}`},SGR_PIXELS:e=>{const t=0===e.action&&4!==e.button?"m":"M";return`[<${c(e,!0)};${e.x};${e.y}${t}`}};let d=t.CoreMouseService=class extends a.Disposable{constructor(e,t){super(),this._bufferService=e,this._coreService=t,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._onProtocolChange=this.register(new o.EventEmitter),this.onProtocolChange=this._onProtocolChange.event;for(const r of Object.keys(l))this.addProtocol(r,l[r]);for(const r of Object.keys(u))this.addEncoding(r,u[r]);this.reset()}addProtocol(e,t){this._protocols[e]=t}addEncoding(e,t){this._encodings[e]=t}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return 0!==this._protocols[this._activeProtocol].events}set activeProtocol(e){if(!this._protocols[e])throw new Error(`unknown protocol "${e}"`);this._activeProtocol=e,this._onProtocolChange.fire(this._protocols[e].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(e){if(!this._encodings[e])throw new Error(`unknown encoding "${e}"`);this._activeEncoding=e}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null}triggerMouseEvent(e){if(e.col<0||e.col>=this._bufferService.cols||e.row<0||e.row>=this._bufferService.rows)return!1;if(4===e.button&&32===e.action)return!1;if(3===e.button&&32!==e.action)return!1;if(4!==e.button&&(2===e.action||3===e.action))return!1;if(e.col++,e.row++,32===e.action&&this._lastEvent&&this._equalEvents(this._lastEvent,e,"SGR_PIXELS"===this._activeEncoding))return!1;if(!this._protocols[this._activeProtocol].restrict(e))return!1;const t=this._encodings[this._activeEncoding](e);return t&&("DEFAULT"===this._activeEncoding?this._coreService.triggerBinaryEvent(t):this._coreService.triggerDataEvent(t,!0)),this._lastEvent=e,!0}explainEvents(e){return{down:!!(1&e),up:!!(2&e),drag:!!(4&e),move:!!(8&e),wheel:!!(16&e)}}_equalEvents(e,t,r){if(r){if(e.x!==t.x)return!1;if(e.y!==t.y)return!1}else{if(e.col!==t.col)return!1;if(e.row!==t.row)return!1}return e.button===t.button&&e.action===t.action&&e.ctrl===t.ctrl&&e.alt===t.alt&&e.shift===t.shift}};t.CoreMouseService=d=i([s(0,n.IBufferService),s(1,n.ICoreService)],d)},6975:function(e,t,r){var i=this&&this.__decorate||function(e,t,r,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n<3?s(o):n>3?s(t,r,o):s(t,r))||o);return n>3&&o&&Object.defineProperty(t,r,o),o},s=this&&this.__param||function(e,t){return function(r,i){t(r,i,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.CoreService=void 0;const n=r(1439),o=r(8460),a=r(844),l=r(2585),c=Object.freeze({insertMode:!1}),h=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0});let u=t.CoreService=class extends a.Disposable{constructor(e,t,r){super(),this._bufferService=e,this._logService=t,this._optionsService=r,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this.register(new o.EventEmitter),this.onData=this._onData.event,this._onUserInput=this.register(new o.EventEmitter),this.onUserInput=this._onUserInput.event,this._onBinary=this.register(new o.EventEmitter),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this.register(new o.EventEmitter),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=(0,n.clone)(c),this.decPrivateModes=(0,n.clone)(h)}reset(){this.modes=(0,n.clone)(c),this.decPrivateModes=(0,n.clone)(h)}triggerDataEvent(e,t=!1){if(this._optionsService.rawOptions.disableStdin)return;const r=this._bufferService.buffer;t&&this._optionsService.rawOptions.scrollOnUserInput&&r.ybase!==r.ydisp&&this._onRequestScrollToBottom.fire(),t&&this._onUserInput.fire(),this._logService.debug(`sending data "${e}"`,()=>e.split("").map(e=>e.charCodeAt(0))),this._onData.fire(e)}triggerBinaryEvent(e){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${e}"`,()=>e.split("").map(e=>e.charCodeAt(0))),this._onBinary.fire(e))}};t.CoreService=u=i([s(0,l.IBufferService),s(1,l.ILogService),s(2,l.IOptionsService)],u)},9074:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DecorationService=void 0;const i=r(8055),s=r(8460),n=r(844),o=r(6106);let a=0,l=0;class c extends n.Disposable{get decorations(){return this._decorations.values()}constructor(){super(),this._decorations=new o.SortedList(e=>null==e?void 0:e.marker.line),this._onDecorationRegistered=this.register(new s.EventEmitter),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this.register(new s.EventEmitter),this.onDecorationRemoved=this._onDecorationRemoved.event,this.register((0,n.toDisposable)(()=>this.reset()))}registerDecoration(e){if(e.marker.isDisposed)return;const t=new h(e);if(t){const e=t.marker.onDispose(()=>t.dispose());t.onDispose(()=>{t&&(this._decorations.delete(t)&&this._onDecorationRemoved.fire(t),e.dispose())}),this._decorations.insert(t),this._onDecorationRegistered.fire(t)}return t}reset(){for(const e of this._decorations.values())e.dispose();this._decorations.clear()}*getDecorationsAtCell(e,t,r){var i,s,n;let o=0,a=0;for(const l of this._decorations.getKeyIterator(t))o=null!==(i=l.options.x)&&void 0!==i?i:0,a=o+(null!==(s=l.options.width)&&void 0!==s?s:1),e>=o&&e<a&&(!r||(null!==(n=l.options.layer)&&void 0!==n?n:"bottom")===r)&&(yield l)}forEachDecorationAtCell(e,t,r,i){this._decorations.forEachByKey(t,t=>{var s,n,o;a=null!==(s=t.options.x)&&void 0!==s?s:0,l=a+(null!==(n=t.options.width)&&void 0!==n?n:1),e>=a&&e<l&&(!r||(null!==(o=t.options.layer)&&void 0!==o?o:"bottom")===r)&&i(t)})}}t.DecorationService=c;class h extends n.Disposable{get isDisposed(){return this._isDisposed}get backgroundColorRGB(){return null===this._cachedBg&&(this.options.backgroundColor?this._cachedBg=i.css.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return null===this._cachedFg&&(this.options.foregroundColor?this._cachedFg=i.css.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}constructor(e){super(),this.options=e,this.onRenderEmitter=this.register(new s.EventEmitter),this.onRender=this.onRenderEmitter.event,this._onDispose=this.register(new s.EventEmitter),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=e.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}dispose(){this._onDispose.fire(),super.dispose()}}},4348:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.InstantiationService=t.ServiceCollection=void 0;const i=r(2585),s=r(8343);class n{constructor(...e){this._entries=new Map;for(const[t,r]of e)this.set(t,r)}set(e,t){const r=this._entries.get(e);return this._entries.set(e,t),r}forEach(e){for(const[t,r]of this._entries.entries())e(t,r)}has(e){return this._entries.has(e)}get(e){return this._entries.get(e)}}t.ServiceCollection=n,t.InstantiationService=class{constructor(){this._services=new n,this._services.set(i.IInstantiationService,this)}setService(e,t){this._services.set(e,t)}getService(e){return this._services.get(e)}createInstance(e,...t){const r=(0,s.getServiceDependencies)(e).sort((e,t)=>e.index-t.index),i=[];for(const s of r){const t=this._services.get(s.id);if(!t)throw new Error(`[createInstance] ${e.name} depends on UNKNOWN service ${s.id}.`);i.push(t)}const n=r.length>0?r[0].index:t.length;if(t.length!==n)throw new Error(`[createInstance] First service dependency of ${e.name} at position ${n+1} conflicts with ${t.length} static arguments`);return new e(...[...t,...i])}}},7866:function(e,t,r){var i=this&&this.__decorate||function(e,t,r,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n<3?s(o):n>3?s(t,r,o):s(t,r))||o);return n>3&&o&&Object.defineProperty(t,r,o),o},s=this&&this.__param||function(e,t){return function(r,i){t(r,i,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.traceCall=t.setTraceLogger=t.LogService=void 0;const n=r(844),o=r(2585),a={trace:o.LogLevelEnum.TRACE,debug:o.LogLevelEnum.DEBUG,info:o.LogLevelEnum.INFO,warn:o.LogLevelEnum.WARN,error:o.LogLevelEnum.ERROR,off:o.LogLevelEnum.OFF};let l,c=t.LogService=class extends n.Disposable{get logLevel(){return this._logLevel}constructor(e){super(),this._optionsService=e,this._logLevel=o.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel())),l=this}_updateLogLevel(){this._logLevel=a[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(e){for(let t=0;t<e.length;t++)"function"==typeof e[t]&&(e[t]=e[t]())}_log(e,t,r){this._evalLazyOptionalParams(r),e.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+t,...r)}trace(e,...t){var r,i;this._logLevel<=o.LogLevelEnum.TRACE&&this._log(null!==(i=null===(r=this._optionsService.options.logger)||void 0===r?void 0:r.trace.bind(this._optionsService.options.logger))&&void 0!==i?i:console.log,e,t)}debug(e,...t){var r,i;this._logLevel<=o.LogLevelEnum.DEBUG&&this._log(null!==(i=null===(r=this._optionsService.options.logger)||void 0===r?void 0:r.debug.bind(this._optionsService.options.logger))&&void 0!==i?i:console.log,e,t)}info(e,...t){var r,i;this._logLevel<=o.LogLevelEnum.INFO&&this._log(null!==(i=null===(r=this._optionsService.options.logger)||void 0===r?void 0:r.info.bind(this._optionsService.options.logger))&&void 0!==i?i:console.info,e,t)}warn(e,...t){var r,i;this._logLevel<=o.LogLevelEnum.WARN&&this._log(null!==(i=null===(r=this._optionsService.options.logger)||void 0===r?void 0:r.warn.bind(this._optionsService.options.logger))&&void 0!==i?i:console.warn,e,t)}error(e,...t){var r,i;this._logLevel<=o.LogLevelEnum.ERROR&&this._log(null!==(i=null===(r=this._optionsService.options.logger)||void 0===r?void 0:r.error.bind(this._optionsService.options.logger))&&void 0!==i?i:console.error,e,t)}};t.LogService=c=i([s(0,o.IOptionsService)],c),t.setTraceLogger=function(e){l=e},t.traceCall=function(e,t,r){if("function"!=typeof r.value)throw new Error("not supported");const i=r.value;r.value=function(...e){if(l.logLevel!==o.LogLevelEnum.TRACE)return i.apply(this,e);l.trace(`GlyphRenderer#${i.name}(${e.map(e=>JSON.stringify(e)).join(", ")})`);const t=i.apply(this,e);return l.trace(`GlyphRenderer#${i.name} return`,t),t}}},7302:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.OptionsService=t.DEFAULT_OPTIONS=void 0;const i=r(8460),s=r(844),n=r(6114);t.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,cursorInactiveStyle:"outline",customGlyphs:!0,drawBoldTextInBrightColors:!0,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",ignoreBracketedPasteMode:!1,lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",logger:null,scrollback:1e3,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},rightClickSelectsWord:n.isMac,windowOptions:{},windowsMode:!1,windowsPty:{},wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRulerWidth:0};const o=["normal","bold","100","200","300","400","500","600","700","800","900"];class a extends s.Disposable{constructor(e){super(),this._onOptionChange=this.register(new i.EventEmitter),this.onOptionChange=this._onOptionChange.event;const r=Object.assign({},t.DEFAULT_OPTIONS);for(const t in e)if(t in r)try{const i=e[t];r[t]=this._sanitizeAndValidateOption(t,i)}catch(e){console.error(e)}this.rawOptions=r,this.options=Object.assign({},r),this._setupOptions()}onSpecificOptionChange(e,t){return this.onOptionChange(r=>{r===e&&t(this.rawOptions[e])})}onMultipleOptionChange(e,t){return this.onOptionChange(r=>{-1!==e.indexOf(r)&&t()})}_setupOptions(){const e=e=>{if(!(e in t.DEFAULT_OPTIONS))throw new Error(`No option with key "${e}"`);return this.rawOptions[e]},r=(e,r)=>{if(!(e in t.DEFAULT_OPTIONS))throw new Error(`No option with key "${e}"`);r=this._sanitizeAndValidateOption(e,r),this.rawOptions[e]!==r&&(this.rawOptions[e]=r,this._onOptionChange.fire(e))};for(const t in this.rawOptions){const i={get:e.bind(this,t),set:r.bind(this,t)};Object.defineProperty(this.options,t,i)}}_sanitizeAndValidateOption(e,r){switch(e){case"cursorStyle":if(r||(r=t.DEFAULT_OPTIONS[e]),!function(e){return"block"===e||"underline"===e||"bar"===e}(r))throw new Error(`"${r}" is not a valid value for ${e}`);break;case"wordSeparator":r||(r=t.DEFAULT_OPTIONS[e]);break;case"fontWeight":case"fontWeightBold":if("number"==typeof r&&1<=r&&r<=1e3)break;r=o.includes(r)?r:t.DEFAULT_OPTIONS[e];break;case"cursorWidth":r=Math.floor(r);case"lineHeight":case"tabStopWidth":if(r<1)throw new Error(`${e} cannot be less than 1, value: ${r}`);break;case"minimumContrastRatio":r=Math.max(1,Math.min(21,Math.round(10*r)/10));break;case"scrollback":if((r=Math.min(r,4294967295))<0)throw new Error(`${e} cannot be less than 0, value: ${r}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if(r<=0)throw new Error(`${e} cannot be less than or equal to 0, value: ${r}`);break;case"rows":case"cols":if(!r&&0!==r)throw new Error(`${e} must be numeric, value: ${r}`);break;case"windowsPty":r=null!=r?r:{}}return r}}t.OptionsService=a},2660:function(e,t,r){var i=this&&this.__decorate||function(e,t,r,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n<3?s(o):n>3?s(t,r,o):s(t,r))||o);return n>3&&o&&Object.defineProperty(t,r,o),o},s=this&&this.__param||function(e,t){return function(r,i){t(r,i,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.OscLinkService=void 0;const n=r(2585);let o=t.OscLinkService=class{constructor(e){this._bufferService=e,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(e){const t=this._bufferService.buffer;if(void 0===e.id){const r=t.addMarker(t.ybase+t.y),i={data:e,id:this._nextId++,lines:[r]};return r.onDispose(()=>this._removeMarkerFromLink(i,r)),this._dataByLinkId.set(i.id,i),i.id}const r=e,i=this._getEntryIdKey(r),s=this._entriesWithId.get(i);if(s)return this.addLineToLink(s.id,t.ybase+t.y),s.id;const n=t.addMarker(t.ybase+t.y),o={id:this._nextId++,key:this._getEntryIdKey(r),data:r,lines:[n]};return n.onDispose(()=>this._removeMarkerFromLink(o,n)),this._entriesWithId.set(o.key,o),this._dataByLinkId.set(o.id,o),o.id}addLineToLink(e,t){const r=this._dataByLinkId.get(e);if(r&&r.lines.every(e=>e.line!==t)){const e=this._bufferService.buffer.addMarker(t);r.lines.push(e),e.onDispose(()=>this._removeMarkerFromLink(r,e))}}getLinkData(e){var t;return null===(t=this._dataByLinkId.get(e))||void 0===t?void 0:t.data}_getEntryIdKey(e){return`${e.id};;${e.uri}`}_removeMarkerFromLink(e,t){const r=e.lines.indexOf(t);-1!==r&&(e.lines.splice(r,1),0===e.lines.length&&(void 0!==e.data.id&&this._entriesWithId.delete(e.key),this._dataByLinkId.delete(e.id)))}};t.OscLinkService=o=i([s(0,n.IBufferService)],o)},8343:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createDecorator=t.getServiceDependencies=t.serviceRegistry=void 0;const r="di$target",i="di$dependencies";t.serviceRegistry=new Map,t.getServiceDependencies=function(e){return e[i]||[]},t.createDecorator=function(e){if(t.serviceRegistry.has(e))return t.serviceRegistry.get(e);const s=function(e,t,n){if(3!==arguments.length)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");!function(e,t,s){t[r]===t?t[i].push({id:e,index:s}):(t[i]=[{id:e,index:s}],t[r]=t)}(s,e,n)};return s.toString=()=>e,t.serviceRegistry.set(e,s),s}},2585:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.IDecorationService=t.IUnicodeService=t.IOscLinkService=t.IOptionsService=t.ILogService=t.LogLevelEnum=t.IInstantiationService=t.ICharsetService=t.ICoreService=t.ICoreMouseService=t.IBufferService=void 0;const i=r(8343);var s;t.IBufferService=(0,i.createDecorator)("BufferService"),t.ICoreMouseService=(0,i.createDecorator)("CoreMouseService"),t.ICoreService=(0,i.createDecorator)("CoreService"),t.ICharsetService=(0,i.createDecorator)("CharsetService"),t.IInstantiationService=(0,i.createDecorator)("InstantiationService"),function(e){e[e.TRACE=0]="TRACE",e[e.DEBUG=1]="DEBUG",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.OFF=5]="OFF"}(s||(t.LogLevelEnum=s={})),t.ILogService=(0,i.createDecorator)("LogService"),t.IOptionsService=(0,i.createDecorator)("OptionsService"),t.IOscLinkService=(0,i.createDecorator)("OscLinkService"),t.IUnicodeService=(0,i.createDecorator)("UnicodeService"),t.IDecorationService=(0,i.createDecorator)("DecorationService")},1480:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.UnicodeService=void 0;const i=r(8460),s=r(225);t.UnicodeService=class{constructor(){this._providers=Object.create(null),this._active="",this._onChange=new i.EventEmitter,this.onChange=this._onChange.event;const e=new s.UnicodeV6;this.register(e),this._active=e.version,this._activeProvider=e}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(e){if(!this._providers[e])throw new Error(`unknown Unicode version "${e}"`);this._active=e,this._activeProvider=this._providers[e],this._onChange.fire(e)}register(e){this._providers[e.version]=e}wcwidth(e){return this._activeProvider.wcwidth(e)}getStringCellWidth(e){let t=0;const r=e.length;for(let i=0;i<r;++i){let s=e.charCodeAt(i);if(55296<=s&&s<=56319){if(++i>=r)return t+this.wcwidth(s);const n=e.charCodeAt(i);56320<=n&&n<=57343?s=1024*(s-55296)+n-56320+65536:t+=this.wcwidth(n)}t+=this.wcwidth(s)}return t}}}},t={};function r(i){var s=t[i];if(void 0!==s)return s.exports;var n=t[i]={exports:{}};return e[i].call(n.exports,n,n.exports,r),n.exports}var i={};return(()=>{var e=i;Object.defineProperty(e,"__esModule",{value:!0}),e.Terminal=void 0;const t=r(9042),s=r(3236),n=r(844),o=r(5741),a=r(8285),l=r(7975),c=r(7090),h=["cols","rows"];class u extends n.Disposable{constructor(e){super(),this._core=this.register(new s.Terminal(e)),this._addonManager=this.register(new o.AddonManager),this._publicOptions=Object.assign({},this._core.options);const t=e=>this._core.options[e],r=(e,t)=>{this._checkReadonlyOptions(e),this._core.options[e]=t};for(const i in this._core.options){const e={get:t.bind(this,i),set:r.bind(this,i)};Object.defineProperty(this._publicOptions,i,e)}}_checkReadonlyOptions(e){if(h.includes(e))throw new Error(`Option "${e}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new l.ParserApi(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new c.UnicodeApi(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=this.register(new a.BufferNamespaceApi(this._core))),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){const e=this._core.coreService.decPrivateModes;let t="none";switch(this._core.coreMouseService.activeProtocol){case"X10":t="x10";break;case"VT200":t="vt200";break;case"DRAG":t="drag";break;case"ANY":t="any"}return{applicationCursorKeysMode:e.applicationCursorKeys,applicationKeypadMode:e.applicationKeypad,bracketedPasteMode:e.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:t,originMode:e.origin,reverseWraparoundMode:e.reverseWraparound,sendFocusMode:e.sendFocus,wraparoundMode:e.wraparound}}get options(){return this._publicOptions}set options(e){for(const t in e)this._publicOptions[t]=e[t]}blur(){this._core.blur()}focus(){this._core.focus()}resize(e,t){this._verifyIntegers(e,t),this._core.resize(e,t)}open(e){this._core.open(e)}attachCustomKeyEventHandler(e){this._core.attachCustomKeyEventHandler(e)}registerLinkProvider(e){return this._core.registerLinkProvider(e)}registerCharacterJoiner(e){return this._checkProposedApi(),this._core.registerCharacterJoiner(e)}deregisterCharacterJoiner(e){this._checkProposedApi(),this._core.deregisterCharacterJoiner(e)}registerMarker(e=0){return this._verifyIntegers(e),this._core.registerMarker(e)}registerDecoration(e){var t,r,i;return this._checkProposedApi(),this._verifyPositiveIntegers(null!==(t=e.x)&&void 0!==t?t:0,null!==(r=e.width)&&void 0!==r?r:0,null!==(i=e.height)&&void 0!==i?i:0),this._core.registerDecoration(e)}hasSelection(){return this._core.hasSelection()}select(e,t,r){this._verifyIntegers(e,t,r),this._core.select(e,t,r)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(e,t){this._verifyIntegers(e,t),this._core.selectLines(e,t)}dispose(){super.dispose()}scrollLines(e){this._verifyIntegers(e),this._core.scrollLines(e)}scrollPages(e){this._verifyIntegers(e),this._core.scrollPages(e)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(e){this._verifyIntegers(e),this._core.scrollToLine(e)}clear(){this._core.clear()}write(e,t){this._core.write(e,t)}writeln(e,t){this._core.write(e),this._core.write("\r\n",t)}paste(e){this._core.paste(e)}refresh(e,t){this._verifyIntegers(e,t),this._core.refresh(e,t)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(e){this._addonManager.loadAddon(this,e)}static get strings(){return t}_verifyIntegers(...e){for(const t of e)if(t===1/0||isNaN(t)||t%1!=0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(...e){for(const t of e)if(t&&(t===1/0||isNaN(t)||t%1!=0||t<0))throw new Error("This API only accepts positive integers")}}e.Terminal=u})(),i})());var l_=a_.exports,c_={exports:{}};!function(e){!function(t,r){e.exports=r()}(self,()=>(()=>{var e={};return(()=>{var t=e;Object.defineProperty(t,"__esModule",{value:!0}),t.FitAddon=void 0,t.FitAddon=class{activate(e){this._terminal=e}dispose(){}fit(){const e=this.proposeDimensions();if(!e||!this._terminal||isNaN(e.cols)||isNaN(e.rows))return;const t=this._terminal._core;this._terminal.rows===e.rows&&this._terminal.cols===e.cols||(t._renderService.clear(),this._terminal.resize(e.cols,e.rows))}proposeDimensions(){if(!this._terminal)return;if(!this._terminal.element||!this._terminal.element.parentElement)return;const e=this._terminal._core,t=e._renderService.dimensions;if(0===t.css.cell.width||0===t.css.cell.height)return;const r=0===this._terminal.options.scrollback?0:e.viewport.scrollBarWidth,i=window.getComputedStyle(this._terminal.element.parentElement),s=parseInt(i.getPropertyValue("height")),n=Math.max(0,parseInt(i.getPropertyValue("width"))),o=window.getComputedStyle(this._terminal.element),a=s-(parseInt(o.getPropertyValue("padding-top"))+parseInt(o.getPropertyValue("padding-bottom"))),l=n-(parseInt(o.getPropertyValue("padding-right"))+parseInt(o.getPropertyValue("padding-left")))-r;return{cols:Math.max(2,Math.floor(l/t.css.cell.width)),rows:Math.max(1,Math.floor(a/t.css.cell.height))}}}})(),e})())}(c_);var h_=c_.exports;const u_=Object.create(null);u_.open="0",u_.close="1",u_.ping="2",u_.pong="3",u_.message="4",u_.upgrade="5",u_.noop="6";const d_=Object.create(null);Object.keys(u_).forEach(e=>{d_[u_[e]]=e});const f_={type:"error",data:"parser error"},p_="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),__="function"==typeof ArrayBuffer,v_=e=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,g_=({type:e,data:t},r,i)=>p_&&t instanceof Blob?r?i(t):m_(t,i):__&&(t instanceof ArrayBuffer||v_(t))?r?i(t):m_(new Blob([t]),i):i(u_[e]+(t||"")),m_=(e,t)=>{const r=new FileReader;return r.onload=function(){const e=r.result.split(",")[1];t("b"+(e||""))},r.readAsDataURL(e)};function b_(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let y_;const S_="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",w_="undefined"==typeof Uint8Array?[]:new Uint8Array(256);for(let Uv=0;Uv<64;Uv++)w_[S_.charCodeAt(Uv)]=Uv;const C_="function"==typeof ArrayBuffer,x_=(e,t)=>{if("string"!=typeof e)return{type:"message",data:E_(e,t)};const r=e.charAt(0);if("b"===r)return{type:"message",data:k_(e.substring(1),t)};return d_[r]?e.length>1?{type:d_[r],data:e.substring(1)}:{type:d_[r]}:f_},k_=(e,t)=>{if(C_){const r=(e=>{let t,r,i,s,n,o=.75*e.length,a=e.length,l=0;"="===e[e.length-1]&&(o--,"="===e[e.length-2]&&o--);const c=new ArrayBuffer(o),h=new Uint8Array(c);for(t=0;t<a;t+=4)r=w_[e.charCodeAt(t)],i=w_[e.charCodeAt(t+1)],s=w_[e.charCodeAt(t+2)],n=w_[e.charCodeAt(t+3)],h[l++]=r<<2|i>>4,h[l++]=(15&i)<<4|s>>2,h[l++]=(3&s)<<6|63&n;return c})(e);return E_(r,t)}return{base64:!0,data:e}},E_=(e,t)=>"blob"===t?e instanceof Blob?e:new Blob([e]):e instanceof ArrayBuffer?e:e.buffer,L_=String.fromCharCode(30);function R_(){return new TransformStream({transform(e,t){!function(e,t){p_&&e.data instanceof Blob?e.data.arrayBuffer().then(b_).then(t):__&&(e.data instanceof ArrayBuffer||v_(e.data))?t(b_(e.data)):g_(e,!1,e=>{y_||(y_=new TextEncoder),t(y_.encode(e))})}(e,r=>{const i=r.length;let s;if(i<126)s=new Uint8Array(1),new DataView(s.buffer).setUint8(0,i);else if(i<65536){s=new Uint8Array(3);const e=new DataView(s.buffer);e.setUint8(0,126),e.setUint16(1,i)}else{s=new Uint8Array(9);const e=new DataView(s.buffer);e.setUint8(0,127),e.setBigUint64(1,BigInt(i))}e.data&&"string"!=typeof e.data&&(s[0]|=128),t.enqueue(s),t.enqueue(r)})}})}let D_;function A_(e){return e.reduce((e,t)=>e+t.length,0)}function T_(e,t){if(e[0].length===t)return e.shift();const r=new Uint8Array(t);let i=0;for(let s=0;s<t;s++)r[s]=e[0][i++],i===e[0].length&&(e.shift(),i=0);return e.length&&i<e[0].length&&(e[0]=e[0].slice(i)),r}function P_(e){if(e)return function(e){for(var t in P_.prototype)e[t]=P_.prototype[t];return e}(e)}P_.prototype.on=P_.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},P_.prototype.once=function(e,t){function r(){this.off(e,r),t.apply(this,arguments)}return r.fn=t,this.on(e,r),this},P_.prototype.off=P_.prototype.removeListener=P_.prototype.removeAllListeners=P_.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var r,i=this._callbacks["$"+e];if(!i)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var s=0;s<i.length;s++)if((r=i[s])===t||r.fn===t){i.splice(s,1);break}return 0===i.length&&delete this._callbacks["$"+e],this},P_.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),r=this._callbacks["$"+e],i=1;i<arguments.length;i++)t[i-1]=arguments[i];if(r){i=0;for(var s=(r=r.slice(0)).length;i<s;++i)r[i].apply(this,t)}return this},P_.prototype.emitReserved=P_.prototype.emit,P_.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},P_.prototype.hasListeners=function(e){return!!this.listeners(e).length};const B_="function"==typeof Promise&&"function"==typeof Promise.resolve?e=>Promise.resolve().then(e):(e,t)=>t(e,0),O_="undefined"!=typeof self?self:"undefined"!=typeof window?window:Function("return this")();function M_(e,...t){return t.reduce((t,r)=>(e.hasOwnProperty(r)&&(t[r]=e[r]),t),{})}const N_=O_.setTimeout,I_=O_.clearTimeout;function j_(e,t){t.useNativeTimers?(e.setTimeoutFn=N_.bind(O_),e.clearTimeoutFn=I_.bind(O_)):(e.setTimeoutFn=O_.setTimeout.bind(O_),e.clearTimeoutFn=O_.clearTimeout.bind(O_))}function H_(e){return"string"==typeof e?function(e){let t=0,r=0;for(let i=0,s=e.length;i<s;i++)t=e.charCodeAt(i),t<128?r+=1:t<2048?r+=2:t<55296||t>=57344?r+=3:(i++,r+=4);return r}(e):Math.ceil(1.33*(e.byteLength||e.size))}function F_(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}class z_ extends Error{constructor(e,t,r){super(e),this.description=t,this.context=r,this.type="TransportError"}}class U_ extends P_{constructor(e){super(),this.writable=!1,j_(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,t,r){return super.emitReserved("error",new z_(e,t,r)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this}send(e){"open"===this.readyState&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const t=x_(e,this.socket.binaryType);this.onPacket(t)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,t={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(t)}_hostname(){const e=this.opts.hostname;return-1===e.indexOf(":")?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&443!==Number(this.opts.port)||!this.opts.secure&&80!==Number(this.opts.port))?":"+this.opts.port:""}_query(e){const t=function(e){let t="";for(let r in e)e.hasOwnProperty(r)&&(t.length&&(t+="&"),t+=encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return t}(e);return t.length?"?"+t:""}}class W_ extends U_{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const t=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let e=0;this._polling&&(e++,this.once("pollComplete",function(){--e||t()})),this.writable||(e++,this.once("drain",function(){--e||t()}))}else t()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){((e,t)=>{const r=e.split(L_),i=[];for(let s=0;s<r.length;s++){const e=x_(r[s],t);if(i.push(e),"error"===e.type)break}return i})(e,this.socket.binaryType).forEach(e=>{if("opening"===this.readyState&&"open"===e.type&&this.onOpen(),"close"===e.type)return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(e)}),"closed"!==this.readyState&&(this._polling=!1,this.emitReserved("pollComplete"),"open"===this.readyState&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};"open"===this.readyState?e():this.once("open",e)}write(e){this.writable=!1,((e,t)=>{const r=e.length,i=new Array(r);let s=0;e.forEach((e,n)=>{g_(e,!1,e=>{i[n]=e,++s===r&&t(i.join(L_))})})})(e,e=>{this.doWrite(e,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",t=this.query||{};return!1!==this.opts.timestampRequests&&(t[this.opts.timestampParam]=F_()),this.supportsBinary||t.sid||(t.b64=1),this.createUri(e,t)}}let $_=!1;try{$_="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(zv){}const q_=$_;function V_(){}class K_ extends W_{constructor(e){if(super(e),"undefined"!=typeof location){const t="https:"===location.protocol;let r=location.port;r||(r=t?"443":"80"),this.xd="undefined"!=typeof location&&e.hostname!==location.hostname||r!==e.port}}doWrite(e,t){const r=this.request({method:"POST",data:e});r.on("success",t),r.on("error",(e,t)=>{this.onError("xhr post error",e,t)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(e,t)=>{this.onError("xhr poll error",e,t)}),this.pollXhr=e}}class G_ extends P_{constructor(e,t,r){super(),this.createRequest=e,j_(this,r),this._opts=r,this._method=r.method||"GET",this._uri=t,this._data=void 0!==r.data?r.data:null,this._create()}_create(){var e;const t=M_(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this._opts.xd;const r=this._xhr=this.createRequest(t);try{r.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0);for(let e in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(e)&&r.setRequestHeader(e,this._opts.extraHeaders[e])}}catch(Rd){}if("POST"===this._method)try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(Rd){}try{r.setRequestHeader("Accept","*/*")}catch(Rd){}null===(e=this._opts.cookieJar)||void 0===e||e.addCookies(r),"withCredentials"in r&&(r.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(r.timeout=this._opts.requestTimeout),r.onreadystatechange=()=>{var e;3===r.readyState&&(null===(e=this._opts.cookieJar)||void 0===e||e.parseCookies(r.getResponseHeader("set-cookie"))),4===r.readyState&&(200===r.status||1223===r.status?this._onLoad():this.setTimeoutFn(()=>{this._onError("number"==typeof r.status?r.status:0)},0))},r.send(this._data)}catch(Rd){return void this.setTimeoutFn(()=>{this._onError(Rd)},0)}"undefined"!=typeof document&&(this._index=G_.requestsCount++,G_.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(void 0!==this._xhr&&null!==this._xhr){if(this._xhr.onreadystatechange=V_,e)try{this._xhr.abort()}catch(Rd){}"undefined"!=typeof document&&delete G_.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;null!==e&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}if(G_.requestsCount=0,G_.requests={},"undefined"!=typeof document)if("function"==typeof attachEvent)attachEvent("onunload",X_);else if("function"==typeof addEventListener){addEventListener("onpagehide"in O_?"pagehide":"unload",X_,!1)}function X_(){for(let e in G_.requests)G_.requests.hasOwnProperty(e)&&G_.requests[e].abort()}const Y_=function(){const e=Q_({xdomain:!1});return e&&null!==e.responseType}();function Q_(e){const t=e.xdomain;try{if("undefined"!=typeof XMLHttpRequest&&(!t||q_))return new XMLHttpRequest}catch(Rd){}if(!t)try{return new(O_[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(Rd){}}const J_="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase();class Z_ extends U_{get name(){return"websocket"}doOpen(){const e=this.uri(),t=this.opts.protocols,r=J_?{}:M_(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,t,r)}catch(zv){return this.emitReserved("error",zv)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const r=e[t],i=t===e.length-1;g_(r,this.supportsBinary,e=>{try{this.doWrite(r,e)}catch(Rd){}i&&B_(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){void 0!==this.ws&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",t=this.query||{};return this.opts.timestampRequests&&(t[this.opts.timestampParam]=F_()),this.supportsBinary||(t.b64=1),this.createUri(e,t)}}const ev=O_.WebSocket||O_.MozWebSocket;const tv={websocket:class extends Z_{createSocket(e,t,r){return J_?new ev(e,t,r):t?new ev(e,t):new ev(e)}doWrite(e,t){this.ws.send(t)}},webtransport:class extends U_{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(zv){return this.emitReserved("error",zv)}this._transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{const t=function(e,t){D_||(D_=new TextDecoder);const r=[];let i=0,s=-1,n=!1;return new TransformStream({transform(o,a){for(r.push(o);;){if(0===i){if(A_(r)<1)break;const e=T_(r,1);n=!(128&~e[0]),s=127&e[0],i=s<126?3:126===s?1:2}else if(1===i){if(A_(r)<2)break;const e=T_(r,2);s=new DataView(e.buffer,e.byteOffset,e.length).getUint16(0),i=3}else if(2===i){if(A_(r)<8)break;const e=T_(r,8),t=new DataView(e.buffer,e.byteOffset,e.length),n=t.getUint32(0);if(n>Math.pow(2,21)-1){a.enqueue(f_);break}s=n*Math.pow(2,32)+t.getUint32(4),i=3}else{if(A_(r)<s)break;const e=T_(r,s);a.enqueue(x_(n?e:D_.decode(e),t)),i=0}if(0===s||s>e){a.enqueue(f_);break}}}})}(Number.MAX_SAFE_INTEGER,this.socket.binaryType),r=e.readable.pipeThrough(t).getReader(),i=R_();i.readable.pipeTo(e.writable),this._writer=i.writable.getWriter();const s=()=>{r.read().then(({done:e,value:t})=>{e||(this.onPacket(t),s())}).catch(e=>{})};s();const n={type:"open"};this.query.sid&&(n.data=`{"sid":"${this.query.sid}"}`),this._writer.write(n).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const r=e[t],i=t===e.length-1;this._writer.write(r).then(()=>{i&&B_(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;null===(e=this._transport)||void 0===e||e.close()}},polling:class extends K_{constructor(e){super(e);const t=e&&e.forceBase64;this.supportsBinary=Y_&&!t}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new G_(Q_,this.uri(),e)}}},rv=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,iv=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function sv(e){if(e.length>8e3)throw"URI too long";const t=e,r=e.indexOf("["),i=e.indexOf("]");-1!=r&&-1!=i&&(e=e.substring(0,r)+e.substring(r,i).replace(/:/g,";")+e.substring(i,e.length));let s=rv.exec(e||""),n={},o=14;for(;o--;)n[iv[o]]=s[o]||"";return-1!=r&&-1!=i&&(n.source=t,n.host=n.host.substring(1,n.host.length-1).replace(/;/g,":"),n.authority=n.authority.replace("[","").replace("]","").replace(/;/g,":"),n.ipv6uri=!0),n.pathNames=function(e,t){const r=/\/{2,9}/g,i=t.replace(r,"/").split("/");"/"!=t.slice(0,1)&&0!==t.length||i.splice(0,1);"/"==t.slice(-1)&&i.splice(i.length-1,1);return i}(0,n.path),n.queryKey=function(e,t){const r={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(e,t,i){t&&(r[t]=i)}),r}(0,n.query),n}const nv="function"==typeof addEventListener&&"function"==typeof removeEventListener,ov=[];nv&&addEventListener("offline",()=>{ov.forEach(e=>e())},!1);class av extends P_{constructor(e,t){if(super(),this.binaryType="arraybuffer",this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&"object"==typeof e&&(t=e,e=null),e){const r=sv(e);t.hostname=r.host,t.secure="https"===r.protocol||"wss"===r.protocol,t.port=r.port,r.query&&(t.query=r.query)}else t.host&&(t.hostname=sv(t.host).host);j_(this,t),this.secure=null!=t.secure?t.secure:"undefined"!=typeof location&&"https:"===location.protocol,t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.hostname=t.hostname||("undefined"!=typeof location?location.hostname:"localhost"),this.port=t.port||("undefined"!=typeof location&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},t.transports.forEach(e=>{const t=e.prototype.name;this.transports.push(t),this._transportsByName[t]=e}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},t),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),"string"==typeof this.opts.query&&(this.opts.query=function(e){let t={},r=e.split("&");for(let i=0,s=r.length;i<s;i++){let e=r[i].split("=");t[decodeURIComponent(e[0])]=decodeURIComponent(e[1])}return t}(this.opts.query)),nv&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),"localhost"!==this.hostname&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},ov.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const t=Object.assign({},this.opts.query);t.EIO=4,t.transport=e,this.id&&(t.sid=this.id);const r=Object.assign({},this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](r)}_open(){if(0===this.transports.length)return void this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);const e=this.opts.rememberUpgrade&&av.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket")?"websocket":this.transports[0];this.readyState="opening";const t=this.createTransport(e);t.open(),this.setTransport(t)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",e=>this._onClose("transport close",e))}onOpen(){this.readyState="open",av.priorWebsocketSuccess="websocket"===this.transport.name,this.emitReserved("open"),this.flush()}_onPacket(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const t=new Error("server error");t.code=e.data,this._onError(t);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data)}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),"closed"!==this.readyState&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,0===this.writeBuffer.length?this.emitReserved("drain"):this.flush()}flush(){if("closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&"polling"===this.transport.name&&this.writeBuffer.length>1))return this.writeBuffer;let e=1;for(let t=0;t<this.writeBuffer.length;t++){const r=this.writeBuffer[t].data;if(r&&(e+=H_(r)),t>0&&e>this._maxPayload)return this.writeBuffer.slice(0,t);e+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,B_(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,t,r){return this._sendPacket("message",e,t,r),this}send(e,t,r){return this._sendPacket("message",e,t,r),this}_sendPacket(e,t,r,i){if("function"==typeof t&&(i=t,t=void 0),"function"==typeof r&&(i=r,r=null),"closing"===this.readyState||"closed"===this.readyState)return;(r=r||{}).compress=!1!==r.compress;const s={type:e,data:t,options:r};this.emitReserved("packetCreate",s),this.writeBuffer.push(s),i&&this.once("flush",i),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},t=()=>{this.off("upgrade",t),this.off("upgradeError",t),e()},r=()=>{this.once("upgrade",t),this.once("upgradeError",t)};return"opening"!==this.readyState&&"open"!==this.readyState||(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?r():e()}):this.upgrading?r():e()),this}_onError(e){if(av.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&"opening"===this.readyState)return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),nv&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const e=ov.indexOf(this._offlineEventListener);-1!==e&&ov.splice(e,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,t),this.writeBuffer=[],this._prevBufferLen=0}}}av.protocol=4;class lv extends av{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),"open"===this.readyState&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let t=this.createTransport(e),r=!1;av.priorWebsocketSuccess=!1;const i=()=>{r||(t.send([{type:"ping",data:"probe"}]),t.once("packet",e=>{if(!r)if("pong"===e.type&&"probe"===e.data){if(this.upgrading=!0,this.emitReserved("upgrading",t),!t)return;av.priorWebsocketSuccess="websocket"===t.name,this.transport.pause(()=>{r||"closed"!==this.readyState&&(c(),this.setTransport(t),t.send([{type:"upgrade"}]),this.emitReserved("upgrade",t),t=null,this.upgrading=!1,this.flush())})}else{const e=new Error("probe error");e.transport=t.name,this.emitReserved("upgradeError",e)}}))};function s(){r||(r=!0,c(),t.close(),t=null)}const n=e=>{const r=new Error("probe error: "+e);r.transport=t.name,s(),this.emitReserved("upgradeError",r)};function o(){n("transport closed")}function a(){n("socket closed")}function l(e){t&&e.name!==t.name&&s()}const c=()=>{t.removeListener("open",i),t.removeListener("error",n),t.removeListener("close",o),this.off("close",a),this.off("upgrading",l)};t.once("open",i),t.once("error",n),t.once("close",o),this.once("close",a),this.once("upgrading",l),-1!==this._upgrades.indexOf("webtransport")&&"webtransport"!==e?this.setTimeoutFn(()=>{r||t.open()},200):t.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const t=[];for(let r=0;r<e.length;r++)~this.transports.indexOf(e[r])&&t.push(e[r]);return t}}let cv=class extends lv{constructor(e,t={}){const r="object"==typeof e?e:t;(!r.transports||r.transports&&"string"==typeof r.transports[0])&&(r.transports=(r.transports||["polling","websocket","webtransport"]).map(e=>tv[e]).filter(e=>!!e)),super(e,r)}};const hv="function"==typeof ArrayBuffer,uv=Object.prototype.toString,dv="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===uv.call(Blob),fv="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===uv.call(File);function pv(e){return hv&&(e instanceof ArrayBuffer||(e=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer)(e))||dv&&e instanceof Blob||fv&&e instanceof File}function _v(e,t){if(!e||"object"!=typeof e)return!1;if(Array.isArray(e)){for(let t=0,r=e.length;t<r;t++)if(_v(e[t]))return!0;return!1}if(pv(e))return!0;if(e.toJSON&&"function"==typeof e.toJSON&&1===arguments.length)return _v(e.toJSON(),!0);for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&_v(e[r]))return!0;return!1}function vv(e){const t=[],r=e.data,i=e;return i.data=gv(r,t),i.attachments=t.length,{packet:i,buffers:t}}function gv(e,t){if(!e)return e;if(pv(e)){const r={_placeholder:!0,num:t.length};return t.push(e),r}if(Array.isArray(e)){const r=new Array(e.length);for(let i=0;i<e.length;i++)r[i]=gv(e[i],t);return r}if("object"==typeof e&&!(e instanceof Date)){const r={};for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=gv(e[i],t));return r}return e}function mv(e,t){return e.data=bv(e.data,t),delete e.attachments,e}function bv(e,t){if(!e)return e;if(e&&!0===e._placeholder){if("number"==typeof e.num&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}if(Array.isArray(e))for(let r=0;r<e.length;r++)e[r]=bv(e[r],t);else if("object"==typeof e)for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(e[r]=bv(e[r],t));return e}const yv=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"];var Sv;!function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"}(Sv||(Sv={}));class wv extends P_{constructor(e){super(),this.reviver=e}add(e){let t;if("string"==typeof e){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");t=this.decodeString(e);const r=t.type===Sv.BINARY_EVENT;r||t.type===Sv.BINARY_ACK?(t.type=r?Sv.EVENT:Sv.ACK,this.reconstructor=new Cv(t),0===t.attachments&&super.emitReserved("decoded",t)):super.emitReserved("decoded",t)}else{if(!pv(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");t=this.reconstructor.takeBinaryData(e),t&&(this.reconstructor=null,super.emitReserved("decoded",t))}}decodeString(e){let t=0;const r={type:Number(e.charAt(0))};if(void 0===Sv[r.type])throw new Error("unknown packet type "+r.type);if(r.type===Sv.BINARY_EVENT||r.type===Sv.BINARY_ACK){const i=t+1;for(;"-"!==e.charAt(++t)&&t!=e.length;);const s=e.substring(i,t);if(s!=Number(s)||"-"!==e.charAt(t))throw new Error("Illegal attachments");r.attachments=Number(s)}if("/"===e.charAt(t+1)){const i=t+1;for(;++t;){if(","===e.charAt(t))break;if(t===e.length)break}r.nsp=e.substring(i,t)}else r.nsp="/";const i=e.charAt(t+1);if(""!==i&&Number(i)==i){const i=t+1;for(;++t;){const r=e.charAt(t);if(null==r||Number(r)!=r){--t;break}if(t===e.length)break}r.id=Number(e.substring(i,t+1))}if(e.charAt(++t)){const i=this.tryParse(e.substr(t));if(!wv.isPayloadValid(r.type,i))throw new Error("invalid payload");r.data=i}return r}tryParse(e){try{return JSON.parse(e,this.reviver)}catch(Rd){return!1}}static isPayloadValid(e,t){switch(e){case Sv.CONNECT:return kv(t);case Sv.DISCONNECT:return void 0===t;case Sv.CONNECT_ERROR:return"string"==typeof t||kv(t);case Sv.EVENT:case Sv.BINARY_EVENT:return Array.isArray(t)&&("number"==typeof t[0]||"string"==typeof t[0]&&-1===yv.indexOf(t[0]));case Sv.ACK:case Sv.BINARY_ACK:return Array.isArray(t)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class Cv{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const e=mv(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const xv=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e};function kv(e){return"[object Object]"===Object.prototype.toString.call(e)}const Ev=Object.freeze(Object.defineProperty({__proto__:null,Decoder:wv,Encoder:class{constructor(e){this.replacer=e}encode(e){return e.type!==Sv.EVENT&&e.type!==Sv.ACK||!_v(e)?[this.encodeAsString(e)]:this.encodeAsBinary({type:e.type===Sv.EVENT?Sv.BINARY_EVENT:Sv.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id})}encodeAsString(e){let t=""+e.type;return e.type!==Sv.BINARY_EVENT&&e.type!==Sv.BINARY_ACK||(t+=e.attachments+"-"),e.nsp&&"/"!==e.nsp&&(t+=e.nsp+","),null!=e.id&&(t+=e.id),null!=e.data&&(t+=JSON.stringify(e.data,this.replacer)),t}encodeAsBinary(e){const t=vv(e),r=this.encodeAsString(t.packet),i=t.buffers;return i.unshift(r),i}},get PacketType(){return Sv},isPacketValid:function(e){return"string"==typeof e.nsp&&function(e){return void 0===e||xv(e)}(e.id)&&function(e,t){switch(e){case Sv.CONNECT:return void 0===t||kv(t);case Sv.DISCONNECT:return void 0===t;case Sv.EVENT:return Array.isArray(t)&&("number"==typeof t[0]||"string"==typeof t[0]&&-1===yv.indexOf(t[0]));case Sv.ACK:return Array.isArray(t);case Sv.CONNECT_ERROR:return"string"==typeof t||kv(t);default:return!1}}(e.type,e.data)},protocol:5},Symbol.toStringTag,{value:"Module"}));function Lv(e,t,r){return e.on(t,r),function(){e.off(t,r)}}const Rv=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class Dv extends P_{constructor(e,t,r){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=t,r&&r.auth&&(this.auth=r.auth),this._opts=Object.assign({},r),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[Lv(e,"open",this.onopen.bind(this)),Lv(e,"packet",this.onpacket.bind(this)),Lv(e,"error",this.onerror.bind(this)),Lv(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...t){var r,i,s;if(Rv.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(t.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(t),this;const n={type:Sv.EVENT,data:t,options:{}};if(n.options.compress=!1!==this.flags.compress,"function"==typeof t[t.length-1]){const e=this.ids++,r=t.pop();this._registerAckCallback(e,r),n.id=e}const o=null===(i=null===(r=this.io.engine)||void 0===r?void 0:r.transport)||void 0===i?void 0:i.writable,a=this.connected&&!(null===(s=this.io.engine)||void 0===s?void 0:s._hasPingExpired());return this.flags.volatile&&!o||(a?(this.notifyOutgoingListeners(n),this.packet(n)):this.sendBuffer.push(n)),this.flags={},this}_registerAckCallback(e,t){var r;const i=null!==(r=this.flags.timeout)&&void 0!==r?r:this._opts.ackTimeout;if(void 0===i)return void(this.acks[e]=t);const s=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let t=0;t<this.sendBuffer.length;t++)this.sendBuffer[t].id===e&&this.sendBuffer.splice(t,1);t.call(this,new Error("operation has timed out"))},i),n=(...e)=>{this.io.clearTimeoutFn(s),t.apply(this,e)};n.withError=!0,this.acks[e]=n}emitWithAck(e,...t){return new Promise((r,i)=>{const s=(e,t)=>e?i(e):r(t);s.withError=!0,t.push(s),this.emit(e,...t)})}_addToQueue(e){let t;"function"==typeof e[e.length-1]&&(t=e.pop());const r={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((e,...i)=>{this._queue[0];return null!==e?r.tryCount>this._opts.retries&&(this._queue.shift(),t&&t(e)):(this._queue.shift(),t&&t(null,...i)),r.pending=!1,this._drainQueue()}),this._queue.push(r),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||0===this._queue.length)return;const t=this._queue[0];t.pending&&!e||(t.pending=!0,t.tryCount++,this.flags=t.flags,this.emit.apply(this,t.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){"function"==typeof this.auth?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:Sv.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,t){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,t),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(t=>String(t.id)===e)){const t=this.acks[e];delete this.acks[e],t.withError&&t.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case Sv.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Sv.EVENT:case Sv.BINARY_EVENT:this.onevent(e);break;case Sv.ACK:case Sv.BINARY_ACK:this.onack(e);break;case Sv.DISCONNECT:this.ondisconnect();break;case Sv.CONNECT_ERROR:this.destroy();const t=new Error(e.data.message);t.data=e.data.data,this.emitReserved("connect_error",t)}}onevent(e){const t=e.data||[];null!=e.id&&t.push(this.ack(e.id)),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const t=this._anyListeners.slice();for(const r of t)r.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&"string"==typeof e[e.length-1]&&(this._lastOffset=e[e.length-1])}ack(e){const t=this;let r=!1;return function(...i){r||(r=!0,t.packet({type:Sv.ACK,id:e,data:i}))}}onack(e){const t=this.acks[e.id];"function"==typeof t&&(delete this.acks[e.id],t.withError&&e.data.unshift(null),t.apply(this,e.data))}onconnect(e,t){this.id=e,this.recovered=t&&this._pid===t,this._pid=t,this.connected=!0,this.emitBuffered(),this._drainQueue(!0),this.emitReserved("connect")}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:Sv.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const t=this._anyListeners;for(let r=0;r<t.length;r++)if(e===t[r])return t.splice(r,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const t=this._anyOutgoingListeners;for(let r=0;r<t.length;r++)if(e===t[r])return t.splice(r,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const t=this._anyOutgoingListeners.slice();for(const r of t)r.apply(this,e.data)}}}function Av(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}Av.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),r=Math.floor(t*this.jitter*e);e=1&Math.floor(10*t)?e+r:e-r}return 0|Math.min(e,this.max)},Av.prototype.reset=function(){this.attempts=0},Av.prototype.setMin=function(e){this.ms=e},Av.prototype.setMax=function(e){this.max=e},Av.prototype.setJitter=function(e){this.jitter=e};class Tv extends P_{constructor(e,t){var r;super(),this.nsps={},this.subs=[],e&&"object"==typeof e&&(t=e,e=void 0),(t=t||{}).path=t.path||"/socket.io",this.opts=t,j_(this,t),this.reconnection(!1!==t.reconnection),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor(null!==(r=t.randomizationFactor)&&void 0!==r?r:.5),this.backoff=new Av({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==t.timeout?2e4:t.timeout),this._readyState="closed",this.uri=e;const i=t.parser||Ev;this.encoder=new i.Encoder,this.decoder=new i.Decoder,this._autoConnect=!1!==t.autoConnect,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return void 0===e?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var t;return void 0===e?this._reconnectionDelay:(this._reconnectionDelay=e,null===(t=this.backoff)||void 0===t||t.setMin(e),this)}randomizationFactor(e){var t;return void 0===e?this._randomizationFactor:(this._randomizationFactor=e,null===(t=this.backoff)||void 0===t||t.setJitter(e),this)}reconnectionDelayMax(e){var t;return void 0===e?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,null===(t=this.backoff)||void 0===t||t.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new cv(this.uri,this.opts);const t=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;const i=Lv(t,"open",function(){r.onopen(),e&&e()}),s=t=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",t),e?e(t):this.maybeReconnectOnOpen()},n=Lv(t,"error",s);if(!1!==this._timeout){const e=this._timeout,r=this.setTimeoutFn(()=>{i(),s(new Error("timeout")),t.close()},e);this.opts.autoUnref&&r.unref(),this.subs.push(()=>{this.clearTimeoutFn(r)})}return this.subs.push(i),this.subs.push(n),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(Lv(e,"ping",this.onping.bind(this)),Lv(e,"data",this.ondata.bind(this)),Lv(e,"error",this.onerror.bind(this)),Lv(e,"close",this.onclose.bind(this)),Lv(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(Rd){this.onclose("parse error",Rd)}}ondecoded(e){B_(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,t){let r=this.nsps[e];return r?this._autoConnect&&!r.active&&r.connect():(r=new Dv(this,e,t),this.nsps[e]=r),r}_destroy(e){const t=Object.keys(this.nsps);for(const r of t){if(this.nsps[r].active)return}this._close()}_packet(e){const t=this.encoder.encode(e);for(let r=0;r<t.length;r++)this.engine.write(t[r],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,t){var r;this.cleanup(),null===(r=this.engine)||void 0===r||r.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,t),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const t=this.backoff.duration();this._reconnecting=!0;const r=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),e.skipReconnect||e.open(t=>{t?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",t)):e.onreconnect()}))},t);this.opts.autoUnref&&r.unref(),this.subs.push(()=>{this.clearTimeoutFn(r)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const Pv={};function Bv(e,t){"object"==typeof e&&(t=e,e=void 0);const r=function(e,t="",r){let i=e;r=r||"undefined"!=typeof location&&location,null==e&&(e=r.protocol+"//"+r.host),"string"==typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?r.protocol+e:r.host+e),/^(https?|wss?):\/\//.test(e)||(e=void 0!==r?r.protocol+"//"+e:"https://"+e),i=sv(e)),i.port||(/^(http|ws)$/.test(i.protocol)?i.port="80":/^(http|ws)s$/.test(i.protocol)&&(i.port="443")),i.path=i.path||"/";const s=-1!==i.host.indexOf(":")?"["+i.host+"]":i.host;return i.id=i.protocol+"://"+s+":"+i.port+t,i.href=i.protocol+"://"+s+(r&&r.port===i.port?"":":"+i.port),i}(e,(t=t||{}).path||"/socket.io"),i=r.source,s=r.id,n=r.path,o=Pv[s]&&n in Pv[s].nsps;let a;return t.forceNew||t["force new connection"]||!1===t.multiplex||o?a=new Tv(i,t):(Pv[s]||(Pv[s]=new Tv(i,t)),a=Pv[s]),r.query&&!t.query&&(t.query=r.queryKey),a.socket(r.path,t)}Object.assign(Bv,{Manager:Tv,Socket:Dv,io:Bv,connect:Bv});var Ov={};const Mv=({serverId:e,onConnectionChange:t})=>{const r=F.useRef(null),i=F.useRef(null),s=F.useRef(null),[n,o]=F.useState(!1),[a,l]=F.useState(null),{token:c}=Rf();return F.useEffect(()=>{const n=new l_.Terminal({cursorBlink:!0,cursorStyle:"block",theme:{background:"#0f172a",foreground:"#10b981",cursor:"#10b981",black:"#0f172a",brightBlack:"#64748b"},fontFamily:'"SF Mono", Menlo, "Courier New", monospace',fontSize:13,lineHeight:1.2,letterSpacing:0,scrollback:1e3,disableStdin:!1}),a=new h_.FitAddon;if(n.loadAddon(a),r.current&&(n.open(r.current),a.fit()),s.current=n,!c)return void l("No authentication token found");console.log("[Console] Connecting to WebSocket...");const h=Bv(Ov.REACT_APP_SOCKET_URL||"http://localhost:3002",{auth:{token:c},query:{serverId:e},reconnection:!0,reconnectionDelay:1e3,reconnectionDelayMax:5e3,reconnectionAttempts:5});i.current=h,h.on("connect",()=>{console.log("[Console]  WebSocket connected"),o(!0),l(null),t&&t(!0),n.write("\r\n Connected to server console\r\n")}),h.on("console-output",e=>{n&&n.write(e)}),h.on("console-error",e=>{console.error("[Console] Error:",e),l(e),n&&n.write(`\r\n Error: ${e}\r\n`)}),h.on("disconnect",()=>{console.log("[Console]  WebSocket disconnected"),o(!1),t&&t(!1),n&&n.write("\r\n Console disconnected\r\n")}),h.on("connect_error",e=>{console.error("[Console] Connection error:",e),l(e.message),n&&n.write(`\r\n Connection error: ${e.message}\r\n`)}),h.on("error",e=>{console.error("[Console] Socket error:",e),l(e),n&&n.write(`\r\n Error: ${e}\r\n`)}),n.onData(e=>{h&&h.connected?h.emit("console-input",e):n.write("\r\n Console not connected. Refreshing...\r\n")});const u=()=>{try{a.fit(),h&&h.connected&&h.emit("console-resize",{cols:n.cols,rows:n.rows})}catch(zv){console.warn("[Console] Resize error:",zv.message)}};return window.addEventListener("resize",u),()=>{window.removeEventListener("resize",u),h&&h.disconnect(),n&&n.dispose()}},[e,t]),Y.jsxs("div",{className:"flex flex-col h-full bg-gray-900 rounded-xl border border-gray-700 overflow-hidden shadow-2xl",children:[Y.jsxs("div",{className:"bg-gray-800 px-4 py-2 flex items-center justify-between border-b border-gray-700",children:[Y.jsxs("div",{className:"flex items-center space-x-3",children:[Y.jsxs("div",{className:"flex space-x-2",children:[Y.jsx("div",{className:"w-3 h-3 rounded-full bg-red-500 shadow-lg shadow-red-500/50"}),Y.jsx("div",{className:"w-3 h-3 rounded-full bg-yellow-500 shadow-lg shadow-yellow-500/50"}),Y.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500 shadow-lg shadow-green-500/50"})]}),Y.jsxs("span",{className:"text-xs text-gray-400 font-mono",children:["root@lighth:~/server-",e]})]}),Y.jsxs("div",{className:"flex items-center space-x-2",children:[Y.jsx("div",{className:"w-2 h-2 rounded-full "+(n?"bg-green-500 shadow-lg shadow-green-500/50 animate-pulse":"bg-red-500 shadow-lg shadow-red-500/50")}),Y.jsx("span",{className:"text-xs text-gray-400",children:n?"Connected":"Disconnected"})]})]}),a&&Y.jsxs("div",{className:"bg-red-900/20 border-b border-red-900 px-4 py-2 text-xs text-red-400",children:[" ",a]}),Y.jsx("div",{ref:r,className:"flex-1 overflow-hidden bg-gradient-to-b from-gray-900 to-slate-950"}),Y.jsx("div",{className:"bg-gray-800 px-4 py-1 border-t border-gray-700 text-xs text-gray-500",children:"Type commands and press Enter. Use Ctrl+C to stop processes."})]})},Nv=({serverId:e})=>{const[t,r]=F.useState({cpu:"0",ram:0,ramLimit:0}),{token:i}=Rf();F.useEffect(()=>{const t=Bv("http://localhost:3002",{auth:{token:i},query:{serverId:e}});return t.on("server-stats",e=>{r(e)}),t.on("connect_error",e=>{console.error("Stats connection error:",e)}),()=>t.disconnect()},[e,i]);const s=e=>(e/1024/1024/1024).toFixed(2),n=t.ramLimit>0?t.ram/t.ramLimit*100:0;return Y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-6",children:[Y.jsxs("div",{className:"bg-gray-800 p-5 rounded-xl border border-gray-700 relative overflow-hidden",children:[Y.jsxs("div",{className:"flex justify-between items-center mb-4",children:[Y.jsxs("div",{className:"flex items-center text-gray-400",children:[Y.jsx(Wf,{size:18,className:"mr-2"}),Y.jsx("span",{className:"font-semibold uppercase text-sm",children:"CPU Load"})]}),Y.jsxs("span",{className:"text-2xl font-mono text-white",children:[t.cpu,"%"]})]}),Y.jsx("div",{className:"w-full bg-gray-700 h-2 rounded-full overflow-hidden",children:Y.jsx("div",{className:"h-full bg-blue-500 transition-all duration-500 ease-out",style:{width:`${Math.min(parseFloat(t.cpu),100)}%`}})})]}),Y.jsxs("div",{className:"bg-gray-800 p-5 rounded-xl border border-gray-700",children:[Y.jsxs("div",{className:"flex justify-between items-center mb-4",children:[Y.jsxs("div",{className:"flex items-center text-gray-400",children:[Y.jsx(Xf,{size:18,className:"mr-2"}),Y.jsx("span",{className:"font-semibold uppercase text-sm",children:"Memory"})]}),Y.jsxs("div",{className:"text-right",children:[Y.jsx("span",{className:"text-2xl font-mono text-white",children:s(t.ram)}),Y.jsxs("span",{className:"text-gray-500 text-sm font-mono ml-1",children:["/ ",s(t.ramLimit)," GB"]})]})]}),Y.jsx("div",{className:"w-full bg-gray-700 h-2 rounded-full overflow-hidden",children:Y.jsx("div",{className:"h-full transition-all duration-500 ease-out "+(n>90?"bg-red-500":"bg-purple-500"),style:{width:`${n}%`}})})]})]})},Iv=({serverId:e})=>{const[t,r]=F.useState(["home"]),[i,s]=F.useState([]),[n,o]=F.useState(!1);F.useEffect(()=>{a()},[e]);const a=async()=>{o(!0);try{const r=localStorage.getItem("token");if(!r)return void xf.error("Authentication required");const i=t.length>1?"/"+t.slice(1).join("/"):"",n=await Sp(`/api/servers/${e}/files?path=${encodeURIComponent(i)}`,{headers:{Authorization:`Bearer ${r}`}});if(!n.ok)throw new Error("Failed to fetch files");const o=await n.json();s(o.files||[])}catch(r){console.error("Error fetching files:",r),xf.error("Failed to load files")}finally{o(!1)}},l=e=>{switch(e){case"folder":return Y.jsx(Gf,{className:"text-blue-400",size:16});case"config":return Y.jsx(np,{className:"text-gray-400",size:16});case"json":return Y.jsx(Vf,{className:"text-yellow-400",size:16});case"archive":return Y.jsx(Vf,{className:"text-purple-400",size:16});default:return Y.jsx(Kf,{className:"text-slate-400",size:16})}};return Y.jsxs("div",{className:"bg-brand.darker rounded-2xl border border-brand.border overflow-hidden",children:[Y.jsxs("div",{className:"p-4 bg-brand.card flex justify-between items-center border-b border-brand.border",children:[Y.jsx("div",{className:"flex items-center space-x-2 text-sm",children:t.map((e,i)=>Y.jsxs(z.Fragment,{children:[Y.jsx("span",{onClick:()=>(e=>{r(t.slice(0,e+1)),a()})(i),className:"text-slate-400 hover:text-accent cursor-pointer capitalize",children:e}),i<t.length-1&&Y.jsx(jf,{size:14,className:"text-slate-600"})]},i))}),Y.jsxs("div",{className:"flex space-x-2",children:[Y.jsx("button",{className:"p-2 bg-brand.darkest hover:bg-slate-700 rounded-lg text-slate-300 transition",children:Y.jsx(up,{size:18})}),Y.jsx("button",{className:"p-2 bg-brand.darkest hover:bg-slate-700 rounded-lg text-slate-300 transition",children:Y.jsx(rp,{size:18})})]})]}),Y.jsx("div",{className:"overflow-x-auto",children:Y.jsxs("table",{className:"w-full text-left text-sm",children:[Y.jsx("thead",{className:"bg-brand.darkest/50 text-slate-500 uppercase text-xs",children:Y.jsxs("tr",{children:[Y.jsx("th",{className:"px-6 py-3 font-bold",children:"Name"}),Y.jsx("th",{className:"px-6 py-3 font-bold",children:"Type"}),Y.jsx("th",{className:"px-6 py-3 font-bold text-right",children:"Actions"})]})}),Y.jsx("tbody",{className:"divide-y divide-brand.border",children:n?Y.jsx("tr",{children:Y.jsx("td",{colSpan:"3",className:"px-6 py-4 text-center text-slate-400",children:"Loading files..."})}):0===i.length?Y.jsx("tr",{children:Y.jsx("td",{colSpan:"3",className:"px-6 py-4 text-center text-slate-400",children:"No files in this directory"})}):i.map((e,i)=>Y.jsxs("tr",{onClick:()=>(e=>{e.isDirectory&&(r([...t,e.name]),a())})(e),className:`hover:bg-accent/5 transition-colors ${e.isDirectory?"cursor-pointer":"cursor-default"} group`,children:[Y.jsxs("td",{className:"px-6 py-4 flex items-center space-x-3",children:[l(e.type),Y.jsx("span",{className:"font-medium text-slate-200 group-hover:text-accent",children:e.name})]}),Y.jsx("td",{className:"px-6 py-4 text-slate-500 text-xs",children:e.isDirectory?"Folder":e.type}),Y.jsx("td",{className:"px-6 py-4 text-right",children:Y.jsx("button",{className:"text-slate-600 hover:text-status.offline transition",children:Y.jsx(hp,{size:16})})})]},i))})]})})]})};var jv={};const Hv=()=>{const{id:e}=function(){let{matches:e}=F.useContext(Ku),t=e[e.length-1];return t?t.params:{}}(),t=Ju(),{token:r}=Rf(),[i,s]=F.useState(null),[n,o]=F.useState("offline"),[a,l]=F.useState(!0),[c,h]=F.useState(!1);F.useEffect(()=>{(async()=>{if(!e||!r)return xf.error("Server ID or authentication missing"),void t("/dashboard");try{const i=await fetch(`${jv.REACT_APP_API_URL||"http://localhost:3002"}/api/servers/${e}`,{headers:{Authorization:`Bearer ${r}`}});if(!i.ok){if(404===i.status)return xf.error("Server not found"),void t("/dashboard");throw new Error("Failed to fetch server info")}const n=await i.json();s(n.server),o(n.server.status)}catch(i){console.error("[ServerManager] Error fetching server:",i),xf.error("Failed to load server info"),t("/dashboard")}finally{l(!1)}})()},[e,r,t]);return a?Y.jsx(bp,{children:Y.jsx("div",{className:"flex items-center justify-center h-96",children:Y.jsxs("div",{className:"text-center",children:[Y.jsx("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-t-2 border-accent border-opacity-75 mb-4"}),Y.jsx("p",{className:"text-slate-400",children:"Loading server..."})]})})}):i?Y.jsxs(bp,{children:[Y.jsxs("div",{className:"mb-6",children:[Y.jsxs("button",{onClick:()=>t("/dashboard"),className:"flex items-center gap-2 text-slate-400 hover:text-white transition mb-4",children:[Y.jsx(If,{size:20}),"Back to Servers"]}),Y.jsx("h1",{className:"text-3xl font-bold",children:i.name}),Y.jsxs("p",{className:"text-slate-400 text-sm",children:["Server ID: ",i.uuid]})]}),Y.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[Y.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[Y.jsxs("div",{children:[Y.jsxs("div",{className:"flex items-center justify-between mb-4",children:[Y.jsx("h2",{className:"text-xl font-bold",children:"Live Console"}),Y.jsx("span",{className:"text-xs font-bold px-3 py-1 rounded-full "+(c?"bg-status.online/10 text-status.online":"bg-status.offline/10 text-status.offline"),children:c?"Connected":"Disconnected"})]}),Y.jsx(Mv,{serverId:e,onConnectionChange:e=>{h(e)}})]}),Y.jsxs("div",{children:[Y.jsx("h2",{className:"text-xl font-bold mb-4",children:"File Manager"}),Y.jsx(Iv,{serverId:e})]})]}),Y.jsxs("div",{className:"space-y-6",children:[Y.jsxs("div",{children:[Y.jsx("h2",{className:"text-xl font-bold mb-4",children:"Power Controls"}),Y.jsx(n_,{serverId:e,currentStatus:n,onStatusChange:e=>{o(e)}})]}),Y.jsxs("div",{children:[Y.jsx("h2",{className:"text-xl font-bold mb-4",children:"Server Info"}),Y.jsx(xp,{id:i.id,name:i.name,ip:i.ipAddress,status:n,ram:i.memory})]}),Y.jsxs("div",{children:[Y.jsx("h2",{className:"text-xl font-bold mb-4",children:"Resource Usage"}),Y.jsx(Nv,{serverId:e})]})]})]})]}):Y.jsx(bp,{children:Y.jsxs("div",{className:"text-center py-12",children:[Y.jsx("p",{className:"text-slate-400 mb-4",children:"Server not found"}),Y.jsx("button",{onClick:()=>t("/dashboard"),className:"px-4 py-2 bg-accent hover:bg-accent/90 rounded-lg font-semibold transition",children:"Back to Servers"})]})})};function Fv(){return Y.jsx(Lf,{children:Y.jsxs(gd,{children:[Y.jsx(Cf,{position:"top-right",toastOptions:{duration:4e3,style:{background:"#1e293b",color:"#fff",border:"1px solid #334155",borderRadius:"0.5rem"}}}),Y.jsxs(dd,{children:[Y.jsx(hd,{path:"/login",element:Y.jsx(pp,{})}),Y.jsx(hd,{path:"/register",element:Y.jsx(_p,{})}),Y.jsx(hd,{path:"/dashboard",element:Y.jsx(Df,{children:Y.jsx(i_,{})})}),Y.jsx(hd,{path:"/server/:id",element:Y.jsx(Df,{children:Y.jsx(Hv,{})})}),Y.jsx(hd,{path:"/",element:Y.jsx(cd,{to:"/dashboard",replace:!0})}),Y.jsx(hd,{path:"*",element:Y.jsx(cd,{to:"/dashboard",replace:!0})})]})]})})}Q.createRoot(document.getElementById("root")).render(Y.jsx(z.StrictMode,{children:Y.jsx(Fv,{})}));
